[{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\events\\[eventTitle]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScanLine' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ScanLine"},"fix":{"range":[505,518],"text":""},"desc":"Remove unused variable \"ScanLine\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scanInput' is assigned a value but never used.","line":76,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":76,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scanResult' is assigned a value but never used.","line":77,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":77,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scanError' is assigned a value but never used.","line":82,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":82,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scanLoading' is assigned a value but never used.","line":83,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":83,"endColumn":21},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadData` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\events\\[eventTitle]\\page.tsx:113:21\n  111 |\n  112 |   useEffect(() => {\n> 113 |     if (eventTitle) loadData();\n      |                     ^^^^^^^^ `loadData` accessed before it is declared\n  114 |   }, [eventTitle]);\n  115 |\n  116 |   const loadData = async () => {\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\events\\[eventTitle]\\page.tsx:116:3\n  114 |   }, [eventTitle]);\n  115 |\n> 116 |   const loadData = async () => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 117 |     setLoading(true);\n      | ^^^^^^^^^^^^^^^^^^^^^\n> 118 |     const data = await fetchDetailedEventRegistrations(eventTitle);\n      ΓÇª\n      | ^^^^^^^^^^^^^^^^^^^^^\n> 126 |     setLoading(false);\n      | ^^^^^^^^^^^^^^^^^^^^^\n> 127 |   };\n      | ^^^^^ `loadData` is declared here\n  128 |\n  129 |   // ΓöÇΓöÇ Chest No Scanner ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\n  130 |   const handleChestScan = useCallback(","line":113,"column":21,"nodeType":null,"endLine":113,"endColumn":29},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array.","line":114,"column":6,"nodeType":"ArrayExpression","endLine":114,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [eventTitle, loadData]","fix":{"range":[3101,3113],"text":"[eventTitle, loadData]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleChestScan' is assigned a value but never used.","line":130,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":314,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9096,9099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9096,9099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":317,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":317,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9171,9174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9171,9174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":337,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":337,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9922,9925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9922,9925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":345,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":345,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10211,10214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10211,10214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":361,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":361,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10838,10841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10838,10841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":717,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":717,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25329,25332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25329,25332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport {\r\n  DetailedRegistration,\r\n  fetchDetailedEventRegistrations,\r\n  adminMarkParticipation,\r\n  adminBulkMarkParticipation,\r\n} from \"@/lib/adminService\";\r\nimport {\r\n  Search,\r\n  ChevronLeft,\r\n  Download,\r\n  Users,\r\n  Mail,\r\n  Phone,\r\n  Hash,\r\n  Calendar,\r\n  User,\r\n  Crown,\r\n  Trash2,\r\n  Plus,\r\n  X,\r\n  CheckCircle2,\r\n  XCircle,\r\n  CheckCheck,\r\n  ListChecks,\r\n  Filter,\r\n  ScanLine,\r\n} from \"lucide-react\";\r\nimport * as XLSX from \"xlsx\";\r\nimport toast from \"react-hot-toast\";\r\nimport ConfirmToast from \"@/components/ConfirmToast\";\r\nimport ExportOptionsModal from \"@/components/admin/ExportOptionsModal\";\r\nimport {\r\n  adminAddUserToEvent,\r\n  adminRemoveUserFromEvent,\r\n} from \"@/lib/adminService\";\r\n\r\ntype ParticipationFilter = \"all\" | \"participated\" | \"not_participated\";\r\n\r\nexport default function EventDetailedView() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const eventTitle = decodeURIComponent(params.eventTitle as string);\r\n\r\n  const [registrations, setRegistrations] = useState<DetailedRegistration[]>(\r\n    [],\r\n  );\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sortBy, setSortBy] = useState<\"chestNo\" | \"name\" | \"time\" | \"house\">(\r\n    \"chestNo\",\r\n  );\r\n  const [selectedHouse, setSelectedHouse] = useState<string | null>(null);\r\n  const [participationFilter, setParticipationFilter] =\r\n    useState<ParticipationFilter>(\"all\");\r\n\r\n  // Optimistic participation state: map of regId -> participated boolean\r\n  const [participationMap, setParticipationMap] = useState<\r\n    Record<string, boolean>\r\n  >({});\r\n  const [togglingIds, setTogglingIds] = useState<Set<string>>(new Set());\r\n  const [bulkLoading, setBulkLoading] = useState(false);\r\n\r\n  // Export\r\n  const [isExportModalOpen, setIsExportModalOpen] = useState(false);\r\n\r\n  // Add User\r\n  const [isAddUserModalOpen, setIsAddUserModalOpen] = useState(false);\r\n  const [newUserEmail, setNewUserEmail] = useState(\"\");\r\n  const [addingUser, setAddingUser] = useState(false);\r\n\r\n  // Chest No Scanner\r\n  const [scanInput, setScanInput] = useState(\"\");\r\n  const [scanResult, setScanResult] = useState<{\r\n    name: string;\r\n    participated: boolean;\r\n    regId: string;\r\n  } | null>(null);\r\n  const [scanError, setScanError] = useState<string | null>(null);\r\n  const [scanLoading, setScanLoading] = useState(false);\r\n\r\n  const houses = [\r\n    {\r\n      name: \"Red House\",\r\n      color: \"bg-red-500\",\r\n      border: \"border-red-500\",\r\n      key: \"red\",\r\n    },\r\n    {\r\n      name: \"Blue House\",\r\n      color: \"bg-blue-500\",\r\n      border: \"border-blue-500\",\r\n      key: \"blue\",\r\n    },\r\n    {\r\n      name: \"Green House\",\r\n      color: \"bg-green-500\",\r\n      border: \"border-green-500\",\r\n      key: \"green\",\r\n    },\r\n    {\r\n      name: \"Yellow House\",\r\n      color: \"bg-yellow-500\",\r\n      border: \"border-yellow-500\",\r\n      key: \"yellow\",\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (eventTitle) loadData();\r\n  }, [eventTitle]);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    const data = await fetchDetailedEventRegistrations(eventTitle);\r\n    setRegistrations(data);\r\n    // Initialise optimistic map from fetched data\r\n    const map: Record<string, boolean> = {};\r\n    data.forEach((r) => {\r\n      map[r.id] = r.participated || false;\r\n    });\r\n    setParticipationMap(map);\r\n    setLoading(false);\r\n  };\r\n\r\n  // ΓöÇΓöÇ Chest No Scanner ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const handleChestScan = useCallback(\r\n    async (raw: string) => {\r\n      const input = raw.trim();\r\n      if (!input) return;\r\n\r\n      // Find the registration whose chestNo matches\r\n      const reg = registrations.find(\r\n        (r) =>\r\n          r.chestNo.trim().toLowerCase() === input.toLowerCase() ||\r\n          (r.leaderChestNo &&\r\n            r.leaderChestNo.trim().toLowerCase() === input.toLowerCase()) ||\r\n          (r.members &&\r\n            r.members.some(\r\n              (m) => m.chestNo.trim().toLowerCase() === input.toLowerCase(),\r\n            )),\r\n      );\r\n\r\n      if (!reg) {\r\n        setScanError(`No registration found for chest no \"${input}\"`);\r\n        setScanResult(null);\r\n        return;\r\n      }\r\n\r\n      setScanError(null);\r\n      setScanLoading(true);\r\n\r\n      const next = !(participationMap[reg.id] ?? false);\r\n\r\n      // Optimistic\r\n      setParticipationMap((prev) => ({ ...prev, [reg.id]: next }));\r\n\r\n      const result = await adminMarkParticipation(reg.id, next);\r\n      setScanLoading(false);\r\n\r\n      if (result.success) {\r\n        setScanResult({ name: reg.name, participated: next, regId: reg.id });\r\n        setScanInput(\"\");\r\n      } else {\r\n        // Revert\r\n        setParticipationMap((prev) => ({ ...prev, [reg.id]: !next }));\r\n        setScanError(result.message || \"Failed to mark participation.\");\r\n        setScanResult(null);\r\n      }\r\n    },\r\n    [registrations, participationMap],\r\n  );\r\n\r\n  // ΓöÇΓöÇ Toggle single participation ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const handleToggleParticipation = useCallback(\r\n    async (regId: string) => {\r\n      const current = participationMap[regId] ?? false;\r\n      const next = !current;\r\n\r\n      // Optimistic update\r\n      setParticipationMap((prev) => ({ ...prev, [regId]: next }));\r\n      setTogglingIds((prev) => new Set(prev).add(regId));\r\n\r\n      const result = await adminMarkParticipation(regId, next);\r\n\r\n      setTogglingIds((prev) => {\r\n        const s = new Set(prev);\r\n        s.delete(regId);\r\n        return s;\r\n      });\r\n\r\n      if (!result.success) {\r\n        // Revert\r\n        setParticipationMap((prev) => ({ ...prev, [regId]: current }));\r\n        toast.error(result.message || \"Failed to update participation.\");\r\n      }\r\n    },\r\n    [participationMap],\r\n  );\r\n\r\n  // ΓöÇΓöÇ Bulk actions ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const handleBulkMark = async (participated: boolean) => {\r\n    // Only operate on currently visible (filtered) registrations\r\n    const ids = sortedRegs.map((r) => r.id);\r\n    if (ids.length === 0) return;\r\n\r\n    setBulkLoading(true);\r\n\r\n    // Optimistic\r\n    setParticipationMap((prev) => {\r\n      const next = { ...prev };\r\n      ids.forEach((id) => {\r\n        next[id] = participated;\r\n      });\r\n      return next;\r\n    });\r\n\r\n    const result = await adminBulkMarkParticipation(ids, participated);\r\n    setBulkLoading(false);\r\n\r\n    if (result.success) {\r\n      toast.success(result.message || \"Done!\");\r\n    } else {\r\n      // Revert optimistic update\r\n      await loadData();\r\n      toast.error(result.message || \"Bulk update failed.\");\r\n    }\r\n  };\r\n\r\n  // ΓöÇΓöÇ Derived participation stats ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const participatedCount =\r\n    Object.values(participationMap).filter(Boolean).length;\r\n  const totalCount = registrations.length;\r\n\r\n  // ΓöÇΓöÇ Add/Remove User ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const handleAddUser = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newUserEmail.trim()) return;\r\n    setAddingUser(true);\r\n    const result = await adminAddUserToEvent(eventTitle, newUserEmail.trim());\r\n    if (result.success) {\r\n      toast.success(result.message || \"User added!\");\r\n      setIsAddUserModalOpen(false);\r\n      setNewUserEmail(\"\");\r\n      loadData();\r\n    } else {\r\n      toast.error(result.message || \"Failed to add user.\");\r\n    }\r\n    setAddingUser(false);\r\n  };\r\n\r\n  const handleRemoveUser = (\r\n    regId: string,\r\n    uid: string,\r\n    type: string,\r\n    name: string,\r\n  ) => {\r\n    toast.custom(\r\n      (t) => (\r\n        <ConfirmToast\r\n          t={t}\r\n          message={`Are you sure you want to remove ${name} from this event?\\n\\n${\r\n            type !== \"individual\"\r\n              ? \"ΓÜá∩╕Å If this user is a TEAM LEADER, the entire team will be disbanded.\"\r\n              : \"\"\r\n          }`}\r\n          onConfirm={async () => {\r\n            const result = await adminRemoveUserFromEvent(\r\n              eventTitle,\r\n              regId,\r\n              uid,\r\n              type,\r\n            );\r\n            if (result.success) {\r\n              toast.success(result.message || \"Removed successfully\");\r\n              loadData();\r\n            } else {\r\n              toast.error(result.message || \"Failed to remove\");\r\n            }\r\n          }}\r\n        />\r\n      ),\r\n      { duration: Infinity },\r\n    );\r\n  };\r\n\r\n  // ΓöÇΓöÇ Export ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const handleExportClick = () => {\r\n    if (registrations.length === 0) return;\r\n    setIsExportModalOpen(true);\r\n  };\r\n\r\n  const allExportFields = [\r\n    \"Type\",\r\n    \"Team Name\",\r\n    \"Chest No (Main)\",\r\n    \"Individual Chest No\",\r\n    \"Role\",\r\n    \"Name\",\r\n    \"College ID\",\r\n    \"Email\",\r\n    \"Mobile\",\r\n    \"House\",\r\n    \"Department\",\r\n    \"Registered At\",\r\n    \"Participated\",\r\n  ];\r\n\r\n  const handleExportConfirm = (selectedFields: string[]) => {\r\n    if (registrations.length === 0) return;\r\n    const rows: any[] = [];\r\n\r\n    registrations.forEach((reg) => {\r\n      const mainData: any = {\r\n        Type: reg.type.toUpperCase(),\r\n        \"Team Name\": reg.teamName || \"-\",\r\n        \"Chest No (Main)\": reg.chestNo,\r\n        \"Individual Chest No\":\r\n          reg.type === \"team\" ? reg.leaderChestNo || \"-\" : reg.chestNo,\r\n        Role: reg.type === \"team\" ? \"Leader\" : \"Participant\",\r\n        Name: reg.name,\r\n        \"College ID\": reg.collegeId,\r\n        Email: reg.email,\r\n        Mobile: reg.mobile,\r\n        House: reg.house,\r\n        Department: reg.department,\r\n        \"Registered At\": reg.registeredAt\r\n          ? new Date(reg.registeredAt.seconds * 1000).toLocaleString()\r\n          : \"-\",\r\n        Participated:\r\n          (participationMap[reg.id] ?? reg.participated) ? \"Yes\" : \"No\",\r\n      };\r\n\r\n      const filteredMain: any = {};\r\n      selectedFields.forEach((f) => {\r\n        if (mainData[f] !== undefined) filteredMain[f] = mainData[f];\r\n      });\r\n      rows.push(filteredMain);\r\n\r\n      if (reg.members && reg.members.length > 0) {\r\n        reg.members.forEach((member) => {\r\n          const memberData: any = {\r\n            Type: \"TEAM MEMBER\",\r\n            \"Team Name\": reg.teamName || \"-\",\r\n            \"Chest No (Main)\": reg.chestNo,\r\n            \"Individual Chest No\": member.chestNo,\r\n            Role: \"Member\",\r\n            Name: member.name,\r\n            \"College ID\": member.collegeId,\r\n            Email: member.email,\r\n            Mobile: member.mobile,\r\n            House: member.house,\r\n            Department: member.department,\r\n            \"Registered At\": \"-\",\r\n            Participated:\r\n              (participationMap[reg.id] ?? reg.participated) ? \"Yes\" : \"No\",\r\n          };\r\n          const filteredMember: any = {};\r\n          selectedFields.forEach((f) => {\r\n            if (memberData[f] !== undefined) filteredMember[f] = memberData[f];\r\n          });\r\n          rows.push(filteredMember);\r\n        });\r\n      }\r\n    });\r\n\r\n    const wb = XLSX.utils.book_new();\r\n    const ws = XLSX.utils.json_to_sheet(rows);\r\n    const colWidths = selectedFields.map((key) => ({\r\n      wch:\r\n        Math.max(\r\n          key.length,\r\n          ...rows.map((r) => (r[key] ? r[key].toString().length : 0)),\r\n        ) + 2,\r\n    }));\r\n    ws[\"!cols\"] = colWidths;\r\n    const safeTitle = eventTitle.replace(/[^a-z0-9]/gi, \"_\").substring(0, 30);\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Participants\");\r\n    XLSX.writeFile(wb, `jhalak_${safeTitle}_detailed.xlsx`);\r\n    toast.success(\"Excel exported!\");\r\n    setIsExportModalOpen(false);\r\n  };\r\n\r\n  // ΓöÇΓöÇ Filter + Sort ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r\n  const filteredRegs = registrations.filter((reg) => {\r\n    const term = searchTerm.toLowerCase();\r\n    const matchesSearch =\r\n      reg.name.toLowerCase().includes(term) ||\r\n      reg.email.toLowerCase().includes(term) ||\r\n      reg.chestNo.toLowerCase().includes(term) ||\r\n      reg.mobile.includes(term) ||\r\n      (reg.teamName && reg.teamName.toLowerCase().includes(term)) ||\r\n      (reg.members &&\r\n        reg.members.some(\r\n          (m) =>\r\n            m.name.toLowerCase().includes(term) || m.chestNo.includes(term),\r\n        ));\r\n\r\n    if (!matchesSearch) return false;\r\n\r\n    if (selectedHouse) {\r\n      const houseKey = selectedHouse.toLowerCase();\r\n      if (reg.house && reg.house.toLowerCase().includes(houseKey)) {\r\n        /* ok */\r\n      } else if (\r\n        reg.members &&\r\n        reg.members.some(\r\n          (m) => m.house && m.house.toLowerCase().includes(houseKey),\r\n        )\r\n      ) {\r\n        /* ok */\r\n      } else return false;\r\n    }\r\n\r\n    // Participation filter uses the optimistic map\r\n    const isParticipated =\r\n      participationMap[reg.id] ?? reg.participated ?? false;\r\n    if (participationFilter === \"participated\" && !isParticipated) return false;\r\n    if (participationFilter === \"not_participated\" && isParticipated)\r\n      return false;\r\n\r\n    return true;\r\n  });\r\n\r\n  const sortedRegs = [...filteredRegs].sort((a, b) => {\r\n    if (selectedHouse) {\r\n      const deptCompare = (a.department || \"\").localeCompare(\r\n        b.department || \"\",\r\n      );\r\n      if (deptCompare !== 0) return deptCompare;\r\n      const semCompare = (a.semester || \"\").localeCompare(b.semester || \"\");\r\n      if (semCompare !== 0) return semCompare;\r\n    }\r\n    if (sortBy === \"chestNo\")\r\n      return a.chestNo.localeCompare(b.chestNo, undefined, { numeric: true });\r\n    if (sortBy === \"name\") return a.name.localeCompare(b.name);\r\n    if (sortBy === \"house\") return (a.house || \"\").localeCompare(b.house || \"\");\r\n    const tA = a.registeredAt?.seconds || 0;\r\n    const tB = b.registeredAt?.seconds || 0;\r\n    return tB - tA;\r\n  });\r\n\r\n  const getHouseColor = (house: string) => {\r\n    const n = (house || \"\").toLowerCase();\r\n    if (n.includes(\"red\") || n.includes(\"ruby\"))\r\n      return \"text-red-500 border-red-500/50 bg-red-500/10\";\r\n    if (n.includes(\"blue\") || n.includes(\"sapphire\"))\r\n      return \"text-blue-500 border-blue-500/50 bg-blue-500/10\";\r\n    if (n.includes(\"green\") || n.includes(\"emerald\"))\r\n      return \"text-green-500 border-green-500/50 bg-green-500/10\";\r\n    if (n.includes(\"yellow\") || n.includes(\"topaz\"))\r\n      return \"text-yellow-500 border-yellow-500/50 bg-yellow-500/10\";\r\n    return \"text-purple-400 border-purple-500/50 bg-purple-500/10\";\r\n  };\r\n\r\n  const totalParticipants = registrations.reduce(\r\n    (acc, curr) => acc + 1 + (curr.members?.length || 0),\r\n    0,\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto space-y-8\">\r\n        {/* Top Navigation & Header Skeleton */}\r\n        <div className=\"flex flex-col gap-6\">\r\n          <div className=\"h-4 w-32 bg-white/5 rounded shimmer\" />\r\n          <div className=\"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-white/10 pb-6\">\r\n            <div className=\"space-y-4 w-full md:w-1/2\">\r\n              <div className=\"h-12 w-3/4 bg-white/5 rounded-lg shimmer\" />\r\n              <div className=\"flex gap-4\">\r\n                <div className=\"h-4 w-24 bg-white/5 rounded shimmer\" />\r\n                <div className=\"h-4 w-24 bg-white/5 rounded shimmer\" />\r\n                <div className=\"h-4 w-32 bg-white/5 rounded shimmer\" />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <div className=\"h-10 w-28 bg-white/5 rounded-full shimmer\" />\r\n              <div className=\"h-10 w-32 bg-white/5 rounded-full shimmer\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Participation Tracker Skeleton */}\r\n        <div className=\"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4\">\r\n          <div className=\"flex justify-between\">\r\n            <div className=\"h-4 w-40 bg-white/10 rounded shimmer\" />\r\n            <div className=\"h-4 w-24 bg-white/10 rounded shimmer\" />\r\n          </div>\r\n          <div className=\"h-2 w-full bg-white/5 rounded-full shimmer\" />\r\n          <div className=\"flex gap-2\">\r\n            <div className=\"h-8 w-40 bg-white/10 rounded-full shimmer\" />\r\n            <div className=\"h-8 w-24 bg-white/10 rounded-full shimmer\" />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filters Skeleton */}\r\n        <div className=\"h-14 w-full bg-white/5 border border-white/10 rounded-2xl shimmer\" />\r\n\r\n        {/* House Filters Skeleton */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div\r\n              key={i}\r\n              className=\"h-24 bg-white/5 rounded-xl border border-white/10 shimmer\"\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Registration Cards Skeleton */}\r\n        <div className=\"grid grid-cols-1 gap-4\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div\r\n              key={i}\r\n              className=\"h-32 bg-white/5 border border-white/10 rounded-2xl shimmer\"\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        <style>{`\r\n          .shimmer {\r\n            position: relative;\r\n            overflow: hidden;\r\n          }\r\n          .shimmer::after {\r\n            content: '';\r\n            position: absolute;\r\n            inset: 0;\r\n            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.04) 50%, transparent 100%);\r\n            animation: shimmerSlide 1.6s ease-in-out infinite;\r\n          }\r\n          @keyframes shimmerSlide {\r\n            0%   { transform: translateX(-100%); }\r\n            100% { transform: translateX(100%); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const participationPercent =\r\n    totalCount > 0 ? Math.round((participatedCount / totalCount) * 100) : 0;\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto space-y-8\">\r\n      {/* Top Navigation & Header */}\r\n      <div className=\"flex flex-col gap-6\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"self-start flex items-center gap-2 text-white/40 hover:text-white transition-colors text-xs font-bold uppercase tracking-widest group\"\r\n        >\r\n          <ChevronLeft\r\n            size={16}\r\n            className=\"group-hover:-translate-x-1 transition-transform\"\r\n          />\r\n          Back to Events\r\n        </button>\r\n\r\n        <div className=\"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-white/10 pb-6\">\r\n          <div>\r\n            <h1 className=\"text-4xl md:text-5xl font-black text-white font-unbounded tracking-tighter uppercase mb-2\">\r\n              {eventTitle}\r\n            </h1>\r\n            <div className=\"flex items-center gap-4 text-sm text-gray-400 font-mono flex-wrap\">\r\n              <span className=\"flex items-center gap-2\">\r\n                <Users size={14} className=\"text-[#BA170D]\" />\r\n                <span className=\"text-white font-bold\">\r\n                  {registrations.length}\r\n                </span>{\" \"}\r\n                Entries\r\n              </span>\r\n              <span className=\"w-1 h-1 bg-white/20 rounded-full\" />\r\n              <span className=\"flex items-center gap-2\">\r\n                <User size={14} className=\"text-[#BA170D]\" />\r\n                <span className=\"text-white font-bold\">\r\n                  {totalParticipants}\r\n                </span>{\" \"}\r\n                Participants\r\n              </span>\r\n              <span className=\"w-1 h-1 bg-white/20 rounded-full\" />\r\n              <span className=\"flex items-center gap-2\">\r\n                <CheckCircle2 size={14} className=\"text-green-500\" />\r\n                <span className=\"text-green-400 font-bold\">\r\n                  {participatedCount}\r\n                </span>\r\n                <span className=\"text-gray-500\">\r\n                  / {totalCount} Participated\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 flex-wrap\">\r\n            <button\r\n              onClick={() => setIsAddUserModalOpen(true)}\r\n              className=\"flex items-center gap-2 bg-[#BA170D] text-white hover:bg-[#a0140b] px-6 py-3 rounded-full transition-all font-bold text-xs uppercase tracking-wider\"\r\n            >\r\n              <Plus size={16} /> Add User\r\n            </button>\r\n            <button\r\n              onClick={handleExportClick}\r\n              disabled={registrations.length === 0}\r\n              className=\"flex items-center gap-2 bg-white text-black hover:bg-[#BA170D] hover:text-white px-6 py-3 rounded-full transition-all font-bold text-xs uppercase tracking-wider disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <Download size={16} /> Export Excel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ΓöÇΓöÇ Participation Progress Bar ΓöÇΓöÇ */}\r\n      <div className=\"bg-[#0A0A0A] border border-white/5 rounded-2xl p-5 space-y-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <ListChecks size={16} className=\"text-[#BA170D]\" />\r\n            <span className=\"text-xs font-bold uppercase tracking-widest text-gray-400\">\r\n              Participation Tracker\r\n            </span>\r\n          </div>\r\n          <span className=\"text-xs font-mono text-gray-500\">\r\n            {participatedCount} / {totalCount} &nbsp;┬╖&nbsp;\r\n            <span className=\"text-green-400 font-bold\">\r\n              {participationPercent}%\r\n            </span>\r\n          </span>\r\n        </div>\r\n\r\n        {/* Progress bar */}\r\n        <div className=\"w-full h-2 bg-white/5 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full rounded-full transition-all duration-500\"\r\n            style={{\r\n              width: `${participationPercent}%`,\r\n              background: \"linear-gradient(90deg, #7a0d07, #BA170D, #22c55e)\",\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Bulk action buttons */}\r\n        <div className=\"flex flex-wrap gap-2 pt-1\">\r\n          <button\r\n            onClick={() => handleBulkMark(true)}\r\n            disabled={bulkLoading}\r\n            className=\"flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider bg-green-500/10 text-green-400 border border-green-500/20 hover:bg-green-500/20 transition-all disabled:opacity-50\"\r\n          >\r\n            <CheckCheck size={13} />\r\n            {participationFilter === \"all\"\r\n              ? \"Mark All as Participated\"\r\n              : `Mark ${sortedRegs.length} Visible`}\r\n          </button>\r\n          <button\r\n            onClick={() => handleBulkMark(false)}\r\n            disabled={bulkLoading}\r\n            className=\"flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 transition-all disabled:opacity-50\"\r\n          >\r\n            <XCircle size={13} />\r\n            Clear\r\n            {participationFilter !== \"all\"\r\n              ? ` ${sortedRegs.length} Visible`\r\n              : \" All\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"sticky top-4 z-10 bg-black/80 backdrop-blur-xl border border-white/10 p-2 rounded-2xl flex flex-col md:flex-row gap-2 shadow-2xl\">\r\n        <div className=\"relative flex-1 group\">\r\n          <Search\r\n            className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-[#BA170D] transition-colors\"\r\n            size={18}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by name, chest no, email...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full bg-transparent border-none outline-none text-white px-12 py-3 placeholder:text-gray-600 font-medium\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"h-full w-px bg-white/10 hidden md:block\" />\r\n\r\n        {/* Participation filter tabs */}\r\n        <div className=\"flex items-center gap-1 px-2\">\r\n          <Filter size={12} className=\"text-gray-500 mr-1\" />\r\n          {(\r\n            [\"all\", \"participated\", \"not_participated\"] as ParticipationFilter[]\r\n          ).map((v) => (\r\n            <button\r\n              key={v}\r\n              onClick={() => setParticipationFilter(v)}\r\n              className={`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${\r\n                participationFilter === v\r\n                  ? v === \"participated\"\r\n                    ? \"bg-green-500/20 text-green-400 border border-green-500/30\"\r\n                    : v === \"not_participated\"\r\n                      ? \"bg-red-500/20 text-red-400 border border-red-500/30\"\r\n                      : \"bg-white/10 text-white border border-white/20\"\r\n                  : \"text-gray-500 hover:text-gray-300\"\r\n              }`}\r\n            >\r\n              {v === \"all\"\r\n                ? \"All\"\r\n                : v === \"participated\"\r\n                  ? \"Γ£ô Done\"\r\n                  : \"Γ£ù Pending\"}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"h-full w-px bg-white/10 hidden md:block\" />\r\n\r\n        <select\r\n          value={sortBy}\r\n          onChange={(e) => setSortBy(e.target.value as any)}\r\n          className=\"bg-transparent text-gray-400 hover:text-white font-bold text-xs uppercase tracking-wider px-4 py-3 outline-none cursor-pointer border-none\"\r\n        >\r\n          <option value=\"chestNo\" className=\"bg-black text-white\">\r\n            Sort: Chest No\r\n          </option>\r\n          <option value=\"name\" className=\"bg-black text-white\">\r\n            Sort: Name\r\n          </option>\r\n          <option value=\"house\" className=\"bg-black text-white\">\r\n            Sort: House\r\n          </option>\r\n          <option value=\"time\" className=\"bg-black text-white\">\r\n            Sort: Recent\r\n          </option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* House Filters */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        {houses.map((house) => {\r\n          const count = registrations.filter(\r\n            (r) =>\r\n              (r.house && r.house.toLowerCase().includes(house.key)) ||\r\n              (r.members &&\r\n                r.members.some(\r\n                  (m) => m.house && m.house.toLowerCase().includes(house.key),\r\n                )),\r\n          ).length;\r\n          const isSelected = selectedHouse === house.key;\r\n\r\n          return (\r\n            <button\r\n              key={house.key}\r\n              onClick={() => setSelectedHouse(isSelected ? null : house.key)}\r\n              className={`relative p-4 rounded-xl border transition-all duration-300 overflow-hidden group ${\r\n                isSelected\r\n                  ? `${house.color} border-transparent text-white`\r\n                  : \"border-white/5 bg-white/5 hover:border-white/20 text-gray-400\"\r\n              }`}\r\n            >\r\n              <div\r\n                className={`absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity ${house.color}`}\r\n              />\r\n              <div className=\"relative z-10 flex flex-col items-start gap-1\">\r\n                <span\r\n                  className={`text-xs font-bold uppercase tracking-widest ${isSelected ? \"text-white\" : \"text-gray-400\"}`}\r\n                >\r\n                  {house.name}\r\n                </span>\r\n                <span className=\"text-2xl font-black font-unbounded text-white\">\r\n                  {count}\r\n                </span>\r\n              </div>\r\n              {isSelected && (\r\n                <div\r\n                  className={`absolute top-0 right-0 w-16 h-16 blur-2xl -mr-8 -mt-8 ${house.color} opacity-20`}\r\n                />\r\n              )}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Registration Cards */}\r\n      <div className=\"grid grid-cols-1 gap-4\">\r\n        {sortedRegs.map((reg, index) => {\r\n          const currentGroup = `${reg.department || \"Unknown\"} - ${reg.semester || \"?\"}`;\r\n          const prevReg = index > 0 ? sortedRegs[index - 1] : null;\r\n          const prevGroup = prevReg\r\n            ? `${prevReg.department || \"Unknown\"} - ${prevReg.semester || \"?\"}`\r\n            : null;\r\n          const showHeader = selectedHouse && currentGroup !== prevGroup;\r\n          const isParticipated =\r\n            participationMap[reg.id] ?? reg.participated ?? false;\r\n          const isToggling = togglingIds.has(reg.id);\r\n\r\n          return (\r\n            <div key={reg.id} className=\"contents\">\r\n              {showHeader && (\r\n                <div className=\"mt-8 mb-4 flex items-center gap-4\">\r\n                  <div className=\"h-px flex-1 bg-white/20\" />\r\n                  <h2 className=\"text-xl font-black text-white/80 font-unbounded uppercase tracking-wider\">\r\n                    {currentGroup}\r\n                  </h2>\r\n                  <div className=\"h-px flex-1 bg-white/20\" />\r\n                </div>\r\n              )}\r\n\r\n              <div\r\n                className={`group relative border rounded-2xl overflow-hidden transition-all duration-300 ${\r\n                  isParticipated\r\n                    ? \"bg-green-950/20 border-green-500/20 hover:border-green-500/40\"\r\n                    : \"bg-[#0A0A0A] hover:bg-[#111] border-white/5 hover:border-white/20\"\r\n                }`}\r\n              >\r\n                {/* Participated indicator strip */}\r\n                <div\r\n                  className={`absolute left-0 top-0 bottom-0 w-1 transition-all duration-300 ${isParticipated ? \"bg-green-500\" : \"bg-transparent\"}`}\r\n                />\r\n\r\n                <div className=\"p-6 grid grid-cols-1 md:grid-cols-[auto_1fr_auto] gap-6 items-center\">\r\n                  {/* Chest Number Badge */}\r\n                  <div\r\n                    className={`flex flex-col items-center justify-center w-20 h-20 rounded-xl border transition-colors ${\r\n                      isParticipated\r\n                        ? \"bg-green-500/15 border-green-500/30 group-hover:bg-green-500 group-hover:border-transparent\"\r\n                        : \"bg-[#BA170D]/10 border-[#BA170D]/20 group-hover:bg-[#BA170D]\"\r\n                    } group-hover:text-white`}\r\n                  >\r\n                    <span className=\"text-[9px] font-black uppercase tracking-widest opacity-60 mb-1\">\r\n                      Chest\r\n                    </span>\r\n                    <span className=\"text-2xl font-black font-unbounded tracking-tighter\">\r\n                      {reg.chestNo}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {/* Main Details */}\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                      <h3\r\n                        className={`text-xl font-bold text-white transition-colors ${isParticipated ? \"group-hover:text-green-400\" : \"group-hover:text-[#BA170D]\"}`}\r\n                      >\r\n                        {reg.name}\r\n                      </h3>\r\n                      {reg.type === \"team\" && (\r\n                        <span className=\"flex items-center gap-1 px-2 py-0.5 rounded-full bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 text-[10px] font-bold uppercase tracking-wide\">\r\n                          <Crown size={10} /> Team Leader\r\n                        </span>\r\n                      )}\r\n                      {reg.teamName && (\r\n                        <span className=\"text-gray-500 text-sm\">\r\n                          Of Team{\" \"}\r\n                          <strong className=\"text-gray-300\">\r\n                            {reg.teamName}\r\n                          </strong>\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 text-[10px] font-bold uppercase tracking-wider\">\r\n                      {reg.house && reg.house !== \"-\" && (\r\n                        <span\r\n                          className={`px-2 py-1 rounded border ${getHouseColor(reg.house)}`}\r\n                        >\r\n                          {reg.house}\r\n                        </span>\r\n                      )}\r\n                      {reg.department && reg.department !== \"-\" && (\r\n                        <span className=\"px-2 py-1 rounded border border-white/10 bg-white/5 text-gray-300\">\r\n                          {reg.department}\r\n                        </span>\r\n                      )}\r\n                      {reg.semester && reg.semester !== \"-\" && (\r\n                        <span className=\"px-2 py-1 rounded border border-white/10 bg-white/5 text-gray-400\">\r\n                          {reg.semester}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-4 text-xs text-gray-400 font-mono\">\r\n                      <div className=\"flex items-center gap-1.5 hover:text-white transition-colors\">\r\n                        <Mail size={12} />\r\n                        {reg.email}\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1.5 hover:text-white transition-colors\">\r\n                        <Phone size={12} />\r\n                        {reg.mobile}\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1.5 hover:text-white transition-colors\">\r\n                        <Hash size={12} />\r\n                        {reg.collegeId}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Actions */}\r\n                  <div className=\"text-right space-y-3 flex flex-col items-end\">\r\n                    {/* Participation Toggle */}\r\n                    <button\r\n                      onClick={() => handleToggleParticipation(reg.id)}\r\n                      disabled={isToggling}\r\n                      title={\r\n                        isParticipated\r\n                          ? \"Mark as Not Participated\"\r\n                          : \"Mark as Participated\"\r\n                      }\r\n                      className={`flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider transition-all duration-200 border ${\r\n                        isParticipated\r\n                          ? \"bg-green-500/15 text-green-400 border-green-500/30 hover:bg-red-500/15 hover:text-red-400 hover:border-red-500/30\"\r\n                          : \"bg-white/5 text-gray-400 border-white/10 hover:bg-green-500/15 hover:text-green-400 hover:border-green-500/30\"\r\n                      } ${isToggling ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\r\n                    >\r\n                      {isToggling ? (\r\n                        <span className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n                      ) : isParticipated ? (\r\n                        <CheckCircle2 size={14} />\r\n                      ) : (\r\n                        <XCircle size={14} />\r\n                      )}\r\n                      {isParticipated ? \"Participated\" : \"Not Yet\"}\r\n                    </button>\r\n\r\n                    <div className=\"text-[10px] font-bold uppercase tracking-widest text-[#BA170D] bg-[#BA170D]/5 px-2 py-1 rounded inline-block\">\r\n                      {reg.type} Entry\r\n                    </div>\r\n                    <div className=\"flex items-center justify-end gap-1.5 text-xs text-gray-600\">\r\n                      <Calendar size={12} />\r\n                      {reg.registeredAt\r\n                        ? new Date(\r\n                            reg.registeredAt.seconds * 1000,\r\n                          ).toLocaleDateString()\r\n                        : \"-\"}\r\n                    </div>\r\n                    <button\r\n                      onClick={() =>\r\n                        handleRemoveUser(reg.id, reg.uid, reg.type, reg.name)\r\n                      }\r\n                      className=\"text-gray-500 hover:text-red-500 transition-colors p-1\"\r\n                      title=\"Remove from Event\"\r\n                    >\r\n                      <Trash2 size={16} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Team Members */}\r\n                {reg.members && reg.members.length > 0 && (\r\n                  <div className=\"border-t border-white/5 bg-white/[0.02] p-6\">\r\n                    <h4 className=\"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-4 flex items-center gap-2\">\r\n                      <Users size={12} /> Team Members ({reg.members.length})\r\n                    </h4>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\">\r\n                      {reg.members.map((member, i) => (\r\n                        <div\r\n                          key={i}\r\n                          className=\"flex flex-col p-3 rounded-lg bg-black/40 border border-white/5 hover:border-white/10 transition-colors gap-2 relative group/member\"\r\n                        >\r\n                          <div className=\"absolute top-2 right-2 opacity-0 group-hover/member:opacity-100 transition-opacity\">\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleRemoveUser(\r\n                                  reg.id,\r\n                                  member.uid,\r\n                                  \"team\",\r\n                                  member.name,\r\n                                );\r\n                              }}\r\n                              className=\"text-gray-600 hover:text-red-500 transition-colors\"\r\n                              title=\"Remove Member\"\r\n                            >\r\n                              <X size={14} />\r\n                            </button>\r\n                          </div>\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <div className=\"space-y-1\">\r\n                              <p className=\"text-sm font-bold text-gray-300 truncate\">\r\n                                {member.name}\r\n                              </p>\r\n                              <p className=\"text-[10px] text-gray-500 truncate\">\r\n                                {member.email}\r\n                              </p>\r\n                            </div>\r\n                            <span className=\"text-xs font-mono font-bold text-[#BA170D]\">\r\n                              {member.chestNo}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"flex flex-wrap gap-1.5 text-[9px] font-bold uppercase tracking-wide opacity-80\">\r\n                            {member.house && member.house !== \"-\" && (\r\n                              <span\r\n                                className={`px-1.5 py-0.5 rounded border ${getHouseColor(member.house)}`}\r\n                              >\r\n                                {member.house}\r\n                              </span>\r\n                            )}\r\n                            {member.department && member.department !== \"-\" && (\r\n                              <span className=\"px-1.5 py-0.5 rounded border border-white/10 bg-white/5 text-gray-400\">\r\n                                {member.department}\r\n                              </span>\r\n                            )}\r\n                            {member.semester && member.semester !== \"-\" && (\r\n                              <span className=\"px-1.5 py-0.5 rounded border border-white/10 bg-white/5 text-gray-400\">\r\n                                {member.semester}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Hover accent + participated line */}\r\n                <div\r\n                  className={`absolute bottom-0 left-0 w-full h-0.5 transition-opacity ${isParticipated ? \"bg-green-500 opacity-60 group-hover:opacity-100\" : \"bg-[#BA170D] opacity-0 group-hover:opacity-100\"}`}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Empty State */}\r\n      {sortedRegs.length === 0 && (\r\n        <div className=\"flex flex-col items-center justify-center py-32 text-center border border-dashed border-white/10 rounded-3xl bg-white/5\">\r\n          <div className=\"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-6 text-gray-600\">\r\n            <Search size={32} />\r\n          </div>\r\n          <h3 className=\"text-2xl font-bold text-white font-unbounded mb-2\">\r\n            No Registrations Found\r\n          </h3>\r\n          <p className=\"text-gray-500 max-w-md\">\r\n            We couldn&apos;t find any participants matching your search. Adjust\r\n            your filters or wait for new registrations.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add User Modal */}\r\n      {isAddUserModalOpen && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\r\n          <div className=\"bg-neutral-900 border border-white/10 rounded-xl w-full max-w-md shadow-2xl p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h3 className=\"text-xl font-bold text-white font-unbounded\">\r\n                Add User to Event\r\n              </h3>\r\n              <button\r\n                onClick={() => setIsAddUserModalOpen(false)}\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            <form onSubmit={handleAddUser} className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-bold text-gray-400\">\r\n                  User Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  placeholder=\"Enter user email...\"\r\n                  value={newUserEmail}\r\n                  onChange={(e) => setNewUserEmail(e.target.value)}\r\n                  className=\"w-full bg-black/50 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-[#BA170D] focus:outline-none transition-colors\"\r\n                  autoFocus\r\n                  required\r\n                />\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Note: The user must already be logged in to the system.\r\n                </p>\r\n              </div>\r\n              <div className=\"pt-2 flex gap-3 justify-end\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setIsAddUserModalOpen(false)}\r\n                  className=\"px-4 py-2 rounded-lg text-sm font-bold text-gray-400 hover:text-white hover:bg-white/10 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={addingUser || !newUserEmail.trim()}\r\n                  className=\"px-6 py-2 rounded-lg text-sm font-bold text-white bg-[#BA170D] hover:bg-[#a0140b] shadow-lg shadow-red-900/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                >\r\n                  {addingUser ? \"Adding...\" : \"Add User\"}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Export Options Modal */}\r\n      <ExportOptionsModal\r\n        isOpen={isExportModalOpen}\r\n        onClose={() => setIsExportModalOpen(false)}\r\n        onExport={handleExportConfirm}\r\n        allFields={allExportFields}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\events\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\admin\\users\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\live\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":8,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":13,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Image"},"fix":{"range":[260,293],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { collection, onSnapshot, query } from \"firebase/firestore\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { categories } from \"@/data/constant\";\r\nimport Image from \"next/image\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface LiveStat {\r\n  title: string;\r\n  category: string;\r\n  count: number;\r\n  houseCounts: {\r\n    Red: number;\r\n    Blue: number;\r\n    Yellow: number;\r\n    Green: number;\r\n  };\r\n}\r\n\r\n// Initial structure helper\r\nconst getInitialStats = (): LiveStat[] => {\r\n  const stats: LiveStat[] = [];\r\n  categories.forEach((cat) => {\r\n    cat.items.forEach((item) => {\r\n      stats.push({\r\n        title: item.title,\r\n        category: cat.title,\r\n        count: 0,\r\n        houseCounts: { Red: 0, Blue: 0, Yellow: 0, Green: 0 },\r\n      });\r\n    });\r\n  });\r\n  return stats;\r\n};\r\n\r\nexport default function LiveStatsPage() {\r\n  const [stats, setStats] = useState<LiveStat[]>(getInitialStats());\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!db) return;\r\n\r\n    // Listen to ALL users for house data mapping (could be heavy, but accurate)\r\n    // Optimization: Listen to registrations and fetch user data on demand or keep a local cache\r\n    // BETTER: Since we can't do complex joins in Firestore easily in real-time without cloud functions aggregating,\r\n    // we will fetch all users once to build a UserID -> House map, then listed to registrations.\r\n    // OR simpler: Just show total registration count per event first if house data is too heavy.\r\n\r\n    // Let's try to do it right:\r\n    // 1. Fetch all users to map UID -> House (One-time fetch usually, or snapshot if users update houses often)\r\n    // 2. Listen to 'event_registrations' for real-time updates.\r\n\r\n    const usersMap: Record<string, string> = {};\r\n\r\n    const fetchUsers = async () => {\r\n      // We'll use a snapshot listener on users too to handle new signups\r\n      const qUsers = query(collection(db, \"users\"));\r\n      const unsubscribeUsers = onSnapshot(qUsers, (snap) => {\r\n        snap.forEach((doc) => {\r\n          const data = doc.data();\r\n          if (data.house) usersMap[doc.id] = data.house;\r\n        });\r\n\r\n        // After getting users, set up registration listener\r\n        setupRegListener();\r\n      });\r\n\r\n      return unsubscribeUsers;\r\n    };\r\n\r\n    let unsubscribeRegs: () => void;\r\n\r\n    const setupRegListener = () => {\r\n      const qRegs = query(collection(db, \"event_registrations\"));\r\n      unsubscribeRegs = onSnapshot(qRegs, (snap) => {\r\n        const newStats = getInitialStats();\r\n        const statMap = new Map<string, LiveStat>();\r\n        newStats.forEach((s) => statMap.set(s.title, s));\r\n\r\n        snap.forEach((doc) => {\r\n          const data = doc.data();\r\n          const title = data.eventTitle;\r\n          if (statMap.has(title)) {\r\n            const stat = statMap.get(title)!;\r\n            stat.count++;\r\n\r\n            // Count House\r\n            let house = \"Unknown\";\r\n            if (data.type === \"individual\" && data.userId) {\r\n              house = usersMap[data.userId] || \"Unknown\";\r\n            } else if (data.type === \"team\" && data.leaderId) {\r\n              house = usersMap[data.leaderId] || \"Unknown\";\r\n            }\r\n\r\n            if (\r\n              house === \"Red\" ||\r\n              house === \"Blue\" ||\r\n              house === \"Yellow\" ||\r\n              house === \"Green\"\r\n            ) {\r\n              stat.houseCounts[house as keyof typeof stat.houseCounts]++;\r\n            }\r\n          }\r\n        });\r\n\r\n        // Filter out empty events to clean up view? Or show all?\r\n        // Let's show all but sort by popularity\r\n        newStats.sort((a, b) => b.count - a.count);\r\n        setStats(newStats);\r\n        setLoading(false);\r\n      });\r\n    };\r\n\r\n    const cleanup = fetchUsers();\r\n\r\n    return () => {\r\n      cleanup.then((unsub) => unsub());\r\n      if (unsubscribeRegs) unsubscribeRegs();\r\n    };\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#0A0A0A] flex items-center justify-center text-white font-unbounded\">\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <div className=\"w-12 h-12 border-4 border-[#BA170D] border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"animate-pulse tracking-widest text-sm\">\r\n            FETCHING LIVE DATA...\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Calculate Totals\r\n  const totalRegs = stats.reduce((acc, curr) => acc + curr.count, 0);\r\n  const totalHouses = {\r\n    Red: stats.reduce((acc, curr) => acc + curr.houseCounts.Red, 0),\r\n    Blue: stats.reduce((acc, curr) => acc + curr.houseCounts.Blue, 0),\r\n    Yellow: stats.reduce((acc, curr) => acc + curr.houseCounts.Yellow, 0),\r\n    Green: stats.reduce((acc, curr) => acc + curr.houseCounts.Green, 0),\r\n  };\r\n\r\n  const getHouseColor = (house: string) => {\r\n    switch (house) {\r\n      case \"Red\":\r\n        return \"bg-red-600 shadow-[0_0_20px_rgba(220,38,38,0.4)]\";\r\n      case \"Blue\":\r\n        return \"bg-blue-600 shadow-[0_0_20px_rgba(37,99,235,0.4)]\";\r\n      case \"Yellow\":\r\n        return \"bg-yellow-500 shadow-[0_0_20px_rgba(234,179,8,0.4)]\";\r\n      case \"Green\":\r\n        return \"bg-green-600 shadow-[0_0_20px_rgba(22,163,74,0.4)]\";\r\n      default:\r\n        return \"bg-gray-600\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-[#0A0A0A] text-white font-outfit relative overflow-y-auto selection:bg-[#BA170D] selection:text-white pb-20\">\r\n      <Navbar />\r\n\r\n      {/* Background Elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n        <div className=\"absolute top-[-20%] left-[-10%] w-[80vw] h-[80vw] bg-blue-900/10 blur-[100px] rounded-full\"></div>\r\n        <div className=\"absolute bottom-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[#BA170D]/10 blur-[100px] rounded-full\"></div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto mt-32 px-4 relative z-10\">\r\n        <div className=\"text-center mb-16\">\r\n          <h1 className=\"text-4xl md:text-6xl font-black font-unbounded text-white mb-4 tracking-tighter uppercase\">\r\n            Live <span className=\"text-[#BA170D]\">Stats</span>\r\n          </h1>\r\n          <p className=\"text-gray-400 text-lg\">\r\n            Real-time registration updates\r\n          </p>\r\n        </div>\r\n\r\n        {/* House Leaderboard */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-20\">\r\n          {(Object.keys(totalHouses) as Array<keyof typeof totalHouses>).map(\r\n            (house) => (\r\n              <motion.div\r\n                key={house}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className={`p-6 rounded-2xl border border-white/10 relative overflow-hidden group`}\r\n              >\r\n                <div\r\n                  className={`absolute top-0 left-0 w-full h-1 ${getHouseColor(house)}`}\r\n                ></div>\r\n                <h3 className=\"text-gray-400 text-xs font-bold uppercase tracking-[0.2em] mb-2\">\r\n                  {house} House\r\n                </h3>\r\n                <p className={`text-4xl font-black font-unbounded`}>\r\n                  {totalHouses[house]}\r\n                </p>\r\n                <p className=\"text-xs text-white/30 font-medium mt-1\">\r\n                  Registrations\r\n                </p>\r\n              </motion.div>\r\n            ),\r\n          )}\r\n        </div>\r\n\r\n        {/* Total Counter */}\r\n        <div className=\"flex justify-center mb-16\">\r\n          <div className=\"flex flex-col items-center bg-white/5 border border-white/10 px-10 py-6 rounded-2xl backdrop-blur-md\">\r\n            <span className=\"text-[#BA170D] text-xs font-black uppercase tracking-[0.3em] mb-2\">\r\n              Total Registrations\r\n            </span>\r\n            <span className=\"text-5xl md:text-7xl font-black font-unbounded tracking-tighter text-white\">\r\n              {totalRegs}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Event List */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {stats.map((stat, i) => (\r\n            <motion.div\r\n              key={stat.title}\r\n              initial={{ opacity: 0, scale: 0.95 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              transition={{ delay: i * 0.05 }}\r\n              className=\"bg-white/5 border border-white/10 p-6 rounded-2xl hover:border-white/20 transition-all group\"\r\n            >\r\n              <div className=\"flex justify-between items-start mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-bold font-unbounded text-lg leading-tight mb-1 group-hover:text-[#BA170D] transition-colors\">\r\n                    {stat.title}\r\n                  </h3>\r\n                  <span className=\"text-[10px] font-black uppercase tracking-[0.2em] text-gray-500\">\r\n                    {stat.category}\r\n                  </span>\r\n                </div>\r\n                <div className=\"bg-white/10 px-3 py-1 rounded-lg text-sm font-black font-mono\">\r\n                  {stat.count}\r\n                </div>\r\n              </div>\r\n\r\n              {/* House Distribution Bar */}\r\n              <div className=\"flex h-2 rounded-full overflow-hidden w-full bg-white/5\">\r\n                {stat.count > 0 ? (\r\n                  <>\r\n                    <div\r\n                      style={{\r\n                        width: `${(stat.houseCounts.Red / stat.count) * 100}%`,\r\n                      }}\r\n                      className=\"bg-red-600\"\r\n                      title={`Red: ${stat.houseCounts.Red}`}\r\n                    />\r\n                    <div\r\n                      style={{\r\n                        width: `${(stat.houseCounts.Blue / stat.count) * 100}%`,\r\n                      }}\r\n                      className=\"bg-blue-600\"\r\n                      title={`Blue: ${stat.houseCounts.Blue}`}\r\n                    />\r\n                    <div\r\n                      style={{\r\n                        width: `${(stat.houseCounts.Yellow / stat.count) * 100}%`,\r\n                      }}\r\n                      className=\"bg-yellow-500\"\r\n                      title={`Yellow: ${stat.houseCounts.Yellow}`}\r\n                    />\r\n                    <div\r\n                      style={{\r\n                        width: `${(stat.houseCounts.Green / stat.count) * 100}%`,\r\n                      }}\r\n                      className=\"bg-green-600\"\r\n                      title={`Green: ${stat.houseCounts.Green}`}\r\n                    />\r\n                  </>\r\n                ) : (\r\n                  <div className=\"w-full bg-white/5\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex justify-between mt-2 text-[9px] font-bold text-gray-500 uppercase tracking-wider\">\r\n                <span className=\"text-red-500\">R: {stat.houseCounts.Red}</span>\r\n                <span className=\"text-blue-500\">\r\n                  B: {stat.houseCounts.Blue}\r\n                </span>\r\n                <span className=\"text-yellow-500\">\r\n                  Y: {stat.houseCounts.Yellow}\r\n                </span>\r\n                <span className=\"text-green-500\">\r\n                  G: {stat.houseCounts.Green}\r\n                </span>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\login\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has an unnecessary dependency: 'auth'. Either exclude it or remove the dependency array. Outer scope values like 'auth' aren't valid dependencies because mutating them doesn't re-render the component.","line":43,"column":6,"nodeType":"ArrayExpression","endLine":43,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [callbackUrl, router]","fix":{"range":[2010,2037],"text":"[callbackUrl, router]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2625,2628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2625,2628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3419,3422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3419,3422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, Suspense } from \"react\";\r\nimport { auth, googleProvider, db } from \"@/lib/firebase\";\r\nimport { signInWithPopup, onAuthStateChanged } from \"firebase/auth\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\r\nimport { motion } from \"framer-motion\";\r\nimport Image from \"next/image\";\r\n\r\nconst GoogleIcon = () => (\r\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" fill=\"#4285F4\"/>\r\n        <path d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" fill=\"#34A853\"/>\r\n        <path d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z\" fill=\"#FBBC05\"/>\r\n        <path d=\"M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" fill=\"#EA4335\"/>\r\n    </svg>\r\n);\r\n\r\nfunction LoginContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [loading, setLoading] = useState(false);\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const callbackUrl = searchParams.get(\"callbackUrl\") || \"/profile\";\r\n\r\n  useEffect(() => {\r\n    if (!auth) return;\r\n\r\n    // Standard Auth Listener is the most reliable way to handle state\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      console.log(\"Auth State:\", user ? \"AUTHENTICATED\" : \"GUEST\");\r\n      if (user) {\r\n        // Use router.push for a smoother internal transition\r\n        router.push(callbackUrl);\r\n      } else {\r\n        setAuthLoading(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [auth, callbackUrl, router]);\r\n\r\n  const handleLogin = async () => {\r\n    if (!auth || !googleProvider) return;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      console.log(\"Initiating Google Popup...\");\r\n      const result = await signInWithPopup(auth, googleProvider);\r\n      const user = result.user;\r\n\r\n      if (user) {\r\n          // Check if user exists to prevent overwriting manual changes\r\n          const userRef = doc(db, \"users\", user.uid);\r\n          const userSnap = await getDoc(userRef);\r\n          const userData = userSnap.exists() ? userSnap.data() : {};\r\n\r\n          const updates: any = {\r\n              uid: user.uid,\r\n              email: user.email || \"\",\r\n              lastLogin: new Date().toISOString(),\r\n              updatedAt: new Date().toISOString()\r\n          };\r\n\r\n          // Only set fields if they are missing in Firestore or if user is new\r\n          if (!userData.name && user.displayName) {\r\n              updates.name = user.displayName;\r\n          }\r\n          if (!userData.photoURL && user.photoURL) {\r\n              updates.photoURL = user.photoURL;\r\n          }\r\n          if (!userData.mobile && user.phoneNumber) {\r\n              updates.mobile = user.phoneNumber;\r\n          }\r\n\r\n          await setDoc(userRef, updates, { merge: true });\r\n      }\r\n\r\n      // onAuthStateChanged will catch the user and redirect automatically\r\n    } catch (err: any) {\r\n      console.error(\"Popup Login Error:\", err);\r\n      // Gracefully handle \"popup closed\" by the user\r\n      if (err.code !== 'auth/popup-closed-by-user') {\r\n        setError(err.message || \"Failed to sign in. Please try again.\");\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#0A0A0A] flex items-center justify-center text-white\">\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n            <div className=\"animate-spin w-8 h-8 border-2 border-[#BA170D] border-t-transparent rounded-full\"></div>\r\n            <p className=\"text-white/40 font-black font-unbounded text-[10px] tracking-widest uppercase animate-pulse\">Checking Session</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0A0A0A] text-white font-outfit relative overflow-hidden flex items-center justify-center p-4\">\r\n      {/* Background Elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n        <div className=\"absolute top-[-20%] left-[-10%] w-[80vw] h-[80vw] bg-blue-900/10 blur-[120px] rounded-full opacity-40\"></div>\r\n        <div className=\"absolute bottom-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[#BA170D]/10 blur-[120px] rounded-full opacity-40\"></div>\r\n      </div>\r\n\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n        className=\"relative z-10 w-full max-w-md bg-white/5 backdrop-blur-3xl border border-white/10 p-10 md:p-14 rounded-[2.5rem] shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] text-center group\"\r\n      >\r\n        <motion.div\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ delay: 0.3 }}\r\n        >\r\n          <div className=\"mb-10 flex justify-center\">\r\n            <motion.div \r\n              whileHover={{ scale: 1.05 }}\r\n              className=\"relative w-32 h-32 flex items-center justify-center\"\r\n            >\r\n               <Image \r\n                src=\"/Logo.png\" \r\n                alt=\"Logo\" \r\n                width={128} \r\n                height={128} \r\n                priority\r\n                quality={50}\r\n                style={{ width: '100%', height: 'auto' }}\r\n                className=\"object-contain\" \r\n               />\r\n            </motion.div>\r\n          </div>\r\n          \r\n          <h1 className=\"text-3xl md:text-5xl font-black font-unbounded text-white mb-4 tracking-tighter uppercase leading-none\">\r\n            WELCOME<br/>BACK\r\n          </h1>\r\n          <p className=\"text-gray-400 mb-12 text-sm md:text-base tracking-wide font-medium font-outfit\">\r\n            Sign in to access your dashboard and manage event registrations.\r\n          </p>\r\n\r\n          {error && (\r\n            <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-500 text-xs font-bold uppercase tracking-wider\">\r\n                {error}\r\n            </div>\r\n          )}\r\n\r\n          <button\r\n            onClick={handleLogin}\r\n            disabled={loading}\r\n            className=\"w-full relative group overflow-hidden rounded-2xl bg-white text-black py-4.5 transition-all duration-500 hover:shadow-[0_0_40px_rgba(255,255,255,0.2)] active:scale-[0.98] disabled:opacity-70\"\r\n          >\r\n            <div className=\"absolute inset-0 bg-linear-to-r from-transparent via-black/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000\"></div>\r\n            <div className=\"relative flex items-center justify-center gap-3\">\r\n              {loading ? (\r\n                <div className=\"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\r\n              ) : (\r\n                <>\r\n                  <GoogleIcon />\r\n                  <span className=\"text-sm font-black font-unbounded uppercase tracking-tighter hidden md:inline-block\">\r\n                    Continue with Google\r\n                  </span>\r\n                </>\r\n              )}\r\n            </div>\r\n          </button>\r\n\r\n          <p className=\"mt-10 text-[10px] text-gray-500 uppercase tracking-widest font-bold opacity-60\">\r\n            Secure authentication via Google Firebase\r\n          </p>\r\n        </motion.div>\r\n      </motion.div>\r\n\r\n      {/* Decorative text */}\r\n      <div className=\"absolute bottom-10 left-10 pointer-events-none opacity-[0.03] select-none hidden md:block\">\r\n        <h2 className=\"text-[15rem] font-black font-unbounded leading-none\">JHALAK</h2>\r\n      </div>\r\n      <div className=\"absolute top-10 right-10 pointer-events-none opacity-[0.03] select-none hidden md:block\">\r\n        <h2 className=\"text-[15rem] font-black font-unbounded uppercase leading-none\">2026</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function LoginPage() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"min-h-screen bg-[#0A0A0A] flex items-center justify-center text-white\">\r\n        <div className=\"animate-spin w-8 h-8 border-2 border-[#BA170D] border-t-transparent rounded-full\"></div>\r\n      </div>\r\n    }>\r\n      <LoginContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\profile\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\profile\\page.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'counts' is never reassigned. Use 'const' instead.","line":42,"column":7,"nodeType":"Identifier","messageId":"useConst","endLine":42,"endColumn":13,"fix":{"range":[1033,1094],"text":"const counts = { offStage: 0, onStageInd: 0, onStageGroup: 0 };"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":318,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":318,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9014,9017],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9014,9017],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":740,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":740,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28827,28830],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28827,28830],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":741,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":741,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28882,28885],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28882,28885],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":742,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":742,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28932,28935],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28932,28935],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":775,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":775,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30352,30355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30352,30355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":846,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":846,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34543,34546],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34543,34546],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { auth, db } from \"@/lib/firebase\";\r\nimport {\r\n  onAuthStateChanged,\r\n  updateProfile,\r\n  User,\r\n  signOut,\r\n} from \"firebase/auth\";\r\nimport {\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport ProfileSkeleton from \"@/components/ProfileSkeleton\";\r\nimport {\r\n  fetchUserRegistrations,\r\n  UserRegistrations,\r\n} from \"@/lib/registrationService\";\r\nimport {\r\n  TeamRegistration,\r\n  categories,\r\n  DEPARTMENTS,\r\n  SEMESTERS,\r\n  CSE_SEMESTERS,\r\n  isProfileComplete,\r\n} from \"@/data/constant\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { ArrowLeft, LogOut } from \"lucide-react\";\r\nimport Toast, { ToastType } from \"@/components/ui/Toast\";\r\n\r\n// Helper to calculate usage (same as in RegisterPage)\r\nconst getCounts = (soloEvents: string[], teamEvents: TeamRegistration[]) => {\r\n  let counts = { offStage: 0, onStageInd: 0, onStageGroup: 0 };\r\n  const allItems = categories.flatMap((c) => c.items);\r\n\r\n  // Deduplicate titles to ensure we only count each event once for the user\r\n  const uniqueTitles = new Set([\r\n    ...soloEvents,\r\n    ...teamEvents.map((t) => t.eventTitle),\r\n  ]);\r\n\r\n  // Helper to process a single title\r\n  const process = (title: string) => {\r\n    const ev = allItems.find((i) => i.title === title);\r\n    if (!ev) return;\r\n\r\n    if (ev.categoryType === \"off_stage\") {\r\n      counts.offStage++;\r\n    } else if (\r\n      ev.categoryType === \"on_stage\" ||\r\n      ev.categoryType === \"flagship\"\r\n    ) {\r\n      if (ev.eventType === \"individual\") {\r\n        counts.onStageInd++;\r\n      } else {\r\n        counts.onStageGroup++;\r\n      }\r\n    }\r\n  };\r\n\r\n  uniqueTitles.forEach(process);\r\n  return counts;\r\n};\r\n\r\n// Helper for event tags and colors\r\nconst getEventTheme = (title: string) => {\r\n  const allItems = categories.flatMap((c) => c.items);\r\n  const ev = allItems.find((i) => i.title === title);\r\n  if (!ev)\r\n    return {\r\n      label: \"UNKNOWN\",\r\n      type: \"SOLO\",\r\n      color: \"text-gray-400\",\r\n      bg: \"bg-gray-400/10\",\r\n      border: \"border-gray-400/20\",\r\n    };\r\n\r\n  const typeLabel = ev.eventType === \"group\" ? \"TEAM\" : \"SOLO\";\r\n\r\n  if (ev.categoryType === \"off_stage\") {\r\n    return {\r\n      label: \"OFF-STAGE\",\r\n      type: typeLabel,\r\n      color: \"text-[#BA170D]\",\r\n      bg: \"bg-[#BA170D]/10\",\r\n      border: \"border-[#BA170D]/20\",\r\n    };\r\n  }\r\n  if (ev.eventType === \"individual\") {\r\n    return {\r\n      label: \"ON-STAGE (IND)\",\r\n      type: \"SOLO\",\r\n      color: \"text-blue-400\",\r\n      bg: \"bg-blue-400/10\",\r\n      border: \"border-blue-400/20\",\r\n    };\r\n  }\r\n  return {\r\n    label: \"GROUP\",\r\n    type: \"TEAM\",\r\n    color: \"text-purple-400\",\r\n    bg: \"bg-purple-400/10\",\r\n    border: \"border-purple-400/20\",\r\n    };\r\n};\r\n\r\nconst HOUSES = [\"Red\", \"Blue\", \"Yellow\", \"Green\"];\r\n\r\nexport default function ProfilePage() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [isComplete, setIsComplete] = useState(false);\r\n\r\n  const [registrations, setRegistrations] = useState<UserRegistrations>({\r\n    soloEvents: [],\r\n    teamEvents: [],\r\n    totalCount: 0,\r\n  });\r\n\r\n  // User's single chest number\r\n  const [userChestNo, setUserChestNo] = useState<string>(\"\");\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    department: \"\",\r\n    semester: \"\",\r\n    house: \"\",\r\n    mobile: \"+91\",\r\n    collegeId: \"\",\r\n    chestNo: \"\",\r\n  });\r\n\r\n  // Toast State\r\n  const [toast, setToast] = useState<{\r\n    message: string;\r\n    type: ToastType;\r\n    isVisible: boolean;\r\n  }>({\r\n    message: \"\",\r\n    type: \"info\",\r\n    isVisible: false,\r\n  });\r\n\r\n  const showToast = (message: string, type: ToastType = \"info\") => {\r\n    setToast({ message, type, isVisible: true });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!auth || !db) return;\r\n\r\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n      if (!currentUser) {\r\n        router.push(\"/login?callbackUrl=/profile\"); // Redirect to login if not logged in\r\n        return;\r\n      }\r\n\r\n      setUser(currentUser);\r\n\r\n      try {\r\n        if (db) {\r\n          // Parallel Fetch: Profile & Registrations\r\n          const userDocRef = doc(db, \"users\", currentUser.uid);\r\n\r\n          const [userDoc, regData] = await Promise.all([\r\n            getDoc(userDocRef),\r\n            fetchUserRegistrations(currentUser.uid),\r\n          ]);\r\n\r\n          setRegistrations(regData);\r\n\r\n          if (userDoc.exists()) {\r\n            const userData = userDoc.data();\r\n            setFormData({\r\n              name: userData.name || currentUser.displayName || \"\",\r\n              department: userData.department || \"\",\r\n              semester: userData.semester || \"\",\r\n              house: userData.house || \"\",\r\n              mobile: userData.mobile || \"+91\",\r\n              collegeId: userData.collegeId || \"\",\r\n              chestNo: userData.chestNo || \"\",\r\n            });\r\n            setUserChestNo(userData.chestNo || \"\");\r\n            setIsComplete(isProfileComplete(userData));\r\n          } else {\r\n            setFormData((prev) => ({\r\n              ...prev,\r\n              name: currentUser.displayName || \"\",\r\n            }));\r\n          }\r\n\r\n          setRegistrations(regData);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!auth || !db || !user) return;\r\n\r\n    // 1. Validate Name\r\n    if (!formData.name.trim()) {\r\n      showToast(\"Please enter your full name.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    // 2. Validate Mobile\r\n    // Assuming format is \"+91 XXXXXXXXXX\" (length 14) or just 10 digits if user edited it extensively\r\n    // Simple check: Must have at least 10 digits\r\n    const mobileDigits = formData.mobile.replace(/\\D/g, \"\");\r\n    if (mobileDigits.length < 12) { // 91 + 10 digits\r\n      showToast(\"Please enter a valid 10-digit mobile number.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    // 3. Validate Dropdowns\r\n    if (!formData.department) {\r\n      showToast(\"Please select your department.\", \"error\");\r\n      return;\r\n    }\r\n    if (!formData.semester) {\r\n      showToast(\"Please select your semester.\", \"error\");\r\n      return;\r\n    }\r\n    if (!formData.house) {\r\n      showToast(\"Please select your house.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    // 4. Validate College ID Granularly\r\n    if (!formData.collegeId) {\r\n      showToast(\"Please enter your College ID.\", \"error\");\r\n      return;\r\n    }\r\n\r\n    const parts = formData.collegeId.split('/');\r\n    if (parts.length !== 4) {\r\n      showToast(\"Incomplete College ID. Expected format: PREFIX/YY/DEPT/ROLL (e.g., LCMA/22/CIVIL/033)\", \"error\");\r\n      return;\r\n    }\r\n\r\n    const [prefix, year, dept, roll] = parts;\r\n\r\n    if (!/^[A-Z]{3,4}$/.test(prefix)) {\r\n      showToast(\"Invalid College ID Prefix. Must be 3 or 4 uppercase letters (e.g., CMA, LCMA).\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!/^\\d{2}$/.test(year)) {\r\n      showToast(\"Invalid Year in College ID. Must be 2 digits (e.g., 22).\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!/^[A-Z]{2,6}$/.test(dept)) {\r\n      showToast(\"Invalid Department Code in College ID. Must be 2-6 uppercase letters (e.g., CS, CIVIL).\", \"error\");\r\n      return;\r\n    }\r\n\r\n    if (!/^\\d{3}$/.test(roll)) {\r\n      showToast(\"Invalid Roll Number in College ID. Must be 3 digits (e.g., 033).\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n    try {\r\n      // Check if College ID is unique (only if it's being changed)\r\n      if (db) {\r\n        const userDocRef = doc(db, \"users\", user.uid);\r\n        const currentUserDoc = await getDoc(userDocRef);\r\n        const currentCollegeId = currentUserDoc.exists()\r\n          ? currentUserDoc.data().collegeId\r\n          : null;\r\n\r\n        // Only check for duplicates if the College ID is being changed\r\n        if (formData.collegeId !== currentCollegeId) {\r\n          const usersRef = collection(db, \"users\");\r\n          const q = query(\r\n            usersRef,\r\n            where(\"collegeId\", \"==\", formData.collegeId),\r\n          );\r\n          const querySnapshot = await getDocs(q);\r\n\r\n          if (!querySnapshot.empty) {\r\n            showToast(\r\n              \"This College ID is already registered by another user.\",\r\n              \"error\",\r\n            );\r\n            setSaving(false);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      // 1. Update Auth Profile (Display Name)\r\n      if (user.displayName !== formData.name) {\r\n        await updateProfile(user, { displayName: formData.name });\r\n      }\r\n\r\n      // 2. Save to Firestore\r\n      const updateData: any = {\r\n        name: formData.name,\r\n        email: user.email,\r\n        department: formData.department,\r\n        semester: formData.semester,\r\n        house: formData.house,\r\n        mobile: formData.mobile,\r\n        collegeId: formData.collegeId,\r\n        photoURL: user.photoURL,\r\n        updatedAt: new Date().toISOString(),\r\n      };\r\n\r\n      await setDoc(doc(db, \"users\", user.uid), updateData, { merge: true }); // Merge to avoid overwriting other fields if any\r\n\r\n      console.log(\"Profile updated successfully\");\r\n      showToast(\"Profile Updated Successfully!\", \"success\");\r\n\r\n      // Redirect to Jhalak events section after 1.5 seconds\r\n      setTimeout(() => {\r\n        router.push(\"/#jhalak-events\");\r\n      }, 1500);\r\n    } catch (error) {\r\n      console.error(\"Error updating profile:\", error);\r\n      showToast(\"Failed to update profile. Please try again.\", \"error\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleCollegeIdChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const val = e.target.value.toUpperCase();\r\n    const cleaned = val.replace(/[^A-Z0-9]/g, \"\");\r\n    let formatted = \"\";\r\n\r\n    // Determine prefix length (3 or 4) based on 4th character\r\n    // If 4th char is a letter, assume 4-letter prefix (ABCD/...)\r\n    // If 4th char is a digit, assume 3-letter prefix (ABC/...)\r\n    let prefixLength = 3;\r\n    if (cleaned.length >= 4) {\r\n      if (/[A-Z]/.test(cleaned[3])) {\r\n        prefixLength = 4;\r\n      }\r\n    }\r\n\r\n    if (cleaned.length > 0) formatted += cleaned.substring(0, prefixLength);\r\n    \r\n    if (cleaned.length > prefixLength) {\r\n       formatted += \"/\" + cleaned.substring(prefixLength, prefixLength + 2);\r\n    }\r\n\r\n    if (cleaned.length > prefixLength + 2) {\r\n      const remaining = cleaned.substring(prefixLength + 2);\r\n      // Try to intelligently split Department and Roll No if possible\r\n      // Dept is usually 2 or 3 letters\r\n      const match = remaining.match(/^([A-Z]*)(.*)$/);\r\n      if (match) {\r\n        if (match[1]) formatted += \"/\" + match[1];\r\n        if (match[2]) formatted += \"/\" + match[2];\r\n      }\r\n    }\r\n\r\n    // Allow user to manually enter '/' without it being deleted immediately\r\n    // This preserves the slash if the user typed it, even if the auto-format wouldn't have added it yet\r\n    if (val.endsWith(\"/\") && !formatted.endsWith(\"/\")) {\r\n      formatted += \"/\";\r\n    }\r\n\r\n    setFormData({ ...formData, collegeId: formatted });\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (!auth) return;\r\n    try {\r\n      await signOut(auth);\r\n      showToast(\"Logged out successfully\", \"success\");\r\n      router.push(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Error signing out:\", error);\r\n      showToast(\"Failed to logout\", \"error\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <ProfileSkeleton />;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0A0A0A] text-white font-outfit relative overflow-y-auto selection:bg-[#BA170D] selection:text-white\">\r\n      <Navbar />\r\n\r\n      {/* Background Elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n        <div className=\"absolute top-[-20%] left-[-10%] w-[80vw] h-[80vw] bg-blue-900/10 blur-[100px] rounded-full\"></div>\r\n        <div className=\"absolute bottom-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[#BA170D]/10 blur-[100px] rounded-full\"></div>\r\n      </div>\r\n\r\n      <div className=\"relative z-10 container mx-auto px-4 py-24\">\r\n        <div className=\"max-w-7xl mx-auto flex flex-col gap-8\">\r\n          {/* Back Button - Conditional */}\r\n          {isComplete && (\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"flex items-center gap-2 text-gray-400 hover:text-[#BA170D] transition-colors self-start group\"\r\n            >\r\n              <div className=\"p-2 rounded-full bg-white/5 group-hover:bg-[#BA170D]/10 border border-white/10 group-hover:border-[#BA170D]/50 transition-all\">\r\n                <ArrowLeft size={20} />\r\n              </div>\r\n              <span className=\"font-medium\">Back</span>\r\n            </button>\r\n          )}\r\n\r\n          <div className=\"flex flex-col md:flex-row gap-8 items-start w-full\">\r\n            {/* Profile Form Section */}\r\n            <motion.div\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              className=\"bg-black/40 backdrop-blur-xl border border-white/10 p-8 md:p-10 rounded-2xl w-full max-w-xl lg:max-w-xl shadow-2xl flex-1 relative\"\r\n            >\r\n              {/* Logout Button - Absolute Top Right */}\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"absolute top-6 right-6 px-4 py-2 rounded-lg bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/50 transition-all group/logout flex items-center gap-2\"\r\n                title=\"Logout\"\r\n              >\r\n                <LogOut\r\n                  size={16}\r\n                  className=\"group-hover/logout:scale-110 transition-transform\"\r\n                />\r\n                <span className=\"text-xs md:text-sm font-black uppercase tracking-[0.2em]\">\r\n                  Logout\r\n                </span>\r\n              </button>\r\n\r\n              <div className=\"flex flex-col items-center mb-10\">\r\n                <div className=\"relative w-24 h-24 mb-4 rounded-full overflow-hidden border-2 border-[#BA170D]\">\r\n                  {user?.photoURL ? (\r\n                    <Image\r\n                      src={user.photoURL}\r\n                      alt=\"Profile\"\r\n                      fill\r\n                      className=\"object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full bg-[#BA170D]\" />\r\n                  )}\r\n                </div>\r\n                <h1 className=\"text-3xl md:text-5xl font-black font-unbounded text-white text-center tracking-tighter mb-2 uppercase\">\r\n                  YOUR PROFILE\r\n                </h1>\r\n                {userChestNo && (\r\n                  <div className=\"mb-4 px-6 py-2 bg-[#BA170D]/10 border border-[#BA170D]/30 rounded-full\">\r\n                    <p className=\"text-[10px] font-black font-unbounded text-white/40 uppercase tracking-[0.2em] mb-0.5 text-center\">\r\n                      Chest Number\r\n                    </p>\r\n                    <p className=\"text-3xl md:text-4xl font-black font-unbounded text-[#BA170D] tracking-tighter text-center\">\r\n                      #{userChestNo}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                <p className=\"text-gray-400 mt-1 text-center text-sm md:text-base tracking-wide\">\r\n                  Update your details for event registration.\r\n                </p>\r\n              </div>\r\n\r\n              <form onSubmit={handleSubmit} className=\"flex flex-col gap-8\">\r\n                {/* Name */}\r\n                <div>\r\n                  <label className=\"block text-[10px] font-black text-[#BA170D]/60 uppercase tracking-[0.3em] mb-3 ml-1\">\r\n                    Full Name <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.name}\r\n                    onChange={(e) =>\r\n                      setFormData({ ...formData, name: e.target.value })\r\n                    }\r\n                    className=\"w-full bg-white/5 border border-white/10 rounded-xl p-3.5 text-white text-base focus:border-[#BA170D] focus:ring-1 focus:ring-[#BA170D] focus:outline-hidden transition-all placeholder:text-white/20 font-medium\"\r\n                    placeholder=\"Enter your full name\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* College ID */}\r\n                <div>\r\n                  <label className=\"block text-[10px] font-black text-[#BA170D]/60 uppercase tracking-[0.3em] mb-3 ml-1\">\r\n                    College ID <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.collegeId}\r\n                    onChange={handleCollegeIdChange}\r\n                    maxLength={16}\r\n                    className=\"w-full bg-white/5 border border-white/10 rounded-xl p-3.5 text-white text-base focus:border-[#BA170D] focus:ring-1 focus:ring-[#BA170D] focus:outline-hidden transition-all placeholder:text-white/20 font-medium uppercase\"\r\n                    placeholder=\"CMA/22/CS/XXX\"\r\n                    required\r\n                  />\r\n                  <p className=\"text-xs text-gray-500 mt-1 ml-1\">\r\n                    Format: ABC/YY/DEPT/XXX or ABCD/YY/DEPT/XXX\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Mobile Number */}\r\n                <div>\r\n                  <label className=\"block text-[10px] font-black text-[#BA170D]/60 uppercase tracking-[0.3em] mb-3 ml-1\">\r\n                    Mobile Number <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={formData.mobile}\r\n                    onChange={(e) =>\r\n                      setFormData({ ...formData, mobile: e.target.value })\r\n                    }\r\n                    className=\"w-full bg-white/5 border border-white/10 rounded-xl p-3.5 text-white text-base focus:border-[#BA170D] focus:ring-1 focus:ring-[#BA170D] focus:outline-hidden transition-all placeholder:text-white/20 font-medium\"\r\n                    placeholder=\"+91 XXXXX XXXXX\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Department */}\r\n                <div>\r\n                  <label className=\"block text-[10px] font-black text-[#BA170D]/60 uppercase tracking-[0.3em] mb-3 ml-1\">\r\n                    Department <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    {DEPARTMENTS.map((dept) => (\r\n                      <button\r\n                        key={dept}\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setFormData({\r\n                            ...formData,\r\n                            department: dept,\r\n                            semester: \"\", // Reset semester when department changes\r\n                          });\r\n                        }}\r\n                        className={`p-3 rounded-xl border text-xs md:text-sm font-black tracking-widest transition-all duration-300 ${\r\n                          formData.department === dept\r\n                            ? \"bg-[#BA170D] text-white border-[#BA170D] shadow-[0_0_20px_rgba(186,23,13,0.3)] scale-[1.02]\"\r\n                            : \"bg-white/5 text-gray-400 border-white/10 hover:border-white/30 hover:bg-white/10\"\r\n                        }`}\r\n                      >\r\n                        {dept}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                  {!formData.department && (\r\n                    <p className=\"text-red-500/50 text-[10px] mt-2 ml-1 font-bold tracking-wider\">\r\n                      Required\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Semester */}\r\n                {formData.department && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, height: 0 }}\r\n                    animate={{ opacity: 1, height: \"auto\" }}\r\n                    className=\"overflow-hidden\"\r\n                  >\r\n                    <label className=\"block text-[10px] font-black text-[#BA170D]/60 uppercase tracking-[0.3em] mb-3 ml-1\">\r\n                      Semester <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                      {(formData.department === \"CSE\"\r\n                        ? CSE_SEMESTERS\r\n                        : SEMESTERS\r\n                      ).map((sem) => (\r\n                        <button\r\n                          key={sem}\r\n                          type=\"button\"\r\n                          onClick={() =>\r\n                            setFormData({ ...formData, semester: sem })\r\n                          }\r\n                          className={`p-3 rounded-xl border text-[10px] md:text-xs font-black tracking-widest transition-all duration-300 ${\r\n                            formData.semester === sem\r\n                              ? \"bg-[#BA170D] text-white border-[#BA170D] shadow-[0_0_20px_rgba(186,23,13,0.3)] scale-[1.02]\"\r\n                              : \"bg-white/5 text-gray-400 border-white/10 hover:border-white/30 hover:bg-white/10\"\r\n                          }`}\r\n                        >\r\n                          {sem}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                    {!formData.semester && (\r\n                      <p className=\"text-red-500/50 text-[10px] mt-2 ml-1 font-bold tracking-wider\">\r\n                        Required\r\n                      </p>\r\n                    )}\r\n                  </motion.div>\r\n                )}\r\n\r\n                {/* House */}\r\n                <div>\r\n                  <label className=\"block text-[10px] font-black text-[#BA170D]/60 uppercase tracking-[0.3em] mb-3 ml-1\">\r\n                    House <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                    {HOUSES.map((house) => {\r\n                      const isSelected = formData.house === house;\r\n                      let activeClass = \"\";\r\n\r\n                      if (house === \"Red\") {\r\n                        activeClass = isSelected\r\n                          ? \"bg-red-600 text-white border-red-500 shadow-[0_0_20px_rgba(220,38,38,0.4)]\"\r\n                          : \"hover:text-red-500 hover:border-red-500/50\";\r\n                      } else if (house === \"Blue\") {\r\n                        activeClass = isSelected\r\n                          ? \"bg-blue-600 text-white border-blue-500 shadow-[0_0_20px_rgba(37,99,235,0.4)]\"\r\n                          : \"hover:text-blue-500 hover:border-blue-500/50\";\r\n                      } else if (house === \"Yellow\") {\r\n                        activeClass = isSelected\r\n                          ? \"bg-yellow-500 text-black border-yellow-400 shadow-[0_0_20px_rgba(234,179,8,0.4)]\"\r\n                          : \"hover:text-yellow-400 hover:border-yellow-400/50\";\r\n                      } else if (house === \"Green\") {\r\n                        activeClass = isSelected\r\n                          ? \"bg-green-600 text-white border-green-500 shadow-[0_0_20px_rgba(22,163,74,0.4)]\"\r\n                          : \"hover:text-green-500 hover:border-green-500/50\";\r\n                      }\r\n\r\n                      return (\r\n                        <button\r\n                          key={house}\r\n                          type=\"button\"\r\n                          onClick={() =>\r\n                            setFormData({ ...formData, house: house })\r\n                          }\r\n                          className={`p-3 rounded-xl border text-xs md:text-sm font-black tracking-widest transition-all duration-300 ${\r\n                            isSelected\r\n                              ? `${activeClass} scale-[1.02]`\r\n                              : `bg-white/5 text-gray-400 ${activeClass} hover:bg-white/10 border-white/10`\r\n                          }`}\r\n                        >\r\n                          {house}\r\n                        </button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                  {!formData.house && (\r\n                    <p className=\"text-red-500/50 text-[10px] mt-2 ml-1 font-bold tracking-wider\">\r\n                      Required\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={saving}\r\n                  className=\"mt-6 bg-white text-black font-black font-unbounded text-base md:text-lg py-4 rounded-xl hover:bg-[#BA170D] hover:text-white hover:shadow-[0_0_30px_rgba(186,23,13,0.3)] transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-tighter\"\r\n                >\r\n                  {saving ? \"Saving...\" : \"Update Profile\"}\r\n                </button>\r\n              </form>\r\n            </motion.div>\r\n\r\n            {/* Registrations Section */}\r\n            <motion.div\r\n              initial={{ opacity: 0, x: 20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ delay: 0.2 }}\r\n              className=\"bg-black/40 backdrop-blur-xl border border-white/10 p-8 md:p-10 rounded-2xl w-full max-w-xl lg:max-w-xl shadow-2xl flex-1 flex flex-col h-full self-stretch\"\r\n            >\r\n              <div className=\"flex flex-col items-center mb-10\">\r\n                <h2 className=\"text-3xl md:text-5xl font-black font-unbounded text-white text-center tracking-tighter mb-2 uppercase\">\r\n                  YOUR EVENTS\r\n                </h2>\r\n                <p className=\"text-gray-400 mt-1 text-center text-sm md:text-base tracking-wide\">\r\n                  Your registered festival participations.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Event Partition Counters (Sync with Register Page) */}\r\n              {(() => {\r\n                const counts = getCounts(\r\n                  registrations.soloEvents,\r\n                  registrations.teamEvents,\r\n                );\r\n                return (\r\n                  <div className=\"flex flex-wrap items-center justify-center gap-4 mb-8\">\r\n                    {[\r\n                      {\r\n                        label: \"OFF-STAGE\",\r\n                        count: counts.offStage,\r\n                        max: 4,\r\n                        color: \"text-[#BA170D]\",\r\n                      },\r\n                      {\r\n                        label: \"ON-STAGE (IND)\",\r\n                        count: counts.onStageInd,\r\n                        max: 3,\r\n                        color: \"text-blue-400\",\r\n                      },\r\n                      {\r\n                        label: \"GROUP\",\r\n                        count: counts.onStageGroup,\r\n                        max: 2,\r\n                        color: \"text-purple-400\",\r\n                      },\r\n                    ].map((p, i) => (\r\n                      <div\r\n                        key={i}\r\n                        className=\"flex flex-col items-center px-4 py-3 bg-white/5 border border-white/10 rounded-xl min-w-[120px]\"\r\n                      >\r\n                        <span className=\"text-[10px] font-black text-white/30 mb-1 tracking-[0.3em] uppercase\">\r\n                          {p.label}\r\n                        </span>\r\n                        <span\r\n                          className={`text-xl font-black font-unbounded ${p.color} tracking-tighter`}\r\n                        >\r\n                          {p.count}\r\n                          <span className=\"text-white/20 text-xs ml-1 font-bold\">\r\n                            / {p.max}\r\n                          </span>\r\n                        </span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                );\r\n              })()}\r\n\r\n              <div className=\"flex-1 space-y-10 overflow-y-auto max-h-[1000px] pr-2 custom-scrollbar pb-10\">\r\n                {(() => {\r\n                  const allItems = categories.flatMap((c) => c.items);\r\n\r\n                  // Partition the events\r\n                  const offStageEvents: any[] = [];\r\n                  const onStageIndEvents: any[] = [];\r\n                  const groupEvents: any[] = [];\r\n\r\n                  // Process Solo\r\n                  registrations.soloEvents.forEach((title) => {\r\n                    const ev = allItems.find((i) => i.title === title);\r\n                    if (!ev) return;\r\n                    const item = { title, isTeam: false, id: `solo-${title}` };\r\n                    if (ev.categoryType === \"off_stage\")\r\n                      offStageEvents.push(item);\r\n                    else if (ev.eventType === \"individual\")\r\n                      onStageIndEvents.push(item);\r\n                    else groupEvents.push(item);\r\n                  });\r\n\r\n                  // Process Team\r\n                  registrations.teamEvents.forEach((team) => {\r\n                    const ev = allItems.find(\r\n                      (i) => i.title === team.eventTitle,\r\n                    );\r\n                    if (!ev) return;\r\n                    const item = {\r\n                      title: team.eventTitle,\r\n                      isTeam: true,\r\n                      team,\r\n                      id: team.id,\r\n                    };\r\n                    if (ev.categoryType === \"off_stage\")\r\n                      offStageEvents.push(item);\r\n                    else if (ev.eventType === \"individual\")\r\n                      onStageIndEvents.push(item);\r\n                    else groupEvents.push(item);\r\n                  });\r\n\r\n                  const renderEvent = (item: any) => {\r\n                    const theme = getEventTheme(item.title);\r\n                    return (\r\n                      <div\r\n                        key={item.id}\r\n                        className={`bg-white/5 border ${theme.border} p-4 rounded-xl group hover:border-[#BA170D]/30 transition-all`}\r\n                      >\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <div className=\"flex flex-col gap-1\">\r\n                            <span className=\"font-black font-unbounded text-white text-base group-hover:text-[#BA170D] transition-all tracking-tighter\">\r\n                              {item.title}\r\n                            </span>\r\n                            <span\r\n                              className={`text-[9px] font-black uppercase tracking-[0.3em] ${theme.color} opacity-80`}\r\n                            >\r\n                              {theme.label}\r\n                            </span>\r\n                          </div>\r\n                          <span\r\n                            className={`text-[9px] px-2.5 py-1 rounded-sm ${theme.bg} ${theme.color} font-black tracking-widest border ${theme.border} uppercase`}\r\n                          >\r\n                            {item.isTeam ? \"TEAM\" : \"SOLO\"}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {item.isTeam && (\r\n                          <div className=\"space-y-2 mt-3 pt-3 border-t border-white/5\">\r\n                            <div className=\"text-[10px] text-gray-400 font-medium flex items-center gap-2\">\r\n                              <span className=\"uppercase tracking-widest text-gray-500\">\r\n                                Role:\r\n                              </span>\r\n                              <span\r\n                                className={\r\n                                  item.team.leaderId === user?.uid\r\n                                    ? \"text-[#BA170D] font-black tracking-wide\"\r\n                                    : \"text-white font-bold tracking-wide\"\r\n                                }\r\n                              >\r\n                                {item.team.leaderId === user?.uid\r\n                                  ? \"LEADER\"\r\n                                  : \"MEMBER\"}\r\n                              </span>\r\n                            </div>\r\n                            {item.team.teamChestNo && (\r\n                              <div className=\"text-[10px] text-gray-400 font-medium flex items-center gap-2\">\r\n                                <span className=\"uppercase tracking-widest text-gray-500\">\r\n                                  Team Chest No:\r\n                                </span>\r\n                                <span className=\"text-[#BA170D] font-black tracking-wide\">\r\n                                  #{item.team.teamChestNo}\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n                            {item.team.teamName && (\r\n                              <div className=\"text-[10px] text-gray-500 flex items-center gap-2\">\r\n                                <span className=\"uppercase tracking-[0.2em] text-[10px] font-black text-gray-600\">\r\n                                  Team:\r\n                                </span>\r\n                                <span className=\"text-white/40 font-bold uppercase tracking-wider text-[10px]\">\r\n                                  {item.team.teamName}\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n\r\n                            {/* Team Members List */}\r\n                            {item.team.members && item.team.members.length > 0 && (\r\n                              <div className=\"mt-4 pt-3 border-t border-white/5\">\r\n                                <p className=\"text-[10px] font-black text-[#BA170D]/40 uppercase tracking-[0.3em] mb-3\">\r\n                                  Team Members\r\n                                </p>\r\n                                <div className=\"space-y-1.5\">\r\n                                  {item.team.members.map((m: any, idx: number) => (\r\n                                    <div key={idx} className=\"flex items-center gap-2 text-[11px]\">\r\n                                      <div className=\"w-4 h-4 rounded-full bg-white/5 flex items-center justify-center text-[8px] text-gray-400 border border-white/10 shrink-0\">\r\n                                        {m.role === \"leader\" ? \"L\" : idx + 1}\r\n                                      </div>\r\n                                      <span className=\"text-gray-300 font-medium\">\r\n                                        {m.uid === user?.uid ? \"You\" : m.name}\r\n                                      </span>\r\n                                      {m.role === \"leader\" && (\r\n                                        <span className=\"text-[8px] text-[#BA170D] font-black uppercase tracking-tighter\">\r\n                                          (Leader)\r\n                                        </span>\r\n                                      )}\r\n                                      <span className=\"text-[9px] text-gray-600 truncate opacity-60\">\r\n                                        {m.email}\r\n                                      </span>\r\n                                    </div>\r\n                                  ))}\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  };\r\n\r\n                  return (\r\n                    <>\r\n                      {/* Off-Stage Section */}\r\n                      <section>\r\n                        <h3 className=\"text-[#BA170D]/30 font-black uppercase tracking-[0.25em] text-[10px] mb-4 ml-1 flex items-center gap-2\">\r\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-[#BA170D]/50\" />\r\n                          Off-Stage Events\r\n                        </h3>\r\n                        {offStageEvents.length === 0 ? (\r\n                          <p className=\"text-gray-500 italic text-xs ml-1 font-medium\">\r\n                            No off-stage events registered.\r\n                          </p>\r\n                        ) : (\r\n                          <div className=\"grid gap-3\">\r\n                            {offStageEvents.map(renderEvent)}\r\n                          </div>\r\n                        )}\r\n                      </section>\r\n\r\n                      <div className=\"h-px bg-white/5 my-2\" />\r\n\r\n                      {/* On-Stage Individual Section */}\r\n                      <section>\r\n                        <h3 className=\"text-blue-400/30 font-black uppercase tracking-[0.25em] text-[10px] mb-4 ml-1 flex items-center gap-2\">\r\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-blue-400/50\" />\r\n                          On-Stage (Individual)\r\n                        </h3>\r\n                        {onStageIndEvents.length === 0 ? (\r\n                          <p className=\"text-gray-500 italic text-xs ml-1 font-medium\">\r\n                            No individual on-stage events registered.\r\n                          </p>\r\n                        ) : (\r\n                          <div className=\"grid gap-3\">\r\n                            {onStageIndEvents.map(renderEvent)}\r\n                          </div>\r\n                        )}\r\n                      </section>\r\n\r\n                      <div className=\"h-px bg-white/5 my-2\" />\r\n\r\n                      {/* Group Events Section */}\r\n                      <section>\r\n                        <h3 className=\"text-purple-400/30 font-black uppercase tracking-[0.25em] text-[10px] mb-4 ml-1 flex items-center gap-2\">\r\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-purple-400/50\" />\r\n                          Group Events\r\n                        </h3>\r\n                        {groupEvents.length === 0 ? (\r\n                          <p className=\"text-gray-500 italic text-xs ml-1 font-medium\">\r\n                            No group events registered.\r\n                          </p>\r\n                        ) : (\r\n                          <div className=\"grid gap-3\">\r\n                            {groupEvents.map(renderEvent)}\r\n                          </div>\r\n                        )}\r\n                      </section>\r\n                    </>\r\n                  );\r\n                })()}\r\n              </div>\r\n\r\n              <div className=\"mt-8 pt-6 border-t border-white/10\">\r\n                <button\r\n                  onClick={() => router.push(\"/register\")}\r\n                  className=\"w-full bg-[#BA170D]/5 border border-[#BA170D]/10 text-[#BA170D] hover:bg-[#BA170D] hover:text-white font-black py-4 rounded-xl transition-all uppercase tracking-widest text-xs shadow-lg hover:shadow-[#BA170D]/20\"\r\n                >\r\n                  Manage Registrations\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        </div>\r\n        {/* Toast Notification */}\r\n        <Toast\r\n          message={toast.message}\r\n          type={toast.type}\r\n          isVisible={toast.isVisible}\r\n          onClose={() => setToast((prev) => ({ ...prev, isVisible: false }))}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\register\\page.tsx","messages":[{"ruleId":"prefer-const","severity":2,"message":"'counts' is never reassigned. Use 'const' instead.","line":27,"column":7,"nodeType":"Identifier","messageId":"useConst","endLine":27,"endColumn":13,"fix":{"range":[1024,1085],"text":"const counts = { offStage: 0, onStageInd: 0, onStageGroup: 0 };"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1954,1957],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1954,1957],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actionLoading' is assigned a value but never used.","line":73,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5808,5811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5808,5811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":224,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":224,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6891,6894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6891,6894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":406,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":406,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14700,14703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14700,14703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { auth, db } from \"@/lib/firebase\";\r\nimport { onAuthStateChanged, User } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { categories, EventItem, TeamRegistration } from \"@/data/constant\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport { ArrowLeft, Save } from \"lucide-react\";\r\nimport toast from \"react-hot-toast\";\r\nimport ConfirmToast from \"@/components/ConfirmToast\";\r\nimport EventRegistrationCard from \"@/components/EventRegistrationCard\";\r\nimport EventCardSkeleton from \"@/components/EventCardSkeleton\";\r\nimport {\r\n  fetchUserRegistrations,\r\n  updateUserSoloRegistrations,\r\n  createTeam,\r\n  leaveTeam,\r\n  validateRegistrationRules,\r\n  fetchAllEventSettings,\r\n} from \"@/lib/registrationService\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\n// Helper to calculate usage\r\nconst getCounts = (soloEvents: string[], teamEvents: TeamRegistration[]) => {\r\n  let counts = { offStage: 0, onStageInd: 0, onStageGroup: 0 };\r\n  const allItems = categories.flatMap((c) => c.items);\r\n\r\n  // Helper to process a single title\r\n  const process = (title: string) => {\r\n    const ev = allItems.find((i) => i.title === title);\r\n    if (!ev) return;\r\n\r\n    if (ev.categoryType === \"off_stage\") {\r\n      counts.offStage++;\r\n    } else if (\r\n      ev.categoryType === \"on_stage\" ||\r\n      ev.categoryType === \"flagship\"\r\n    ) {\r\n      if (ev.eventType === \"individual\") {\r\n        counts.onStageInd++;\r\n      } else {\r\n        // Group (On-Stage or Flagship)\r\n        counts.onStageGroup++;\r\n      }\r\n    }\r\n  };\r\n\r\n  soloEvents.forEach(process);\r\n  teamEvents.forEach((t) => process(t.eventTitle));\r\n  return counts;\r\n};\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [userProfile, setUserProfile] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Server State\r\n  const [registrations, setRegistrations] = useState<{\r\n    soloEvents: string[];\r\n    teamEvents: TeamRegistration[];\r\n    totalCount: number;\r\n  }>({ soloEvents: [], teamEvents: [], totalCount: 0 });\r\n\r\n  // Local State (Deferred Updates)\r\n  const [pendingSoloEvents, setPendingSoloEvents] = useState<string[]>([]);\r\n\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  const [saving, setSaving] = useState(false);\r\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\r\n  const [eventSettings, setEventSettings] = useState<Record<string, boolean>>(\r\n    {},\r\n  );\r\n\r\n  // Initial Auth & Data Fetch\r\n  useEffect(() => {\r\n    if (!auth) return;\r\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n      if (!currentUser) {\r\n        router.push(\"/login?callbackUrl=/register\");\r\n        return;\r\n      }\r\n      setUser(currentUser);\r\n\r\n      // Fetch User Profile, Registrations, and Event Settings in parallel\r\n      try {\r\n        const [regData, userDoc, settings] = await Promise.all([\r\n          fetchUserRegistrations(currentUser.uid),\r\n          getDoc(doc(db!, \"users\", currentUser.uid)),\r\n          fetchAllEventSettings(),\r\n        ]);\r\n\r\n        setRegistrations(regData);\r\n        setPendingSoloEvents(regData.soloEvents);\r\n        setEventSettings(settings);\r\n\r\n        if (userDoc.exists()) {\r\n          setUserProfile({ ...userDoc.data(), uid: userDoc.id });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching user data:\", error);\r\n      }\r\n\r\n      setLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [router, refreshTrigger]);\r\n\r\n  const refreshData = () => setRefreshTrigger((prev) => prev + 1);\r\n\r\n  // Compute derived state locally based on pending changes\r\n  // const currentTotalCount = pendingSoloEvents.length + registrations.teamEvents.length; // Deprecated\r\n  const counts = getCounts(pendingSoloEvents, registrations.teamEvents);\r\n\r\n  const hasChanges =\r\n    JSON.stringify(pendingSoloEvents.sort()) !==\r\n    JSON.stringify(registrations.soloEvents.sort());\r\n\r\n  const isProfileComplete =\r\n    userProfile &&\r\n    userProfile.name &&\r\n    userProfile.department &&\r\n    userProfile.collegeId &&\r\n    userProfile.mobile;\r\n\r\n  // Redirect if profile incomplete\r\n  useEffect(() => {\r\n    if (!loading && user && !isProfileComplete) {\r\n      toast.error(\r\n        \"Please complete your profile before registering for events.\",\r\n      );\r\n      router.push(\"/profile\");\r\n    }\r\n  }, [loading, user, isProfileComplete, router]);\r\n\r\n  const handleToggleSolo = (event: EventItem) => {\r\n    const isSelected = pendingSoloEvents.includes(event.title);\r\n    let newEvents;\r\n\r\n    if (isSelected) {\r\n      newEvents = pendingSoloEvents.filter((t) => t !== event.title);\r\n    } else {\r\n      // Check Limits using validator\r\n      const validation = validateRegistrationRules(\r\n        registrations.soloEvents,\r\n        registrations.teamEvents,\r\n        [...pendingSoloEvents, event.title],\r\n        undefined,\r\n      );\r\n\r\n      if (!validation.valid) {\r\n        toast.error(validation.message || \"Validation failed\");\r\n        return;\r\n      }\r\n      newEvents = [...pendingSoloEvents, event.title];\r\n    }\r\n    setPendingSoloEvents(newEvents);\r\n  };\r\n\r\n  const handleSaveChanges = async () => {\r\n    if (!user) return;\r\n    setSaving(true);\r\n    const result = await updateUserSoloRegistrations(\r\n      user.uid,\r\n      pendingSoloEvents,\r\n    );\r\n    if (result.success) {\r\n      toast.success(\"Changes saved successfully!\");\r\n      refreshData(); // Re-fetch to sync everything\r\n    } else {\r\n      toast.error(result.message || \"Failed to save changes\");\r\n    }\r\n    setSaving(false);\r\n  };\r\n\r\n  const handleCreateTeam = async (event: EventItem, members: any[]) => {\r\n    if (!user) return;\r\n\r\n    if (hasChanges) {\r\n      toast.error(\"Please save your pending solo event changes first.\");\r\n      return;\r\n    }\r\n\r\n    setActionLoading(event.title);\r\n\r\n    // Validate Limits before calling service\r\n    const validation = validateRegistrationRules(\r\n      registrations.soloEvents,\r\n      registrations.teamEvents,\r\n      null,\r\n      event.title,\r\n    );\r\n    if (!validation.valid) {\r\n      toast.error(validation.message || \"Validation failed\");\r\n      setActionLoading(null);\r\n      return;\r\n    }\r\n\r\n    const fullTeam = [\r\n      {\r\n        uid: user.uid,\r\n        name: user.displayName || \"Leader\",\r\n        email: user.email || \"\",\r\n        role: \"leader\",\r\n        status: \"confirmed\",\r\n      },\r\n      ...members.map((m) => ({\r\n        uid: m.uid,\r\n        name: m.name,\r\n        email: m.email,\r\n        role: \"member\",\r\n        status: \"confirmed\",\r\n      })),\r\n    ];\r\n\r\n    const result = await createTeam(\r\n      user.uid,\r\n      user.displayName || \"User\",\r\n      user.email || \"\",\r\n      event.title,\r\n      fullTeam as any,\r\n    );\r\n    if (result.success) {\r\n      toast.success(\"Team created successfully!\");\r\n      refreshData();\r\n    } else {\r\n      toast.error(result.message || \"Failed to create team\");\r\n    }\r\n    setActionLoading(null);\r\n  };\r\n\r\n  const handleLeaveTeam = (teamId: string) => {\r\n    if (!user) return;\r\n\r\n    toast.custom(\r\n      (t) => (\r\n        <ConfirmToast\r\n          t={t}\r\n          message=\"Are you sure you want to leave/disband this team?\"\r\n          onConfirm={async () => {\r\n            // Optimistic UI Update: Remove team immediately from view\r\n            setRegistrations((prev) => ({\r\n              ...prev,\r\n              teamEvents: prev.teamEvents.filter((t) => t.id !== teamId),\r\n              totalCount: prev.totalCount - 1,\r\n            }));\r\n\r\n            const result = await leaveTeam(user.uid, teamId);\r\n            if (result.success) {\r\n              toast.success(\"Left team successfully\");\r\n              refreshData();\r\n            } else {\r\n              toast.error(result.message || \"Failed to leave team\");\r\n              refreshData(); // Revert on failure (implied by re-fetch)\r\n            }\r\n          }}\r\n        />\r\n      ),\r\n      { duration: Infinity },\r\n    );\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-[#0A0A0A] text-white font-outfit relative overflow-y-auto selection:bg-[#BA170D] selection:text-white\">\r\n      <Navbar />\r\n\r\n      {/* Background Elements */}\r\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n        <div className=\"absolute top-[-20%] left-[-10%] w-[80vw] h-[80vw] bg-blue-900/10 blur-[100px] rounded-full\"></div>\r\n        <div className=\"absolute bottom-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[#BA170D]/10 blur-[100px] rounded-full\"></div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto mt-24 px-4 pb-20 relative z-10\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"flex items-center gap-2 text-gray-400 hover:text-[#BA170D] transition-colors mb-8 group\"\r\n        >\r\n          <div className=\"p-2 rounded-full bg-white/5 group-hover:bg-[#BA170D]/10 border border-white/10 group-hover:border-[#BA170D]/50 transition-all\">\r\n            <ArrowLeft size={20} />\r\n          </div>\r\n          <span className=\"font-medium\">Back</span>\r\n        </button>\r\n\r\n        <header className=\"mb-12\">\r\n          <h1 className=\"text-3xl md:text-5xl font-black font-unbounded text-white mb-6 tracking-tighter\">\r\n            EVENT REGISTRATION\r\n          </h1>\r\n\r\n          {/* Updated Status Display with 3 counters */}\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4\">\r\n            {[\r\n              {\r\n                label: \"Off-Stage\",\r\n                count: counts.offStage,\r\n                max: 4,\r\n                color: \"text-[#BA170D]\",\r\n              },\r\n              {\r\n                label: \"On-Stage (Ind)\",\r\n                count: counts.onStageInd,\r\n                max: 3,\r\n                color: \"text-blue-400\",\r\n              },\r\n              {\r\n                label: \"Group\",\r\n                count: counts.onStageGroup,\r\n                max: 2,\r\n                color: \"text-purple-400\",\r\n              },\r\n            ].map((p, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"flex items-center justify-between sm:justify-start gap-4 bg-white/5 border border-white/10 p-4 rounded-2xl backdrop-blur-md\"\r\n              >\r\n                <span className=\"text-gray-500 uppercase tracking-[0.2em] text-[10px] font-black\">\r\n                  {p.label}\r\n                </span>\r\n                <div className=\"flex items-baseline gap-1.5\">\r\n                  <span\r\n                    className={`text-2xl md:text-3xl font-black font-unbounded ${p.color} tracking-tighter`}\r\n                  >\r\n                    {p.count}\r\n                  </span>\r\n                  <span className=\"text-white/20 text-xs font-bold font-unbounded\">\r\n                    / {p.max}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"space-y-16\">\r\n          {categories\r\n            .filter((cat) => cat.title !== \"Flagship Event\")\r\n            .map((cat) => (\r\n              <section key={cat.title}>\r\n                <h2 className=\"text-xl md:text-2xl font-black font-unbounded text-[#BA170D] mb-8 flex items-center gap-5 uppercase tracking-tighter\">\r\n                  {cat.title}\r\n                  <div className=\"h-px flex-1 bg-white/10\"></div>\r\n                </h2>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {loading\r\n                    ? Array.from({ length: 6 }).map((_, i) => (\r\n                        <EventCardSkeleton key={i} />\r\n                      ))\r\n                    : cat.items\r\n                      .filter((event) => {\r\n                        const isSelected =\r\n                          pendingSoloEvents.includes(event.title) ||\r\n                          registrations.teamEvents.some(\r\n                            (t) => t.eventTitle === event.title,\r\n                          );\r\n                        const isClosed = eventSettings[event.title] || false;\r\n                        return isSelected || !isClosed;\r\n                      })\r\n                      .sort((a, b) => {\r\n                        const dateA = a.date ? new Date(a.date).getTime() : Infinity;\r\n                        const dateB = b.date ? new Date(b.date).getTime() : Infinity;\r\n                        return dateA - dateB;\r\n                      })\r\n                      .map((event) => {\r\n                        // Check local pending state\r\n                        const isSoloRegistered = pendingSoloEvents.includes(\r\n                          event.title,\r\n                        );\r\n\r\n                        // Check if registered as Team (server state)\r\n                        const teamReg = registrations.teamEvents.find(\r\n                          (t) => t.eventTitle === event.title,\r\n                        );\r\n\r\n                        const isSelected = isSoloRegistered || !!teamReg;\r\n                        const isLocked =\r\n                          !!teamReg && teamReg.leaderId !== user?.uid;\r\n                        const isClosed = eventSettings[event.title] || false;\r\n\r\n                        // Calculate if registration should be disabled based on limits\r\n                        let isDisabled = false;\r\n                        if (!isSelected) {\r\n                          if (event.categoryType === 'off_stage' && counts.offStage >= 4) {\r\n                            isDisabled = true;\r\n                          } else if (event.categoryType === 'on_stage' || event.categoryType === 'flagship') {\r\n                            if (event.eventType === 'individual' && counts.onStageInd >= 3) {\r\n                              isDisabled = true;\r\n                            } else if (event.eventType === 'group' && counts.onStageGroup >= 2) {\r\n                              isDisabled = true;\r\n                            }\r\n                          }\r\n                        }\r\n\r\n                        return (\r\n                          <EventRegistrationCard\r\n                            key={event.title}\r\n                            event={event}\r\n                            isSelected={isSelected}\r\n                            isLocked={isLocked}\r\n                            isRegistrationClosed={isClosed}\r\n                            isDisabled={isDisabled}\r\n                            teamDetails={teamReg}\r\n                            onToggle={() => handleToggleSolo(event)} // Handles local state\r\n                            onCreateTeam={(members: any[]) =>\r\n                              handleCreateTeam(event, members)\r\n                            }\r\n                            onLeaveTeam={async () => {\r\n                              if (teamReg?.id)\r\n                                await handleLeaveTeam(teamReg.id);\r\n                            }}\r\n                            currentUser={userProfile || user}\r\n                          />\r\n                        );\r\n                      })}\r\n                </div>\r\n              </section>\r\n            ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Floating Save Button */}\r\n      <AnimatePresence>\r\n        {hasChanges && (\r\n          <motion.div\r\n            initial={{ y: 100, opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            exit={{ y: 100, opacity: 0 }}\r\n            className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50\"\r\n          >\r\n            <button\r\n              onClick={handleSaveChanges}\r\n              disabled={saving}\r\n              className=\"bg-white text-black px-8 py-4 rounded-full font-black font-unbounded flex items-center gap-3 shadow-[0_0_40px_rgba(255,255,255,0.15)] hover:scale-105 hover:bg-[#BA170D] transition-all active:scale-95 disabled:opacity-50 uppercase tracking-tighter text-sm\"\r\n            >\r\n              {saving ? (\r\n                <div className=\"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin\"></div>\r\n              ) : (\r\n                <Save size={20} />\r\n              )}\r\n              Save Changes\r\n            </button>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </main>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\app\\tech-team\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":13,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Image"},"fix":{"range":[61,94],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'gsap' is defined but never used.","line":17,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"gsap"},"fix":{"range":[316,342],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'containerRef' is assigned a value but never used.","line":22,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'y' is assigned a value but never used.","line":24,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":10},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":215,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8908,8929],"text":"\r\n                  &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8908,8929],"text":"\r\n                  &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8908,8929],"text":"\r\n                  &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8908,8929],"text":"\r\n                  &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":215,"column":31,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8940,8959],"text":"&quot;\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8940,8959],"text":"&ldquo;\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8940,8959],"text":"&#34;\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8940,8959],"text":"&rdquo;\r\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { motion, useScroll, useTransform } from \"framer-motion\";\r\nimport {\r\n  ArrowLeft,\r\n  Linkedin,\r\n  Code,\r\n  Coffee,\r\n  Heart,\r\n  Sparkles,\r\n  Terminal,\r\n  Cpu,\r\n} from \"lucide-react\";\r\nimport gsap from \"gsap\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Footer from \"@/components/Footer\";\r\n\r\nexport default function TechTeamPage() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const { scrollYProgress } = useScroll();\r\n  const y = useTransform(scrollYProgress, [0, 1], [0, -50]);\r\n\r\n  // Parallax background elements\r\n  const bgY1 = useTransform(scrollYProgress, [0, 1], [0, -100]);\r\n  const bgY2 = useTransform(scrollYProgress, [0, 1], [0, -200]);\r\n\r\n  useEffect(() => {\r\n    // Subtle Mouse parallax\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const cards = document.querySelectorAll(\".dev-card\");\r\n      cards.forEach((card) => {\r\n        const rect = card.getBoundingClientRect();\r\n        const x = e.clientX - rect.left;\r\n        const y = e.clientY - rect.top;\r\n\r\n        (card as HTMLElement).style.setProperty(\"--mouse-x\", `${x}px`);\r\n        (card as HTMLElement).style.setProperty(\"--mouse-y\", `${y}px`);\r\n      });\r\n    };\r\n\r\n    window.addEventListener(\"mousemove\", handleMouseMove);\r\n    return () => window.removeEventListener(\"mousemove\", handleMouseMove);\r\n  }, []);\r\n\r\n  const developers = [\r\n    {\r\n      initials: \"AS\",\r\n      name: \"Abhishek Santhosh\",\r\n      role: \"Full Stack Developer\",\r\n      linkedin: \"https://www.linkedin.com/in/abhishek-santhosh\",\r\n      skills: [\"Next.js\", \"React\", \"Node.js\", \"TypeScript\", \"Firebase\"],\r\n      quote: \"Designing interactions that feel like magic.\",\r\n      gradient: \"from-blue-600 to-cyan-400\",\r\n      glow: \"shadow-blue-500/20\",\r\n    },\r\n    {\r\n      initials: \"JJ\",\r\n      name: \"Joel Joy\",\r\n      role: \"Full Stack Developer\",\r\n      linkedin: \"https://www.linkedin.com/in/joeljoy123/\",\r\n      skills: [\"Next.js\", \"React\", \"Node.js\", \"TypeScript\", \"Framer Motion\"],\r\n      quote: \"Building the future, one pixel at a time.\",\r\n      gradient: \"from-purple-600 to-pink-400\",\r\n      glow: \"shadow-purple-500/20\",\r\n    },\r\n  ];\r\n\r\n  const stats = [\r\n    {\r\n      icon: Coffee,\r\n      label: \"Cups of Coffee\",\r\n      val: \"Γê₧\",\r\n      color: \"text-amber-500\",\r\n    },\r\n    { icon: Code, label: \"Lines of Code\", val: \"10K+\", color: \"text-blue-500\" },\r\n    {\r\n      icon: Heart,\r\n      label: \"Made with Love\",\r\n      val: \"100%\",\r\n      color: \"text-rose-500\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-[#050505] text-white selection:bg-[#BA170D] selection:text-white overflow-hidden relative\">\r\n      <Navbar />\r\n\r\n      {/* Animated Background */}\r\n      <div className=\"fixed inset-0 pointer-events-none z-0\">\r\n        <motion.div\r\n          style={{ y: bgY1 }}\r\n          className=\"absolute top-0 left-0 w-[500px] h-[500px] bg-blue-900/10 rounded-full blur-[120px]\"\r\n        />\r\n        <motion.div\r\n          style={{ y: bgY2 }}\r\n          className=\"absolute bottom-0 right-0 w-[600px] h-[600px] bg-purple-900/10 rounded-full blur-[150px]\"\r\n        />\r\n        <div className=\"absolute inset-0 bg-[url('/noise.svg')] opacity-[0.03]\" />\r\n        <div className=\"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.01)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.01)_1px,transparent_1px)] bg-size-[4rem_4rem] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)]\" />\r\n      </div>\r\n\r\n      <div className=\"relative z-10 pt-32 pb-20 px-4 md:px-8 max-w-7xl mx-auto\">\r\n        {/* Back Button */}\r\n        <motion.div\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n          className=\"mb-12\"\r\n        >\r\n          <Link\r\n            href=\"/\"\r\n            className=\"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors group\"\r\n          >\r\n            <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\r\n            <span className=\"text-sm font-mono uppercase tracking-wider\">\r\n              Back to Home\r\n            </span>\r\n          </Link>\r\n        </motion.div>\r\n\r\n        {/* Hero Section */}\r\n        <div className=\"flex flex-col items-center text-center mb-24\">\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n            className=\"relative mb-6\"\r\n          >\r\n            <div className=\"absolute -inset-4 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-20 blur-xl rounded-full\" />\r\n            <div className=\"relative px-4 py-1.5 rounded-full bg-white/5 border border-white/10 backdrop-blur-md inline-flex items-center gap-2\">\r\n              <Sparkles className=\"w-4 h-4 text-yellow-400\" />\r\n              <span className=\"text-xs font-bold tracking-widest uppercase bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent\">\r\n                Crafted With Passion\r\n              </span>\r\n            </div>\r\n          </motion.div>\r\n\r\n          <motion.h1\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.8, delay: 0.1, ease: \"easeOut\" }}\r\n            className=\"text-5xl md:text-8xl font-black font-cinzel mb-8 tracking-tighter\"\r\n          >\r\n            Meet the{\" \"}\r\n            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 animate-gradient-x\">\r\n              Tech Team\r\n            </span>\r\n          </motion.h1>\r\n\r\n          <motion.p\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.8, delay: 0.2, ease: \"easeOut\" }}\r\n            className=\"text-lg md:text-xl text-gray-400 max-w-2xl leading-relaxed\"\r\n          >\r\n            Behind every smooth animation and seamless interaction lies lines of\r\n            code written with dedication. We build digital experiences that\r\n            inspire.\r\n          </motion.p>\r\n        </div>\r\n\r\n        {/* Developers Showcase */}\r\n        <div className=\"grid lg:grid-cols-2 gap-8 md:gap-12 mb-32\">\r\n          {developers.map((dev, index) => (\r\n            <motion.div\r\n              key={dev.name}\r\n              initial={{ opacity: 0, y: 50 }}\r\n              whileInView={{ opacity: 1, y: 0 }}\r\n              viewport={{ once: true }}\r\n              transition={{ duration: 0.8, delay: index * 0.2 }}\r\n              className={`dev-card group relative rounded-3xl bg-[#0F0F0F] border border-white/5 overflow-hidden hover:border-white/10 transition-colors duration-500 ${dev.glow} hover:shadow-2xl`}\r\n            >\r\n              {/* Hover Spotlight Effect */}\r\n              <div\r\n                className=\"pointer-events-none absolute -inset-px opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-30\"\r\n                style={{\r\n                  background: `radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.06), transparent 40%)`,\r\n                }}\r\n              />\r\n\r\n              <div className=\"relative p-8 md:p-12 z-20 flex flex-col h-full\">\r\n                {/* Top Decor */}\r\n                <div className=\"flex justify-between items-start mb-8\">\r\n                  <div\r\n                    className={`p-3 rounded-2xl bg-gradient-to-br ${dev.gradient} bg-opacity-10`}\r\n                  >\r\n                    <Terminal className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <Link\r\n                    href={dev.linkedin}\r\n                    target=\"_blank\"\r\n                    className=\"p-3 rounded-full bg-white/5 hover:bg-white/10 transition-colors group/link\"\r\n                  >\r\n                    <Linkedin className=\"w-5 h-5 text-gray-400 group-hover/link:text-white transition-colors\" />\r\n                  </Link>\r\n                </div>\r\n\r\n                {/* Initials / Identity */}\r\n                <div className=\"mb-8\">\r\n                  <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-gray-400 transition-all duration-300\">\r\n                    {dev.name}\r\n                  </h2>\r\n                  <p\r\n                    className={`text-sm font-mono uppercase tracking-widest bg-gradient-to-r ${dev.gradient} bg-clip-text text-transparent font-bold`}\r\n                  >\r\n                    {dev.role}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Quote */}\r\n                <blockquote className=\"text-gray-400 italic mb-8 border-l-2 border-white/10 pl-4\">\r\n                  \"{dev.quote}\"\r\n                </blockquote>\r\n\r\n                {/* Skills */}\r\n                <div className=\"mt-auto\">\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {dev.skills.map((skill) => (\r\n                      <span\r\n                        key={skill}\r\n                        className=\"px-3 py-1 text-xs font-medium rounded-full bg-white/5 border border-white/5 text-gray-300 group-hover:border-white/10 transition-colors\"\r\n                      >\r\n                        {skill}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Background Gradient Blob */}\r\n              <div\r\n                className={`absolute -right-20 -bottom-20 w-64 h-64 bg-gradient-to-br ${dev.gradient} opacity-10 blur-[80px] group-hover:opacity-20 transition-opacity duration-500 rounded-full pointer-events-none`}\r\n              />\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Stats Section */}\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          whileInView={{ opacity: 1 }}\r\n          viewport={{ once: true }}\r\n          transition={{ duration: 1 }}\r\n          className=\"relative border-y border-white/10 bg-white/[0.02] backdrop-blur-sm rounded-3xl p-12 mb-20 overflow-hidden\"\r\n        >\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-pulse opacity-50\" />\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-12 relative z-10\">\r\n            {stats.map((stat, idx) => (\r\n              <div key={idx} className=\"text-center group\">\r\n                <div\r\n                  className={`inline-flex p-4 rounded-full bg-white/5 mb-6 group-hover:scale-110 transition-transform duration-300 ${stat.color.replace(\"text-\", \"bg-\").replace(\"500\", \"500/10\")}`}\r\n                >\r\n                  <stat.icon className={`w-8 h-8 ${stat.color}`} />\r\n                </div>\r\n                <div className=\"text-5xl md:text-6xl font-black text-white font-cinzel mb-2 tracking-tight\">\r\n                  {stat.val}\r\n                </div>\r\n                <div className=\"text-xs md:text-sm text-gray-400 uppercase tracking-widest font-bold\">\r\n                  {stat.label}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Footer Message */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          whileInView={{ opacity: 1, y: 0 }}\r\n          viewport={{ once: true }}\r\n          className=\"text-center max-w-xl mx-auto\"\r\n        >\r\n          <Cpu className=\"w-12 h-12 text-gray-600 mx-auto mb-6\" />\r\n          <h3 className=\"text-2xl font-bold text-white mb-4\">\r\n            Built for Impact.\r\n          </h3>\r\n          <p className=\"text-gray-500\">\r\n            We believe in crafting software that not only functions flawlessly\r\n            but also delights the user at every interaction.\r\n          </p>\r\n        </motion.div>\r\n      </div>\r\n\r\n      <Footer />\r\n    </main>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\About.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ArohaEvents.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":73,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef, useLayoutEffect } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nconst events = [\r\n  {\r\n    id: 1,\r\n    title: \"Solo\",\r\n    description: \"One Soul, One Stage\",\r\n    image: \"/dance.png\", // Placeholder, reusing existing assets for now\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Duet\",\r\n    description: \"Two Hearts, One Rhythm\",\r\n    image: \"/dance.png\",\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"Group\",\r\n    description: \"Unity in Motion\",\r\n    image: \"/dance.png\",\r\n  },\r\n];\r\n\r\nexport default function ArohaEvents() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useLayoutEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      const sections = gsap.utils.toArray<HTMLElement>(\".event-card\");\r\n\r\n      gsap.to(sections, {\r\n        xPercent: -100 * (sections.length - 1),\r\n        ease: \"none\",\r\n        scrollTrigger: {\r\n          trigger: scrollRef.current,\r\n          pin: true,\r\n          scrub: 1,\r\n          snap: 1 / (sections.length - 1),\r\n          end: () => \"+=\" + scrollRef.current!.offsetWidth,\r\n        },\r\n      });\r\n    }, containerRef);\r\n\r\n    return () => ctx.revert();\r\n  }, []);\r\n\r\n  return (\r\n    <section\r\n      ref={containerRef}\r\n      className=\"relative bg-[#0A0A0A] overflow-hidden\"\r\n    >\r\n      {/* Section Header */}\r\n      <div className=\"absolute top-10 left-6 md:left-24 z-20 pointer-events-none\">\r\n        <h2 className=\"text-[#BA170D] font-cinzel font-bold text-xl uppercase tracking-widest mb-2\">\r\n          The Main Event\r\n        </h2>\r\n        <p className=\"text-4xl md:text-6xl font-light tracking-tighter text-white\">\r\n          AROHA{\" \"}\r\n          <span className=\"font-serif italic text-gray-500 text-2xl md:text-4xl\">\r\n            Inter-College\r\n          </span>\r\n        </p>\r\n      </div>\r\n\r\n      <div ref={scrollRef} className=\"flex h-screen w-[300%]\">\r\n        {events.map((event, index) => (\r\n          <div\r\n            key={event.id}\r\n            className=\"event-card w-screen h-screen flex flex-col md:flex-row items-center justify-center px-6 md:px-24 relative border-r border-white/5 last:border-r-0\"\r\n          >\r\n            {/* Background Number */}\r\n            <div className=\"absolute top-10 left-10 md:top-20 md:left-20 text-[20vw] font-black text-white/5 font-cinzel leading-none select-none z-0\">\r\n              0{event.id}\r\n            </div>\r\n\r\n            <div className=\"relative z-10 w-full max-w-6xl flex flex-col md:flex-row items-center gap-12\">\r\n              {/* Text Info */}\r\n              <div className=\"flex-1 space-y-6\">\r\n                <h3 className=\"text-6xl md:text-8xl font-cinzel font-bold text-white uppercase tracking-tighter\">\r\n                  {event.title}\r\n                </h3>\r\n                <div className=\"h-1 w-20 bg-[#BA170D] rounded-full\"></div>\r\n                <p className=\"text-xl md:text-2xl text-gray-400 font-light tracking-wide\">\r\n                  {event.description}\r\n                </p>\r\n                <button className=\"mt-8 px-8 py-3 border border-white/20 rounded-full text-white hover:bg-[#BA170D] hover:border-[#BA170D] transition-all duration-300 uppercase tracking-widest text-sm\">\r\n                  View Details\r\n                </button>\r\n              </div>\r\n\r\n              {/* Visual Representation */}\r\n              <div className=\"flex-1 relative h-[400px] w-full md:h-[600px] bg-white/5 rounded-2xl overflow-hidden backdrop-blur-sm border border-white/10 group\">\r\n                <div className=\"absolute inset-0 bg-gradient-to-tr from-[#BA170D]/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n                <div className=\"absolute inset-0 flex items-center justify-center text-white/20 font-cinzel text-xl\">\r\n                  Image Placeholder\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Scroll Hint */}\r\n      <div className=\"absolute bottom-10 right-10 flex items-center gap-4 text-white/50 z-20\">\r\n        <span className=\"uppercase tracking-widest text-xs\">\r\n          Swipe to Explore\r\n        </span>\r\n        <div className=\"w-12 h-[1px] bg-white/50\"></div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ArohaRules.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ChiefGuests.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ConfirmToast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\EventCardSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\EventRegistrationCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[822,825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[822,825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[886,889],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[886,889],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1367,1370],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1367,1370],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSearchUser'. Either include it or remove the dependency array.","line":80,"column":8,"nodeType":"ArrayExpression","endLine":80,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [handleSearchUser, searchEmail]","fix":{"range":[2304,2317],"text":"[handleSearchUser, searchEmail]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":121,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":209,"column":41,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":209,"endColumn":91}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { EventItem, TeamRegistration } from \"@/data/constant\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n    Check,\r\n    Lock,\r\n    Users,\r\n    X,\r\n    AlertCircle,\r\n    Info,\r\n    Clock,\r\n    ArrowUpRight,\r\n    UserPlus2,\r\n    Sparkles,\r\n} from \"lucide-react\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport Toast, { ToastType } from \"@/components/ui/Toast\";\r\nimport {\r\n    fetchUserRegistrations,\r\n    validateRegistrationRules,\r\n} from \"@/lib/registrationService\";\r\n\r\ninterface EventRegistrationCardProps {\r\n    event: EventItem;\r\n    isSelected: boolean;\r\n    isLocked?: boolean;\r\n    teamDetails?: TeamRegistration;\r\n    onToggle: () => void;\r\n    onCreateTeam: (members: any[]) => void;\r\n    onLeaveTeam: () => void;\r\n    currentUser: any;\r\n    isRegistrationClosed?: boolean;\r\n    isDisabled?: boolean;\r\n}\r\n\r\nexport default function EventRegistrationCard({\r\n    event,\r\n    isSelected,\r\n    isLocked,\r\n    teamDetails,\r\n    onToggle,\r\n    onCreateTeam,\r\n    onLeaveTeam,\r\n    currentUser,\r\n    isRegistrationClosed = false,\r\n    isDisabled = false,\r\n}: EventRegistrationCardProps) {\r\n    const [isExpanded, setIsExpanded] = useState(isSelected && !!teamDetails);\r\n    const [teamMembers, setTeamMembers] = useState<any[]>(\r\n        teamDetails?.members || [],\r\n    );\r\n    const [searchEmail, setSearchEmail] = useState(\"\");\r\n    const [searchLoading, setSearchLoading] = useState(false);\r\n    const [searchError, setSearchError] = useState(\"\");\r\n    const [showRules, setShowRules] = useState(false);\r\n\r\n    const [toast, setToast] = useState<{\r\n        message: string;\r\n        type: ToastType;\r\n        isVisible: boolean;\r\n    }>({\r\n        message: \"\",\r\n        type: \"info\",\r\n        isVisible: false,\r\n    });\r\n\r\n    const showToast = (message: string, type: ToastType = \"info\") => {\r\n        setToast({ message, type, isVisible: true });\r\n    };\r\n\r\n    const isGroup = event.eventType === \"group\";\r\n\r\n    useEffect(() => {\r\n        const delayDebounceFn = setTimeout(() => {\r\n            if (searchEmail) handleSearchUser();\r\n            else setSearchError(\"\");\r\n        }, 1000);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchEmail]);\r\n\r\n    const handleSearchUser = async () => {\r\n        if (!searchEmail || searchLoading) return;\r\n        if (currentUser && searchEmail.toLowerCase() === currentUser.email?.toLowerCase()) {\r\n            setSearchError(\"Leader already registered.\");\r\n            return;\r\n        }\r\n        if (teamMembers.some((m) => m.email.toLowerCase() === searchEmail.toLowerCase())) {\r\n            setSearchError(\"User already added.\");\r\n            return;\r\n        }\r\n        if (!db) return;\r\n        setSearchLoading(true);\r\n        setSearchError(\"\");\r\n\r\n        try {\r\n            const q = query(collection(db, \"users\"), where(\"email\", \"==\", searchEmail));\r\n            const snapshot = await getDocs(q);\r\n            if (snapshot.empty) {\r\n                setSearchError(\"User not found.\");\r\n            } else {\r\n                const userDoc = snapshot.docs[0];\r\n                const userData = userDoc.data();\r\n                const leaderHouse = currentUser?.house;\r\n                const memberHouse = userData?.house;\r\n\r\n                if (leaderHouse?.toLowerCase() !== memberHouse?.toLowerCase()) {\r\n                    setSearchError(`House Mismatch: ${memberHouse}`);\r\n                } else {\r\n                    const registrations = await fetchUserRegistrations(userDoc.id);\r\n                    const validation = validateRegistrationRules(registrations.soloEvents, registrations.teamEvents, null, event.title);\r\n                    if (!validation.valid) {\r\n                        setSearchError(validation.message || \"Limit reached\");\r\n                        return;\r\n                    }\r\n                    setTeamMembers([...teamMembers, { email: userData.email, uid: userDoc.id, name: userData.name, status: \"pending\" }]);\r\n                    setSearchEmail(\"\");\r\n                    showToast(\"Member staged.\", \"success\");\r\n                }\r\n            }\r\n        } catch (err) {\r\n            setSearchError(\"Network failure.\");\r\n        } finally {\r\n            setSearchLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmitTeam = () => {\r\n        if ((teamMembers.length + 1) < (event.minParticipants || 1)) {\r\n            showToast(`Min ${event.minParticipants} members required.`, \"error\");\r\n            return;\r\n        }\r\n        onCreateTeam(teamMembers);\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            layout\r\n            className={`relative group h-full flex flex-col rounded-4xl transition-all duration-700 overflow-hidden ${isSelected\r\n                ? \"border-[#BA170D] shadow-[0_0_60px_rgba(186,23,13,0.15)]\"\r\n                : \"border-white/10\"\r\n                }`}\r\n        >\r\n            <div className=\"absolute inset-0 bg-black\" />\r\n            <div className={`absolute inset-0 transition-all duration-1000 ${isSelected ? \"opacity-[0.12]\" : \"opacity-[0.05] group-hover:opacity-[0.08]\"\r\n                } bg-linear-to-br ${event.gradient}`} />\r\n            <div className=\"absolute inset-0 opacity-[0.3] mix-blend-soft-light pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')]\" />\r\n\r\n            <Toast\r\n                message={toast.message}\r\n                type={toast.type}\r\n                isVisible={toast.isVisible}\r\n                onClose={() => setToast((prev) => ({ ...prev, isVisible: false }))}\r\n            />\r\n\r\n            <div className={`relative flex-1 flex flex-col border rounded-4xl transition-all duration-500 backdrop-blur-2xl ${isSelected ? \"bg-black/60 border-[#BA170D]/50\" : \"bg-white/3 border-white/10 group-hover:border-white/20\"\r\n                }`}>\r\n\r\n                <div className=\"flex justify-between items-center p-6 pb-0\">\r\n                    <div className=\"flex gap-2.5\">\r\n                        {event.date && (\r\n                            <span className=\"flex items-center gap-1.5 px-3 py-1 bg-[#BA170D]/10 border border-[#BA170D]/30 rounded-lg text-[10px] font-black text-white uppercase tracking-[0.15em] shadow-2xl\">\r\n                                <Clock size={11} className=\"text-[#BA170D]\" /> {event.date}\r\n                            </span>\r\n                        )}\r\n                        <span className=\"flex items-center gap-1.5 px-3 py-1 bg-white/5 border border-white/10 rounded-lg text-[10px] font-black text-gray-200 uppercase tracking-widest\">\r\n                            {isGroup ? <Users size={11} className=\"text-white\" /> : <Sparkles size={11} className=\"text-white\" />} {event.eventType}\r\n                        </span>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowRules(true)}\r\n                        className=\"p-2.5 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10\"\r\n                    >\r\n                        <Info size={16} className=\"text-gray-300\" />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-8 pt-5 flex flex-col gap-6 h-full\">\r\n                    <div className=\"space-y-4\">\r\n                        <h3 className=\"text-2xl font-black font-unbounded text-white tracking-tighter leading-[0.9] group-hover:text-[#BA170D] transition-colors duration-500 uppercase\">\r\n                            {event.title.split(' ').map((word, i) => (\r\n                                <span key={i} className=\"block\">{word}</span>\r\n                            ))}\r\n                        </h3>\r\n                        <p className=\"text-xs text-gray-300 font-semibold leading-relaxed line-clamp-2 min-h-10 tracking-tight\">\r\n                            {event.description}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-auto flex items-center justify-between gap-4 pt-4\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            {event.tags.slice(0, 1).map(t => (\r\n                                <div key={t} className=\"flex flex-col\">\r\n                                    <span className=\"text-[10px] font-black text-gray-400 uppercase tracking-widest\">Tag</span>\r\n                                    <span className=\"text-[11px] font-black text-white uppercase\">{t}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {isLocked ? (\r\n                                <div className=\"p-3 bg-white/5 border border-white/10 rounded-2xl text-gray-400\">\r\n                                    <Lock size={20} />\r\n                                </div>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => {\r\n                                        if (isRegistrationClosed && !isSelected) return;\r\n                                        isGroup ? setIsExpanded(!isExpanded) : onToggle();\r\n                                    }}\r\n                                        disabled={isDisabled && !isSelected}\r\n                                        className={`group/btn relative flex items-center gap-3 px-8 py-3.5 rounded-2xl font-black text-xs uppercase tracking-[0.2em] transition-all duration-500 overflow-hidden shadow-2xl ${isSelected\r\n                                            ? \"bg-[#BA170D] text-white\"\r\n                                            : isDisabled ? \"bg-white/5 border border-white/10 text-gray-500 cursor-not-allowed\" : \"bg-white text-black hover:bg-[#BA170D] hover:text-white\"\r\n                                            }`}\r\n                                    >\r\n                                        <span className=\"relative z-10 flex items-center gap-2\">\r\n                                            {isSelected ? (\r\n                                                <><Check size={18} className=\"stroke-[4]\" /> Entry Saved</>\r\n                                            ) : isDisabled ? (\r\n                                                <><Clock size={18} /> Limit Reached</>\r\n                                            ) : (\r\n                                                <>Register <ArrowUpRight size={18} className=\"group-hover/btn:translate-x-1 group-hover/btn:-translate-y-1 transition-transform\" /></>\r\n                                            )}\r\n                                        </span>\r\n                                    {!isDisabled && <div className=\"absolute inset-0 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-1000 bg-linear-to-r from-transparent via-white/20 to-transparent pointer-events-none\" />}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <AnimatePresence>\r\n                        {isGroup && (isExpanded || isSelected) && (\r\n                            <motion.div\r\n                                initial={{ height: 0, opacity: 0 }}\r\n                                animate={{ height: \"auto\", opacity: 1 }}\r\n                                exit={{ height: 0, opacity: 0 }}\r\n                                className=\"pt-8 border-t border-white/10 space-y-8\"\r\n                            >\r\n                                {isSelected ? (\r\n                                    <div className=\"space-y-6\">\r\n                                        <div className=\"flex items-center justify-between px-1\">\r\n                                            <span className=\"text-[11px] font-black text-[#BA170D] uppercase tracking-[0.3em]\">Team Roster</span>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]\" />\r\n                                                <span className=\"text-[10px] font-black text-white uppercase\">Confirmed</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-1 gap-3\">\r\n                                            {teamDetails?.members.map((m, i) => (\r\n                                                <div key={i} className={`flex items-center justify-between p-4 rounded-3xl border transition-all ${m.role === 'leader' ? 'bg-[#BA170D]/10 border-[#BA170D]/40' : 'bg-white/5 border-white/10'}`}>\r\n                                                    <div className=\"flex items-center gap-4 min-w-0\">\r\n                                                        <div className={`w-11 h-11 rounded-2xl flex items-center justify-center text-sm font-black shrink-0 ${m.role === 'leader' ? 'bg-[#BA170D] text-white' : 'bg-white/10 text-gray-200'}`}>\r\n                                                            {m.role === 'leader' ? 'L' : 'M'}\r\n                                                        </div>\r\n                                                        <div className=\"min-w-0\">\r\n                                                            <p className=\"text-xs font-black text-white truncate\">{m.uid === currentUser.uid ? \"You\" : m.name}</p>\r\n                                                            <p className=\"text-[10px] text-gray-400 font-mono truncate tracking-tight\">{m.email}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                        <button onClick={onLeaveTeam} className=\"w-full py-4 text-[10px] font-black text-gray-400 hover:text-red-500 uppercase tracking-[0.3em] transition-all border border-white/10 rounded-2xl hover:bg-red-500/10\">\r\n                                            Leave/Disband Team\r\n                                        </button>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"space-y-8\">\r\n                                        <div className=\"space-y-3\">\r\n                                            <span className=\"text-[11px] font-black text-white uppercase tracking-[0.3em] pl-1\">Add Teammates</span>\r\n                                            <div className=\"relative group/input\">\r\n                                                <input\r\n                                                    type=\"email\"\r\n                                                    placeholder=\"Search email...\"\r\n                                                    className=\"w-full bg-black/40 border border-white/10 rounded-2xl px-6 py-4 text-sm text-white outline-hidden placeholder:text-gray-600 font-bold focus:border-[#BA170D]\"\r\n                                                    value={searchEmail}\r\n                                                    onChange={(e) => setSearchEmail(e.target.value)}\r\n                                                />\r\n                                                <button\r\n                                                    onClick={handleSearchUser}\r\n                                                    disabled={!searchEmail || searchLoading}\r\n                                                    className=\"absolute right-2 top-2 bottom-2 px-6 bg-white text-black rounded-xl font-black text-[11px] uppercase hover:bg-[#BA170D] hover:text-white transition-all disabled:opacity-20 shadow-xl\"\r\n                                                >\r\n                                                    {searchLoading ? \"ΓÇóΓÇó\" : <UserPlus2 size={20} />}\r\n                                                </button>\r\n                                            </div>\r\n                                            {searchError && <p className=\"text-[10px] font-bold text-red-500 uppercase tracking-widest pl-2 pt-1 flex items-center gap-1.5\"><AlertCircle size={14} /> {searchError}</p>}\r\n                                        </div>\r\n\r\n                                            {teamMembers.length > 0 && (\r\n                                                <div className=\"space-y-3 pr-1\">\r\n                                                    {teamMembers.map((m, idx) => (\r\n                                                        <div key={idx} className=\"flex items-center justify-between p-4 bg-white/5 border border-white/10 rounded-3xl\">\r\n                                                            <div className=\"flex items-center gap-4 min-w-0\">\r\n                                                                <div className=\"w-9 h-9 rounded-xl bg-white/10 flex items-center justify-center text-[10px] font-black text-gray-100\">{idx + 2}</div>\r\n                                                                <span className=\"text-xs font-black text-white truncate max-w-[150px] uppercase\">{m.name || m.email}</span>\r\n                                                            </div>\r\n                                                            <button onClick={() => setTeamMembers(teamMembers.filter(tm => tm.email !== m.email))} className=\"p-2.5 text-gray-300 hover:text-red-500 transition-all rounded-full hover:bg-red-500/10\"><X size={20} /></button>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            <button\r\n                                                onClick={handleSubmitTeam}\r\n                                            disabled={teamMembers.length === 0 || (isDisabled && !isSelected)}\r\n                                            className=\"w-full py-5 bg-[#BA170D] text-white font-black text-xs uppercase tracking-[0.4em] rounded-3xl hover:shadow-[0_20px_80px_rgba(186,23,13,0.3)] disabled:opacity-30 disabled:grayscale transition-all hover:scale-[1.02] active:scale-100\"\r\n                                        >\r\n                                            Confirm Registration\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n                {showRules && (\r\n                    <div className=\"fixed inset-0 z-100 flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl\" onClick={() => setShowRules(false)}>\r\n                        <motion.div\r\n                            initial={{ scale: 0.95, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.95, opacity: 0 }}\r\n                            className=\"bg-[#050505] border border-white/10 rounded-4xl w-full max-w-md overflow-hidden flex flex-col shadow-2xl max-h-[85vh]\"\r\n                            onClick={(e) => e.stopPropagation()}\r\n                        >\r\n                            <div className=\"p-6 md:p-8 border-b border-white/10 flex justify-between items-center relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 w-64 h-64 bg-[#BA170D] blur-[120px] opacity-[0.1]\" />\r\n                                <div className=\"relative z-10\">\r\n                                    <h3 className=\"text-xl md:text-2xl font-black font-unbounded text-white uppercase tracking-tighter leading-tight\">{event.title}</h3>\r\n                                    <p className=\"text-[#BA170D] text-[10px] font-black uppercase tracking-[0.4em] mt-2\">The Guidelines</p>\r\n                                </div>\r\n                                <button onClick={() => setShowRules(false)} className=\"p-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all border border-white/10 text-white\"><X size={20} /></button>\r\n                            </div>\r\n                            <div className=\"p-6 md:p-8 overflow-y-auto space-y-6 custom-scrollbar relative z-10\">\r\n                                <div className=\"grid grid-cols-1 gap-5\">\r\n                                    {event.rules.map((rule, idx) => (\r\n                                        <div key={idx} className=\"flex gap-4 group/rule\">\r\n                                            <div className=\"w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-[#BA170D] font-black text-sm shrink-0\">0{idx + 1}</div>\r\n                                            <p className=\"text-[11px] text-gray-200 font-bold leading-relaxed pt-2.5 uppercase tracking-tight group-hover:text-white transition-colors\">{rule}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"p-6 bg-white/1 border-t border-white/10\">\r\n                                <button onClick={() => setShowRules(false)} className=\"w-full py-4 bg-white text-black rounded-2xl font-black text-[10px] uppercase tracking-[0.4em] hover:bg-[#BA170D] hover:text-white transition-all\">\r\n                                    Understand\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\EventsGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'y' is assigned a value but never used.","line":17,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6977,6980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6977,6980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7223,7226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7223,7226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, useScroll, useTransform, useMotionTemplate, useMotionValue } from \"framer-motion\";\r\nimport { useRef } from \"react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { cn, slugify } from \"@/lib/utils\";\r\nimport { categories } from \"@/data/constant\";\r\n\r\nexport default function EventsGrid() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const { scrollYProgress } = useScroll({\r\n    target: containerRef,\r\n    offset: [\"start end\", \"end start\"]\r\n  });\r\n\r\n  const y = useTransform(scrollYProgress, [0, 1], [100, -100]);\r\n  const heroParallax = useTransform(scrollYProgress, [0, 0.5], [0, 100]);\r\n\r\n  return (\r\n    <div id=\"events\" ref={containerRef} className=\"relative py-24 px-6 md:px-12 bg-[#0A0A0A] overflow-hidden\">\r\n        \r\n       {/* Background Grid */}\r\n       <div className=\"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-size-[40px_40px] [mask-image:radial-gradient(ellipse_60%_60%_at_50%_50%,#000_70%,transparent_100%)]pointer-events-none\"></div>\r\n\r\n       <div className=\"max-w-7xl mx-auto relative z-10\">\r\n         <motion.div \r\n           initial={{ opacity: 0, y: 50 }}\r\n           whileInView={{ opacity: 1, y: 0 }}\r\n           viewport={{ once: true }}\r\n           transition={{ duration: 0.8 }}\r\n           className=\"text-center mb-20\"\r\n         >\r\n           <h2 className=\"text-4xl md:text-7xl font-bold font-unbounded mb-6 text-white tracking-tighter\">\r\n             THE EVENT LINEUP\r\n           </h2>\r\n           <p className=\"text-gray-400 max-w-2xl mx-auto text-lg\">\r\n             Witness the best talent compete for glory across music, dance, and arts.\r\n           </p>\r\n         </motion.div>\r\n\r\n         {/* --- Featured Event: AROHA (Moved from Grid by User Request) --- */}\r\n         <div className=\"mb-32 relative\">\r\n              <div className=\"flex items-center gap-4 mb-8 justify-center\">\r\n                 <span className=\"h-px w-12 bg-[#BA170D]\"></span>\r\n                 <h3 className=\"text-xl font-mono text-[#BA170D] uppercase tracking-[0.3em]\">\r\n                   Flagship Event\r\n                 </h3>\r\n                 <span className=\"h-px w-12 bg-[#BA170D]\"></span>\r\n              </div>\r\n\r\n              <motion.div \r\n                initial={{ opacity: 0, scale: 0.95 }}\r\n                whileInView={{ opacity: 1, scale: 1 }}\r\n                viewport={{ once: true, margin: \"-100px\" }}\r\n                transition={{ duration: 0.8 }}\r\n                className=\"relative rounded-4xl overflow-hidden border border-white/10 bg-[#0F0F0F] min-h-[500px] md:h-[600px] shadow-[0_0_50px_rgba(186,23,13,0.1)] group flex flex-col justify-end md:block\"\r\n              >\r\n                 \r\n                 {/* Background Glow */}\r\n                 <div className=\"absolute top-0 right-0 w-full h-full bg-linear-to-bl from-[#BA170D]/20 via-transparent to-transparent opacity-50\"></div>\r\n                 <div className=\"absolute bottom-0 left-0 w-full h-1/2 bg-linear-to-t from-black to-transparent z-10\"></div>\r\n \r\n                 {/* Parallax Image - Positioned Absolute */}\r\n                 <div className=\"absolute inset-0 md:left-[30%] overflow-hidden\">\r\n                     <motion.div \r\n                         style={{ y: heroParallax }}\r\n                         className=\"absolute inset-0 -top-[20%] -bottom-[20%]\"\r\n                     >\r\n                          {/* Backlight for Dancer */}\r\n                          <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-[#BA170D]/10 rounded-full blur-[100px]\"></div>\r\n \r\n                          <Image \r\n                             src=\"/dance.png\"\r\n                             alt=\"Aroha Dancer\"\r\n                             fill\r\n                             className=\"object-contain md:object-cover object-center opacity-90 group-hover:scale-105 transition-transform duration-1000 ease-out\"\r\n                         />\r\n                     </motion.div>\r\n                     \r\n                     {/* Horizontal Gradient Mask (Left to Right) for blending text */}\r\n                     <div className=\"absolute inset-0 bg-linear-to-r from-[#0F0F0F] via-[#0F0F0F]/80 to-transparent z-10 hidden md:block\"></div>\r\n                     {/* Vertical Gradient Mask (Bottom to Top) for mobile */}\r\n                     <div className=\"absolute inset-0 bg-linear-to-t from-[#0F0F0F] via-[#0F0F0F]/50 to-transparent z-10 md:hidden\"></div>\r\n                 </div>\r\n \r\n                 {/* Text Content */}\r\n                 <div className=\"relative z-20 p-8 md:p-16 w-full md:w-1/2 h-full flex flex-col justify-end md:justify-center\">\r\n                      <div className=\"mb-4\">\r\n                         <span className=\"px-4 py-2 border border-[#BA170D] bg-[#BA170D]/10 text-[#BA170D] rounded-full uppercase text-xs font-bold tracking-wider mb-4 inline-block\">\r\n                             Main Stage Event\r\n                         </span>\r\n                      </div>\r\n                      <h2 className=\"text-6xl md:text-8xl lg:text-9xl font-black font-unbounded text-white mb-6 uppercase tracking-tighter drop-shadow-2xl leading-none\">\r\n                         AROHA\r\n                      </h2>\r\n                     <p className=\"text-gray-300 text-lg md:text-xl leading-relaxed mb-8 drop-shadow-md\">\r\n                        The heartbeat of Jhalak. A fusion of rhythm, grace, and energy where the best dancers collide.\r\n                     </p>\r\n                     \r\n                     <div className=\"flex flex-wrap gap-3\">\r\n                        {[\"Group Dance\", \"Fusion\", \"Battle\"].map((tag) => (\r\n                            <span key={tag} className=\"px-4 py-2 bg-white/5 border border-white/10 text-gray-300 rounded-full text-xs font-bold tracking-wider hover:bg-white/10 transition-colors cursor-default\">\r\n                                {tag}\r\n                            </span>\r\n                        ))}\r\n                     </div>\r\n                </div>\r\n             </motion.div>\r\n        </div>\r\n\r\n        {/* --- Competitions Grid --- */}\r\n        {categories.filter(c => c.title !== \"Flagship Event\").map((category, catIndex) => (\r\n          <div key={catIndex} className=\"mb-24 last:mb-0\">\r\n             <div className=\"flex items-center gap-4 mb-10\">\r\n                <span className=\"h-px flex-1 bg-linear-to-r from-transparent to-[#BA170D]/50\"></span>\r\n                <h3 className=\"text-xl md:text-2xl font-mono text-[#BA170D] uppercase trackingwidest\">\r\n                  {category.title}\r\n                </h3>\r\n                <span className=\"h-px flex-1 bg-linear-to-l from-transparent to-[#BA170D]/50\"></span>\r\n             </div>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-[300px]\">\r\n              {category.items.map((item: any, index: number) => (\r\n                <EventCard key={index} item={item} index={index} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EventCard({ item, index }: { item: any, index: number }) {\r\n  const x = useMotionValue(0);\r\n  const y = useMotionValue(0);\r\n\r\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement>) {\r\n    const { left, top } = e.currentTarget.getBoundingClientRect();\r\n    x.set(e.clientX - left);\r\n    y.set(e.clientY - top);\r\n  }\r\n\r\n  const cardContent = (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      whileInView={{ opacity: 1, scale: 1 }}\r\n      viewport={{ once: true, margin: \"-50px\" }}\r\n      transition={{ duration: 0.5, delay: index * 0.05 }}\r\n      onMouseMove={handleMouseMove}\r\n      className={cn(\r\n        \"group relative rounded-3xl overflow-hidden border border-white/5 bg-white/5 hover:border-[#BA170D]/20 transition-colors duration-500 h-full\",\r\n        item.cols || \"col-span-1\"\r\n      )}\r\n    >\r\n        {/* Spotlight */}\r\n        <motion.div\r\n            className=\"pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100\"\r\n            style={{\r\n            background: useMotionTemplate`\r\n                radial-gradient(\r\n                600px circle at ${x}px ${y}px,\r\n                rgba(186, 23, 13, 0.06),\r\n                transparent 40%\r\n                )\r\n            `,\r\n            }}\r\n        />\r\n\r\n        {/* Gradient Background */}\r\n        <div className={`absolute inset-0 bg-linear-to-br ${item.gradient} opacity-20 group-hover:opacity-40 transition-opacity duration-500`} />\r\n        \r\n        {/* Content */}\r\n        <div className=\"absolute inset-0 p-8 flex flex-col justify-end z-10\">\r\n            <div className=\"transform transition-transform duration-300 group-hover:-translate-y-2\">\r\n                <div className=\"flex gap-2 mb-4 flex-wrap\">\r\n                    {item.tags.map((tag: string, i: number) => (\r\n                        <span key={i} className=\"text-[10px] font-bold uppercase tracking-wider px-3 py-1 rounded-full bg-white/10 backdrop-blur-md text-[#BA170D] border border-[#BA170D]/20\">\r\n                            {tag}\r\n                        </span>\r\n                    ))}\r\n                </div>\r\n                \r\n                <h3 className={cn(\r\n                    \"font-bold text-white mb-2 leading-none\",\r\n                    item.cols ? \"text-5xl md:text-7xl\" : \"text-2xl md:text-3xl\"\r\n                )}>\r\n                    {item.title}\r\n                </h3>\r\n                \r\n                {item.description && (\r\n                    <p className=\"text-gray-300 text-sm md:text-lg max-w-md mt-4 line-clamp-3\">\r\n                        {item.description}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Read More Icon */}\r\n            <div className=\"absolute top-6 right-6 w-10 h-10 rounded-full border border-white/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:rotate-45\">\r\n                <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M1 11L11 1M11 1H2M11 1V10\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                </svg>\r\n            </div>\r\n        </div>\r\n\r\n        {/* Decorative Number */}\r\n        <div className=\"absolute -top-10 -right-4 text-[120px] font-black text-white/2 select-none pointer-events-none group-hover:text-white/4 transition-colors duration-500 font-mono\">\r\n            {String(index + 1).padStart(2, '0')}\r\n        </div>\r\n    </motion.div>\r\n  );\r\n\r\n  return (\r\n    <Link href={`/events/${slugify(item.title)}`} className={cn(\"block h-full store-card-link\", item.cols)}>\r\n        {cardContent}\r\n    </Link>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Footer.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":279,"column":19,"nodeType":"JSXOpeningElement","endLine":283,"endColumn":21},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":305,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13503,13539],"text":"\r\n            JHALAK &apos;26\r\n          "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13503,13539],"text":"\r\n            JHALAK &lsquo;26\r\n          "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13503,13539],"text":"\r\n            JHALAK &#39;26\r\n          "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13503,13539],"text":"\r\n            JHALAK &rsquo;26\r\n          "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef, useLayoutEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default function Footer() {\r\n  const footerRef = useRef<HTMLDivElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const titleRef = useRef<HTMLHeadingElement>(null);\r\n\r\n  useLayoutEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      // Fade in main container\r\n      gsap.from(containerRef.current, {\r\n        scrollTrigger: {\r\n          trigger: footerRef.current,\r\n          start: \"top 80%\",\r\n        },\r\n        y: 100,\r\n        opacity: 0,\r\n        duration: 1,\r\n        ease: \"power3.out\",\r\n      });\r\n\r\n      // Stagger links\r\n      gsap.from(\".footer-link-group\", {\r\n        scrollTrigger: {\r\n          trigger: footerRef.current,\r\n          start: \"top 70%\",\r\n        },\r\n        y: 30,\r\n        opacity: 0,\r\n        duration: 0.8,\r\n        stagger: 0.1,\r\n        ease: \"power2.out\",\r\n      });\r\n\r\n      // Big Title Reveal\r\n      gsap.from(titleRef.current, {\r\n        scrollTrigger: {\r\n          trigger: footerRef.current,\r\n          start: \"top 70%\",\r\n        },\r\n        yPercent: 50,\r\n        opacity: 0,\r\n        duration: 1.5,\r\n        ease: \"expo.out\",\r\n      });\r\n    }, footerRef);\r\n    return () => ctx.revert();\r\n  }, []);\r\n\r\n  return (\r\n    <footer\r\n      ref={footerRef}\r\n      className=\"relative bg-[#0A0A0A] text-white pt-32 pb-12 px-6 overflow-hidden border-t border-white/5 selection:bg-[#BA170D] selection:text-white\"\r\n    >\r\n      {/* Background Ambience */}\r\n      <div className=\"absolute inset-0 pointer-events-none\">\r\n        <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-[60vw] h-[400px] bg-[#BA170D]/5 blur-[120px] rounded-full\"></div>\r\n        <div className=\"absolute bottom-[-20%] right-[-10%] w-[50vw] h-[50vw] bg-blue-900/5 rounded-full blur-[150px] mix-blend-screen\"></div>\r\n        <div className=\"absolute inset-0 bg-[url('/noise.svg')] opacity-[0.04]\"></div>\r\n      </div>\r\n\r\n      {/* Grid Pattern */}\r\n      <div className=\"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-size-[60px_60px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)] pointer-events-none opacity-30\"></div>\r\n\r\n      <div ref={containerRef} className=\"container mx-auto relative z-10\">\r\n        {/* Top Section */}\r\n        <div className=\"flex flex-col lg:flex-row justify-between items-start gap-16 mb-24\">\r\n          {/* Brand / CTA */}\r\n          <div className=\"max-w-xl space-y-8\">\r\n            <h3 className=\"text-4xl md:text-6xl font-light leading-tight tracking-tight\">\r\n              Ready to{\" \"}\r\n              <span className=\"text-[#BA170D] font-cinzel font-bold\">\r\n                ignite\r\n              </span>{\" \"}\r\n              <br />\r\n              the stage?\r\n            </h3>\r\n            <Link\r\n              href=\"https://www.graburpass.com/e/S6wHPW\"\r\n              target=\"_blank\"\r\n              className=\"inline-flex items-center gap-4 group\"\r\n            >\r\n              <div className=\"w-16 h-16 rounded-full border border-white/20 flex items-center justify-center group-hover:bg-[#BA170D] group-hover:border-[#BA170D] transition-all duration-300 bg-white/5 backdrop-blur-sm shadow-lg group-hover:shadow-[#BA170D]/20\">\r\n                <svg\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  className=\"transform group-hover:-rotate-45 transition-transform duration-300\"\r\n                >\r\n                  <path\r\n                    d=\"M5 12H19\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"1.5\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                  <path\r\n                    d=\"M12 5L19 12L12 19\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"1.5\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <span className=\"text-xl tracking-widest uppercase font-light group-hover:text-[#BA170D] transition-all duration-300\">\r\n                Register Now\r\n              </span>\r\n            </Link>\r\n          </div>\r\n\r\n          {/* Links Columns */}\r\n          <div className=\"flex-1 w-full lg:w-auto flex flex-wrap justify-start lg:justify-end gap-16 lg:gap-32\">\r\n            {/* Explore */}\r\n            <div className=\"footer-link-group flex flex-col space-y-6\">\r\n              <h4 className=\"text-gray-500 uppercase tracking-widest text-xs font-bold mb-2\">\r\n                Explore\r\n              </h4>\r\n              <div className=\"flex flex-col space-y-4\">\r\n                {[\"Home\", \"Events\", \"Schedule\", \"Sponsors\"].map((item) => (\r\n                  <Link\r\n                    key={item}\r\n                    href=\"#\"\r\n                    className=\"text-gray-300 hover:text-white transition-colors w-fit text-sm tracking-wide hover:translate-x-1 duration-300 inline-block\"\r\n                  >\r\n                    {item}\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Socials */}\r\n            <div className=\"footer-link-group flex flex-col space-y-6\">\r\n              <h4 className=\"text-gray-500 uppercase tracking-widest text-xs font-bold mb-2\">\r\n                Follow Us\r\n              </h4>\r\n              <div className=\"flex flex-row gap-4\">\r\n                <Link\r\n                  href=\"https://www.instagram.com/jhalakccet?igsh=eHE0OGxwMnl0aDI4\"\r\n                  target=\"_blank\"\r\n                  className=\"w-10 h-10 rounded-full border border-white/20 flex items-center justify-center text-gray-300 hover:text-[#BA170D] hover:border-[#BA170D] transition-all duration-300 hover:scale-110\"\r\n                  title=\"Instagram\"\r\n                >\r\n                  <svg\r\n                    width=\"20\"\r\n                    height=\"20\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"1.5\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  >\r\n                    <rect\r\n                      x=\"2\"\r\n                      y=\"2\"\r\n                      width=\"20\"\r\n                      height=\"20\"\r\n                      rx=\"5\"\r\n                      ry=\"5\"\r\n                    ></rect>\r\n                    <path d=\"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z\"></path>\r\n                    <line x1=\"17.5\" y1=\"6.5\" x2=\"17.51\" y2=\"6.5\"></line>\r\n                  </svg>\r\n                </Link>\r\n                <Link\r\n                  href=\"#\"\r\n                  className=\"w-10 h-10 rounded-full border border-white/20 flex items-center justify-center text-gray-300 hover:text-[#BA170D] hover:border-[#BA170D] transition-all duration-300 hover:scale-110\"\r\n                  title=\"YouTube\"\r\n                >\r\n                  <svg\r\n                    width=\"20\"\r\n                    height=\"20\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"1.5\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  >\r\n                    <path d=\"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z\"></path>\r\n                    <polygon points=\"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02\"></polygon>\r\n                  </svg>\r\n                </Link>\r\n                <Link\r\n                  href=\"https://www.carmelcet.in\"\r\n                  target=\"_blank\"\r\n                  className=\"w-10 h-10 rounded-full border border-white/20 flex items-center justify-center text-gray-300 hover:text-[#BA170D] hover:border-[#BA170D] transition-all duration-300 hover:scale-110\"\r\n                  title=\"College Website\"\r\n                >\r\n                  <svg\r\n                    width=\"20\"\r\n                    height=\"20\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"1.5\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                    <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\r\n                    <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\"></path>\r\n                  </svg>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Contact - Added for balance */}\r\n            <div className=\"footer-link-group flex flex-col space-y-6\">\r\n              <h4 className=\"text-gray-500 uppercase tracking-widest text-xs font-bold mb-2\">\r\n                Contact\r\n              </h4>\r\n              <div className=\"flex flex-col space-y-4\">\r\n                <a\r\n                  href=\"mailto:jhalak@carmelcet.in\"\r\n                  className=\"text-gray-300 hover:text-[#BA170D] transition-colors text-sm flex items-center gap-2\"\r\n                >\r\n                  <svg\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"1.5\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  >\r\n                    <path d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\"></path>\r\n                    <polyline points=\"22,6 12,13 2,6\"></polyline>\r\n                  </svg>\r\n                  jhalak@carmelcet.in\r\n                </a>\r\n                <div className=\"text-gray-300 text-sm flex flex-col gap-1\">\r\n                  <span className=\"text-xs text-gray-500 font-bold uppercase tracking-wider\">\r\n                    Steeve\r\n                  </span>\r\n                  <a\r\n                    href=\"tel:+916235834190\"\r\n                    className=\"hover:text-[#BA170D] transition-colors flex items-center gap-2\"\r\n                  >\r\n                    <svg\r\n                      width=\"16\"\r\n                      height=\"16\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"1.5\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    >\r\n                      <path d=\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.12 2h3a2 2 0 0 1 2 1.72 12.05 12.05 0 0 0 .75 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.03 12.03 0 0 0 2.81.74A2 2 0 0 1 22 16.92z\"></path>\r\n                    </svg>\r\n                    +91 62358 34190\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Ticketing Partner */}\r\n            <div className=\"footer-link-group flex flex-col space-y-6\">\r\n              <h4 className=\"text-gray-500 uppercase tracking-widest text-xs font-bold mb-2\">\r\n                Ticketing Partner\r\n              </h4>\r\n              <Link\r\n                href=\"https://www.graburpass.com\"\r\n                target=\"_blank\"\r\n                className=\"group flex flex-col gap-3 items-start\"\r\n              >\r\n                <div className=\"bg-white/5 p-3 rounded-lg border border-white/10 group-hover:border-[#BA170D]/50 transition-colors\">\r\n                  <img\r\n                    src=\"/brand.png\"\r\n                    alt=\"GrabUrPass\"\r\n                    className=\"h-8 w-auto opacity-80 group-hover:opacity-100 transition-opacity\"\r\n                  />\r\n                </div>\r\n                <span className=\"text-xs text-gray-400 group-hover:text-white transition-colors\">\r\n                  www.graburpass.com\r\n                </span>\r\n                <span className=\"text-[10px] text-[#BA170D] font-bold uppercase tracking-wider bg-[#BA170D]/10 px-2 py-1 rounded-full border border-[#BA170D]/20\">\r\n                  Official Partner\r\n                </span>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Divider */}\r\n        <div className=\"w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent mb-12\"></div>\r\n\r\n        {/* Bottom Section: Massive Text */}\r\n        <div className=\"relative overflow-hidden mb-8 group\">\r\n          <h1\r\n            ref={titleRef}\r\n            className=\"text-[12vw] md:text-[14vw] font-cinzel font-black leading-none text-center tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-[#333] to-transparent select-none pointer-events-none opacity-50 group-hover:opacity-70 transition-opacity duration-700\"\r\n          >\r\n            JHALAK '26\r\n          </h1>\r\n        </div>\r\n\r\n        {/* Bottom Bar */}\r\n        <div className=\"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-6 text-xs md:text-sm text-gray-500 uppercase tracking-widest font-mono\">\r\n          <span className=\"order-2 md:order-1\">┬⌐ 2026 Jhalak CCET</span>\r\n\r\n          <button\r\n            onClick={() => window.scrollTo({ top: 0, behavior: \"smooth\" })}\r\n            className=\"order-1 md:order-2 hover:text-[#BA170D] transition-colors cursor-pointer flex items-center gap-2 group/btn\"\r\n          >\r\n            Back to Top\r\n            <div className=\"p-1 rounded-full border border-white/10 group-hover/btn:border-[#BA170D] transition-colors\">\r\n              <svg\r\n                width=\"12\"\r\n                height=\"12\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                className=\"group-hover/btn:-translate-y-0.5 transition-transform\"\r\n              >\r\n                <path d=\"M12 19V5M5 12l7-7 7 7\" />\r\n              </svg>\r\n            </div>\r\n          </button>\r\n\r\n          <span className=\"order-3\">\r\n            Made with <span className=\"text-[#BA170D] animate-pulse\">ΓÖÑ</span> by{\" \"}\r\n            <Link\r\n              href=\"/tech-team\"\r\n              className=\"font-bold hover:text-[#BA170D] transition-colors underline decoration-[#BA170D] decoration-2 underline-offset-4\"\r\n            >\r\n              Tech Team\r\n            </Link>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:240:31\n  238 |             transition={{ \n  239 |                 repeat: Infinity, \n> 240 |                 duration: 5 + Math.random() * 5, \n      |                               ^^^^^^^^^^^^^ Cannot call impure function\n  241 |                 ease: \"easeInOut\",\n  242 |                 delay: Math.random() * 5 \n  243 |             }}","line":240,"column":31,"nodeType":null,"endLine":240,"endColumn":44},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:242:24\n  240 |                 duration: 5 + Math.random() * 5, \n  241 |                 ease: \"easeInOut\",\n> 242 |                 delay: Math.random() * 5 \n      |                        ^^^^^^^^^^^^^ Cannot call impure function\n  243 |             }}\n  244 |             className=\"absolute rounded-full blur-[1px]\"\n  245 |             style={{","line":242,"column":24,"nodeType":null,"endLine":242,"endColumn":37},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:246:28\n  244 |             className=\"absolute rounded-full blur-[1px]\"\n  245 |             style={{\n> 246 |                 width: 2 + Math.random() * 3,\n      |                            ^^^^^^^^^^^^^ Cannot call impure function\n  247 |                 height: 2 + Math.random() * 3,\n  248 |                 backgroundColor: Math.random() > 0.5 ? '#FFD700' : '#FFFFFF',\n  249 |                 top: `${Math.random() * 100}%`,","line":246,"column":28,"nodeType":null,"endLine":246,"endColumn":41},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:247:29\n  245 |             style={{\n  246 |                 width: 2 + Math.random() * 3,\n> 247 |                 height: 2 + Math.random() * 3,\n      |                             ^^^^^^^^^^^^^ Cannot call impure function\n  248 |                 backgroundColor: Math.random() > 0.5 ? '#FFD700' : '#FFFFFF',\n  249 |                 top: `${Math.random() * 100}%`,\n  250 |                 left: `${Math.random() * 100}%`,","line":247,"column":29,"nodeType":null,"endLine":247,"endColumn":42},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:248:34\n  246 |                 width: 2 + Math.random() * 3,\n  247 |                 height: 2 + Math.random() * 3,\n> 248 |                 backgroundColor: Math.random() > 0.5 ? '#FFD700' : '#FFFFFF',\n      |                                  ^^^^^^^^^^^^^ Cannot call impure function\n  249 |                 top: `${Math.random() * 100}%`,\n  250 |                 left: `${Math.random() * 100}%`,\n  251 |                 willChange: \"transform, opacity\"","line":248,"column":34,"nodeType":null,"endLine":248,"endColumn":47},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:249:25\n  247 |                 height: 2 + Math.random() * 3,\n  248 |                 backgroundColor: Math.random() > 0.5 ? '#FFD700' : '#FFFFFF',\n> 249 |                 top: `${Math.random() * 100}%`,\n      |                         ^^^^^^^^^^^^^ Cannot call impure function\n  250 |                 left: `${Math.random() * 100}%`,\n  251 |                 willChange: \"transform, opacity\"\n  252 |             }}","line":249,"column":25,"nodeType":null,"endLine":249,"endColumn":38},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero copy.tsx:250:26\n  248 |                 backgroundColor: Math.random() > 0.5 ? '#FFD700' : '#FFFFFF',\n  249 |                 top: `${Math.random() * 100}%`,\n> 250 |                 left: `${Math.random() * 100}%`,\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  251 |                 willChange: \"transform, opacity\"\n  252 |             }}\n  253 |         />","line":250,"column":26,"nodeType":null,"endLine":250,"endColumn":39}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, useScroll, useTransform, useMotionTemplate, useMotionValue } from \"framer-motion\";\r\nimport Image from \"next/image\";\r\nimport { useRef, useEffect, MouseEvent, useState } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\nimport Link from \"next/link\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default function Hero({ startAnimation = true }: { startAnimation?: boolean }) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const textRef = useRef<HTMLHeadingElement>(null);\r\n\r\n  const { scrollY } = useScroll();\r\n  const y1 = useTransform(scrollY, [0, 500], [0, 200]);\r\n  \r\n  // Mouse move effect for spotlight\r\n  const mouseX = useMotionValue(0);\r\n  const mouseY = useMotionValue(0);\r\n\r\n  function handleMouseMove({ currentTarget, clientX, clientY }: MouseEvent) {\r\n    const { left, top } = currentTarget.getBoundingClientRect();\r\n    mouseX.set(clientX - left);\r\n    mouseY.set(clientY - top);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!startAnimation) return;\r\n    \r\n    const ctx = gsap.context(() => {\r\n      const tl = gsap.timeline();\r\n      \r\n      gsap.set(textRef.current, { y: 100, opacity: 0, scale: 0.9 });\r\n      \r\n      tl.to(textRef.current, {\r\n        y: 0,\r\n        opacity: 1,\r\n        scale: 1,\r\n        duration: 1.5,\r\n        ease: \"power3.out\"\r\n      });\r\n      \r\n    }, containerRef);\r\n\r\n    return () => ctx.revert();\r\n  }, [startAnimation]);\r\n\r\n  return (\r\n    <div \r\n      ref={containerRef} \r\n      onMouseMove={handleMouseMove}\r\n      className=\"relative h-dvh w-full flex items-center justify-center overflow-hidden bg-[#050505] selection:bg-[#FFD700] selection:text-black\"\r\n    >\r\n      \r\n      {/* Interactive Spotlight (User Controlled) */}\r\n      <motion.div\r\n        className=\"pointer-events-none absolute -inset-px opacity-50 z-10\"\r\n        style={{\r\n          background: useMotionTemplate`\r\n            radial-gradient(\r\n              800px circle at ${mouseX}px ${mouseY}px,\r\n              rgba(255, 215, 0, 0.05),\r\n              transparent 80%\r\n            )\r\n          `,\r\n        }}\r\n      />\r\n\r\n      {/* Automated Stage Lights (Ambient) */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n         {/* Left Blue Light */}\r\n         <motion.div \r\n            animate={{ \r\n                opacity: [0.3, 0.6, 0.3],\r\n                rotate: [-20, -10, -20]\r\n            }}\r\n            transition={{ duration: 8, repeat: Infinity, ease: \"easeInOut\" }}\r\n            className=\"absolute top-[-20%] left-[-10%] w-[80vw] h-[150vh] bg-linear-to-br from-blue-900/20 via-transparent to-transparent blur-3xl md:blur-[100px] transform origin-top-left will-change-transform\"\r\n         />\r\n         {/* Right Red Light */}\r\n         <motion.div \r\n            animate={{ \r\n                opacity: [0.3, 0.6, 0.3],\r\n                rotate: [20, 10, 20]\r\n            }}\r\n            transition={{ duration: 7, repeat: Infinity, ease: \"easeInOut\", delay: 1 }}\r\n            className=\"absolute top-[-20%] right-[-10%] w-[80vw] h-[150vh] bg-linear-to-bl from-[#BA170D]/20 via-transparent to-transparent blur-3xl md:blur-[100px] transform origin-top-right will-change-transform\"\r\n         />\r\n      </div>\r\n\r\n      {/* Noise Texture - Reduced opacity for mobile performance */}\r\n      <div className=\"absolute inset-0 z-0 opacity-10 md:opacity-20 pointer-events-none mix-blend-overlay\"\r\n           style={{ backgroundImage: 'url(\"data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E\")' }}>\r\n      </div>\r\n\r\n      {/* Content Container */}\r\n      <div className=\"relative z-20 flex flex-col items-center justify-center text-center px-4 w-full h-full\">\r\n          \r\n          {/* Animated Logo */}\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -50, rotateX: 20 }}\r\n            animate={{ opacity: 1, y: 0, rotateX: 0 }}\r\n            transition={{ duration: 1.5, ease: \"easeOut\" }}\r\n            className=\"relative w-32 h-32 md:w-40 md:h-40 mb-6 md:mb-8 perspective-1000\"\r\n          >\r\n             <motion.div\r\n                animate={{ \r\n                    y: [-10, 10], \r\n                    rotate: [-5, 5],\r\n                    filter: [\"brightness(1)\", \"brightness(1.2)\", \"brightness(1)\"] \r\n                }}\r\n                transition={{ \r\n                    repeat: Infinity, \r\n                    repeatType: \"reverse\", \r\n                    duration: 4, \r\n                    ease: \"easeInOut\" \r\n                }}\r\n                className=\"relative w-full h-full will-change-transform\"\r\n             >\r\n                {/* Glow behind logo */}\r\n                <div className=\"absolute inset-0 bg-[#FFD700] rounded-full blur-2xl opacity-20 hover:opacity-40 transition-opacity duration-500\"></div>\r\n                \r\n                <Image \r\n                    src=\"/Logo.png\" \r\n                    alt=\"Jhalak Logo\" \r\n                    fill\r\n                    className=\"object-contain drop-shadow-[0_0_20px_rgba(255,215,0,0.3)]\"\r\n                    priority\r\n                    sizes=\"(max-width: 768px) 96px, 128px\"\r\n                />\r\n             </motion.div>\r\n          </motion.div>\r\n\r\n          <div className=\"relative isolate mb-8 w-full max-w-full overflow-hidden\">\r\n            {/* Background Stroke Text (Parallax) */}\r\n            <motion.h1 \r\n                style={{ y: y1 }}\r\n                className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[18vw] md:text-[15vw] font-black font-unbounded tracking-tighter leading-none text-transparent stroke-text opacity-10 blur-sm pointer-events-none select-none whitespace-nowrap will-change-transform\"\r\n            >\r\n                JHALAK\r\n            </motion.h1>\r\n            \r\n            {/* Main Foreground Text */}\r\n            <h1 ref={textRef} className=\"relative text-[15vw] md:text-[12vw] font-black font-unbounded tracking-tighter leading-none text-white mix-blend-normal drop-shadow-[0_0_30px_rgba(255,215,0,0.2)] md:drop-shadow-[0_0_50px_rgba(255,215,0,0.3)]\">\r\n                JHALAK\r\n                <span className=\"text-[#BA170D] text-[15vw] md:text-[12vw] leading-none\">.</span>\r\n            </h1>\r\n          </div>\r\n          \r\n          <motion.div\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 0.8 }}\r\n            className=\"flex flex-col items-center gap-6 w-full px-4\"\r\n          >\r\n            <p className=\"text-lg md:text-2xl text-gray-400 font-light tracking-[0.2em] uppercase max-w-2xl text-center leading-relaxed\">\r\n              The Stage Is Set <span className=\"text-[#FFD700] px-2 inline-block\">ΓÇó</span> <span className=\"nowrap\">The Rhythm Awaits</span>\r\n            </p>\r\n\r\n            <div className=\"h-px w-24 bg-linear-to-r from-transparent via-white/30 to-transparent my-4\"></div>\r\n\r\n            <div className=\"flex flex-col sm:flex-row items-center gap-4 sm:gap-6 mt-2\">\r\n                <Link href=\"#events\"\r\n                 className=\"group relative px-8 py-3 bg-transparent overflow-hidden rounded-full border border-white/20 hover:border-[#FFD700]/50 transition-colors duration-300 active:scale-95 touch-manipulation min-w-[200px] flex items-center justify-center\">\r\n                    <div className=\"absolute inset-0 w-0 bg-[#FFD700] transition-all duration-250 ease-out group-hover:w-full opacity-10\"></div>\r\n                    <span className=\"relative text-white font-medium tracking-wider group-hover:text-[#FFD700] transition-colors\">Explore The Lineup</span>\r\n                </Link>\r\n\r\n                <Link href=\"/register\"\r\n                 className=\"relative px-8 py-3 bg-[#FFD700] rounded-full text-black font-bold tracking-wider hover:bg-[#FFC000] hover:shadow-[0_0_20px_rgba(255,215,0,0.4)] transition-all duration-300 active:scale-95 touch-manipulation min-w-[200px] flex items-center justify-center transform hover:-translate-y-1\">\r\n                    Register Now\r\n                </Link>\r\n            </div>\r\n          </motion.div>\r\n      </div>\r\n      \r\n      <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n        <FloatingParticles />\r\n      </div>\r\n\r\n       {/* Scroll Indicator */}\r\n       <motion.div \r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ delay: 2.5, duration: 1 }}\r\n        className=\"absolute bottom-6 md:bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 z-20\"\r\n       >\r\n         <div className=\"w-px h-12 md:h-16 bg-linear-to-b from-zinc-800 to-transparent relative overflow-hidden\">\r\n             <motion.div \r\n                animate={{ y: [-16, 16] }}\r\n                transition={{ repeat: Infinity, duration: 1.5, ease: \"easeInOut\" }}\r\n                className=\"absolute top-0 w-full h-1/2 bg-[#FFD700]\" \r\n             />\r\n         </div>\r\n       </motion.div>\r\n       \r\n       <style jsx global>{`\r\n        .stroke-text {\r\n            -webkit-text-stroke: 1px rgba(255, 255, 255, 0.1);\r\n            color: transparent;\r\n        }\r\n       `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FloatingParticles() {\r\n  const [mounted, setMounted] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    setIsMobile(window.innerWidth < 768);\r\n    \r\n    // Simple resize handler to update mobile state\r\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  if (!mounted) return null;\r\n\r\n  // Reduce particles on mobile for performance\r\n  const particleCount = isMobile ? 6 : 15;\r\n\r\n  return (\r\n    <>\r\n      {[...Array(particleCount)].map((_, i) => (\r\n        <motion.div \r\n            key={i}\r\n            animate={{ \r\n                y: [0, -100, 0],\r\n                opacity: [0, 0.8, 0],\r\n                scale: [0, 1, 0]\r\n            }}\r\n            transition={{ \r\n                repeat: Infinity, \r\n                duration: 5 + Math.random() * 5, \r\n                ease: \"easeInOut\",\r\n                delay: Math.random() * 5 \r\n            }}\r\n            className=\"absolute rounded-full blur-[1px]\"\r\n            style={{\r\n                width: 2 + Math.random() * 3,\r\n                height: 2 + Math.random() * 3,\r\n                backgroundColor: Math.random() > 0.5 ? '#FFD700' : '#FFFFFF',\r\n                top: `${Math.random() * 100}%`,\r\n                left: `${Math.random() * 100}%`,\r\n                willChange: \"transform, opacity\"\r\n            }}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Hero.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":172,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6373,6374],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6373,6374],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6373,6374],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6373,6374],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":174,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6490,6491],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6490,6491],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6490,6491],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6490,6491],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef, useLayoutEffect, useEffect } from \"react\";\r\nimport Image from \"next/image\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\ninterface HeroProps {\r\n  startAnimation: boolean;\r\n}\r\n\r\nexport default function Hero({ startAnimation }: HeroProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const titleWrapperRef = useRef<HTMLDivElement>(null);\r\n  const imageRef = useRef<HTMLDivElement>(null);\r\n  const subTextRef = useRef<HTMLParagraphElement>(null);\r\n  const decorativeRef = useRef<HTMLDivElement>(null);\r\n  const tlRef = useRef<gsap.core.Timeline | null>(null);\r\n\r\n  useLayoutEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      const tl = gsap.timeline({\r\n        defaults: { ease: \"power3.out\" },\r\n        paused: true,\r\n      });\r\n      tlRef.current = tl;\r\n\r\n      // Initial State Setups\r\n      gsap.set(\".char\", { yPercent: 100, opacity: 0 });\r\n      gsap.set(imageRef.current, {\r\n        scale: 1.1,\r\n        opacity: 0,\r\n        filter: \"blur(10px)\",\r\n      });\r\n      gsap.set(subTextRef.current, { y: 20, opacity: 0 });\r\n\r\n      // Animation Sequence\r\n      tl.to(\".char\", {\r\n        yPercent: 0,\r\n        opacity: 1,\r\n        duration: 1.2,\r\n        stagger: 0.05,\r\n        ease: \"power4.out\",\r\n      })\r\n        .to(\r\n          imageRef.current,\r\n          {\r\n            scale: 1,\r\n            opacity: 1,\r\n            filter: \"blur(0px)\",\r\n            duration: 1.5,\r\n            ease: \"expo.out\",\r\n          },\r\n          \"-=0.8\",\r\n        )\r\n        .to(\r\n          subTextRef.current,\r\n          {\r\n            y: 0,\r\n            opacity: 1,\r\n            duration: 0.8,\r\n          },\r\n          \"-=1\",\r\n        )\r\n        .fromTo(\r\n          decorativeRef.current,\r\n          { opacity: 0, scale: 0.8 },\r\n          { opacity: 1, scale: 1, duration: 1 },\r\n          \"-=1\",\r\n        );\r\n\r\n      // Mouse Movement Parallax Effect\r\n      const handleMouseMove = (e: MouseEvent) => {\r\n        const { clientX, clientY } = e;\r\n        const x = (clientX / window.innerWidth - 0.5) * 20; // -10 to 10\r\n        const y = (clientY / window.innerHeight - 0.5) * 20;\r\n\r\n        gsap.to(imageRef.current, {\r\n          x: x * -1, // Move opposite to mouse\r\n          y: y * -1,\r\n          duration: 1,\r\n          ease: \"power2.out\",\r\n        });\r\n\r\n        gsap.to(titleWrapperRef.current, {\r\n          x: x * 0.5,\r\n          y: y * 0.5,\r\n          duration: 1,\r\n          ease: \"power2.out\",\r\n        });\r\n      };\r\n\r\n      window.addEventListener(\"mousemove\", handleMouseMove);\r\n\r\n      return () => {\r\n        window.removeEventListener(\"mousemove\", handleMouseMove);\r\n      };\r\n    }, containerRef);\r\n\r\n    return () => ctx.revert();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (startAnimation && tlRef.current) {\r\n      tlRef.current.play();\r\n    }\r\n  }, [startAnimation]);\r\n\r\n  const titleText = \"AROHA\";\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"relative h-[100dvh] w-full flex items-center justify-center overflow-hidden bg-[#0A0A0A] selection:bg-[#BA170D] selection:text-white\"\r\n    >\r\n      {/* Background Ambience */}\r\n      <div className=\"absolute inset-0 pointer-events-none\">\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(30,30,30,1)_0%,rgba(10,10,10,1)_100%)]\"></div>\r\n        <div className=\"absolute top-[-20%] left-[-10%] w-[60vw] h-[60vw] bg-[#BA170D]/5 rounded-full blur-[150px] mix-blend-screen animate-pulse duration-[4s]\"></div>\r\n        <div className=\"absolute bottom-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-blue-900/5 rounded-full blur-[120px] mix-blend-screen\"></div>\r\n        <div className=\"absolute inset-0 bg-[url('/noise.svg')] opacity-[0.04]\"></div>\r\n      </div>\r\n\r\n      {/* Grid Pattern */}\r\n      <div className=\"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-size-[60px_60px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)] pointer-events-none\"></div>\r\n\r\n      <div className=\"relative z-10 container mx-auto px-6 h-full flex flex-col justify-center items-center\">\r\n        {/* Main Title */}\r\n        {/* Main Title - Centered & Huge - MOVED TO BACK (z-0) */}\r\n        <div\r\n          ref={titleWrapperRef}\r\n          className=\"absolute inset-0 flex items-start pt-28 md:pt-0 md:items-center justify-center z-0 pointer-events-none\"\r\n        >\r\n          <div className=\"relative flex items-center justify-center\">\r\n            {/* Main Text Layer - High Contrast - Behind Image */}\r\n            <h1 className=\"relative text-[20vw] md:text-[22vw] leading-none font-cinzel font-black text-white bg-clip-text bg-gradient-to-b from-[#ffffff] via-[#e2e2e2] to-[#555555] drop-shadow-[0_0_50px_rgba(255,255,255,0.1)] opacity-30 md:opacity-40\">\r\n              {titleText.split(\"\").map((char, index) => (\r\n                <span key={index} className=\"char inline-block origin-bottom\">\r\n                  {char}\r\n                </span>\r\n              ))}\r\n            </h1>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Hero Image - Interacting with Text - FRONT (z-10) */}\r\n        <div\r\n          ref={imageRef}\r\n          className=\"absolute inset-0 z-10 flex items-end justify-center pointer-events-none\"\r\n        >\r\n          <div className=\"relative w-full h-[55%] md:h-[90%] max-w-[1200px]\">\r\n            <Image\r\n              src=\"/dance.png\"\r\n              alt=\"AROHA Dancer\"\r\n              fill\r\n              className=\"object-contain object-bottom drop-shadow-[0_10px_30px_rgba(0,0,0,0.8)]\"\r\n              priority\r\n            />\r\n            {/* Gradient Overlay at bottom to blend image feet */}\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-40 bg-gradient-to-t from-[#0A0A0A] via-[#0A0A0A]/60 to-transparent\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Subtext - OVERLAY (z-20) */}\r\n        <div className=\"absolute top-[30vh] md:top-auto bottom-auto md:bottom-[20%] z-20 overflow-hidden flex flex-col items-center gap-6\">\r\n          <p\r\n            ref={subTextRef}\r\n            className=\"text-white text-sm md:text-xl tracking-[0.4em] font-light uppercase text-center drop-shadow-md px-4\"\r\n          >\r\n            <span className=\"text-[#BA170D] font-bold text-lg\">\"</span> Unleash\r\n            the Rhythm Within{\" \"}\r\n            <span className=\"text-[#BA170D] font-bold text-lg\">\"</span>\r\n          </p>\r\n\r\n          <a\r\n            href=\"https://www.graburpass.com/e/S6wHPW\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"px-8 py-3 rounded-full border border-[#BA170D] text-white font-cinzel text-sm tracking-widest hover:bg-[#BA170D] hover:text-white transition-all duration-300 backdrop-blur-sm bg-black/30 group flex items-center gap-2\"\r\n          >\r\n            Register Now\r\n            <span className=\"group-hover:translate-x-1 transition-transform\">\r\n              ΓåÆ\r\n            </span>\r\n          </a>\r\n        </div>\r\n\r\n        {/* Scroll Indicator */}\r\n        <div className=\"absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 z-30 opacity-60\">\r\n          <span className=\"text-[10px] uppercase tracking-widest text-white/50\">\r\n            Scroll\r\n          </span>\r\n          <div className=\"w-[1px] h-12 bg-gradient-to-b from-white to-transparent\"></div>\r\n        </div>\r\n\r\n        {/* Decorative Circle */}\r\n        <div\r\n          ref={decorativeRef}\r\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60vw] h-[60vw] md:w-[35vw] md:h-[35vw] border border-white/5 rounded-full z-0 pointer-events-none\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\JhalakEvents.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":244,"column":25,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10965,11044],"text":"\r\n                * Judges&apos; decision will be final and binding.\r\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10965,11044],"text":"\r\n                * Judges&lsquo; decision will be final and binding.\r\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10965,11044],"text":"\r\n                * Judges&#39; decision will be final and binding.\r\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10965,11044],"text":"\r\n                * Judges&rsquo; decision will be final and binding.\r\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef, useLayoutEffect, useState } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\nimport Image from \"next/image\";\r\nimport {\r\n  jhalakEvents,\r\n  EventRule,\r\n  EventCategory,\r\n} from \"@/data/jhalakEventsData\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default function JhalakEvents() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [activeTab, setActiveTab] = useState<EventCategory>(\"onstage\");\r\n  const [selectedEvent, setSelectedEvent] = useState<EventRule | null>(null);\r\n\r\n  const filteredEvents = jhalakEvents.filter(\r\n    (event) => event.category === activeTab,\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      // Section Header Animation\r\n      gsap.from(\".events-header\", {\r\n        scrollTrigger: {\r\n          trigger: containerRef.current,\r\n          start: \"top 80%\",\r\n        },\r\n        y: 50,\r\n        opacity: 0,\r\n        duration: 1,\r\n        ease: \"power3.out\",\r\n      });\r\n\r\n      // Animate lists on tab change\r\n      gsap.fromTo(\r\n        \".event-item\",\r\n        { y: 20, opacity: 0 },\r\n        { y: 0, opacity: 1, stagger: 0.03, duration: 0.4, ease: \"power2.out\" },\r\n      );\r\n    }, containerRef);\r\n    return () => ctx.revert();\r\n  }, [activeTab]);\r\n\r\n  return (\r\n    <section\r\n      ref={containerRef}\r\n      className=\"relative bg-[#0A0A0A] text-white py-24 px-6 md:px-24 min-h-screen border-t border-white/5 overflow-hidden selection:bg-[#BA170D] selection:text-white\"\r\n    >\r\n      {/* Background Overlay */}\r\n      <div className=\"absolute inset-0 pointer-events-none\">\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_bottom_left,rgba(30,30,30,1)_0%,rgba(10,10,10,1)_100%)] opacity-80\"></div>\r\n        <div className=\"absolute top-[20%] right-[-10%] w-[40vw] h-[40vw] bg-[#BA170D]/5 rounded-full blur-[120px] mix-blend-screen\"></div>\r\n        <div className=\"absolute bottom-[10%] left-[-10%] w-[30vw] h-[30vw] bg-blue-900/5 rounded-full blur-[100px] mix-blend-screen\"></div>\r\n        <div className=\"absolute inset-0 bg-[url('/noise.svg')] opacity-[0.04]\"></div>\r\n      </div>\r\n\r\n      {/* Grid Pattern */}\r\n      <div className=\"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-size-[60px_60px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)] pointer-events-none opacity-30\"></div>\r\n\r\n      <div className=\"container mx-auto relative z-10\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row justify-between items-end mb-20 gap-8 events-header\">\r\n          <div>\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <span className=\"w-6 h-[1px] bg-[#BA170D]\"></span>\r\n              <div className=\"flex items-center gap-6\">\r\n                <h2 className=\"text-[#BA170D] font-cinzel font-bold text-lg uppercase tracking-widest\">\r\n                  Internal\r\n                </h2>\r\n                <h2 className=\"text-[#BA170D] font-cinzel font-bold text-lg uppercase tracking-widest\">\r\n                  Events\r\n                </h2>\r\n              </div>\r\n            </div>\r\n\r\n            <p className=\"text-5xl md:text-7xl font-light tracking-tighter text-white/90\">\r\n              JHALAK{\" \"}\r\n              <span className=\"font-serif italic text-white/40\">Originals</span>\r\n            </p>\r\n          </div>\r\n\r\n          {/* Custom Tab Switcher */}\r\n          <div className=\"flex gap-2 p-2 bg-white/5 rounded-full border border-white/10 backdrop-blur-sm overflow-x-auto\">\r\n            {([\"onstage\", \"offstage\", \"online\"] as const).map((tab) => (\r\n              <button\r\n                key={tab}\r\n                onClick={() => setActiveTab(tab)}\r\n                className={`px-8 py-3 rounded-full text-sm uppercase tracking-wider font-bold transition-all duration-300 relative overflow-hidden whitespace-nowrap ${\r\n                  activeTab === tab\r\n                    ? \"text-white shadow-[0_0_20px_rgba(186,23,13,0.3)] bg-[#BA170D]\"\r\n                    : \"text-gray-400 hover:text-white\"\r\n                }`}\r\n              >\r\n                {tab === \"online\"\r\n                  ? \"Online / Special\"\r\n                  : tab === \"onstage\"\r\n                    ? \"On-Stage\"\r\n                    : \"Off-Stage\"}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-12 items-start\">\r\n          {/* Left: Description / Image (Span 5) */}\r\n          <div className=\"lg:col-span-5 relative h-[500px] lg:h-[600px] rounded-sm overflow-hidden border border-white/10 group\">\r\n            {/* Dynamic Background Image */}\r\n            <div className=\"absolute inset-0 transition-opacity duration-700\">\r\n              <Image\r\n                src={activeTab === \"onstage\" ? \"/dance.png\" : \"/ash_bg.png\"}\r\n                alt=\"Event Category\"\r\n                fill\r\n                className=\"object-cover object-center opacity-60 group-hover:scale-105 transition-transform duration-1000\"\r\n              />\r\n            </div>\r\n\r\n            {/* Gradient Overlay */}\r\n            <div className=\"absolute inset-0 bg-gradient-to-t from-[#0A0A0A] via-[#0A0A0A]/40 to-transparent\"></div>\r\n\r\n            <div className=\"absolute bottom-10 left-8 right-8\">\r\n              <div className=\"w-12 h-1 bg-[#BA170D] mb-6\"></div>\r\n              <h3 className=\"text-4xl font-cinzel font-bold mb-4 leading-tight\">\r\n                {activeTab === \"onstage\"\r\n                  ? \"The Spotlight Awaits\"\r\n                  : activeTab === \"offstage\"\r\n                    ? \"Creativity Beyond Boundaries\"\r\n                    : \"Digital Expressions\"}\r\n              </h3>\r\n              <p className=\"text-gray-300 leading-relaxed text-lg font-light\">\r\n                {activeTab === \"onstage\"\r\n                  ? \"Step into the limelight and let your talent shine. From dance to drama, the stage is yours to conquer.\"\r\n                  : activeTab === \"offstage\"\r\n                    ? \"Art, literature, and intellect converge. Express yourself through strokes, words, and ideas.\"\r\n                    : \"Showcase your creativity through the lens. Recreate, innovate, and captivate from anywhere.\"}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right: Event List (Span 7) */}\r\n          <div className=\"lg:col-span-7 bg-white/[0.02] rounded-sm border border-white/5 p-8 md:p-12 relative overflow-hidden h-[600px]\">\r\n            {/* Decorative Number */}\r\n            <div className=\"absolute -top-10 -right-10 text-[200px] font-black text-white/[0.02] pointer-events-none select-none font-cinzel\">\r\n              {activeTab === \"onstage\"\r\n                ? \"01\"\r\n                : activeTab === \"offstage\"\r\n                  ? \"02\"\r\n                  : \"03\"}\r\n            </div>\r\n\r\n            <div className=\"h-full overflow-y-auto custom-scrollbar pr-4\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-4\">\r\n                {filteredEvents.map((event, i) => (\r\n                  <button\r\n                    key={`${activeTab}-${i}`}\r\n                    onClick={() => setSelectedEvent(event)}\r\n                    className=\"event-item group flex items-center gap-4 p-4 border-b border-white/5 hover:border-[#BA170D]/30 hover:bg-white/[0.02] transition-all cursor-pointer text-left w-full\"\r\n                  >\r\n                    <span className=\"text-[#BA170D] font-mono text-xs opacity-50 group-hover:opacity-100\">\r\n                      / {(i + 1).toString().padStart(2, \"0\")}\r\n                    </span>\r\n                    <span className=\"text-lg font-light text-gray-400 group-hover:text-white transition-colors\">\r\n                      {event.title}\r\n                    </span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Event Details Modal */}\r\n      {selectedEvent && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md\"\r\n          onClick={() => setSelectedEvent(null)}\r\n        >\r\n          <div\r\n            className=\"bg-[#111] border border-white/10 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col shadow-2xl relative\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Modal Header */}\r\n            <div className=\"p-6 border-b border-white/10 flex justify-between items-start bg-[#BA170D]/10\">\r\n              <div>\r\n                <span className=\"text-[#BA170D] font-mono text-xs uppercase tracking-wider mb-2 block\">\r\n                  {selectedEvent.category === \"online\"\r\n                    ? \"Online / Special\"\r\n                    : selectedEvent.category === \"onstage\"\r\n                      ? \"On-Stage Event\"\r\n                      : \"Off-Stage Event\"}\r\n                </span>\r\n                <h3 className=\"text-2xl md:text-3xl font-cinzel font-bold text-white\">\r\n                  {selectedEvent.title}\r\n                </h3>\r\n              </div>\r\n              <button\r\n                onClick={() => setSelectedEvent(null)}\r\n                className=\"text-white/50 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                >\r\n                  <path d=\"M18 6 6 18\" />\r\n                  <path d=\"m6 6 18 18\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"p-6 overflow-y-auto custom-scrollbar\">\r\n              <h4 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\">\r\n                <span className=\"w-1 h-6 bg-[#BA170D] rounded-full\"></span>\r\n                Rules & Regulations\r\n              </h4>\r\n              <ul className=\"space-y-3\">\r\n                {selectedEvent.rules.map((rule, index) => (\r\n                  <li\r\n                    key={index}\r\n                    className=\"flex gap-3 text-gray-300 font-light leading-relaxed\"\r\n                  >\r\n                    <span className=\"text-[#BA170D] mt-1.5\">ΓÇó</span>\r\n                    <span>{rule}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"p-6 border-t border-white/10 bg-[#0A0A0A]\">\r\n              <p className=\"text-white/30 text-xs text-center font-mono\">\r\n                * Judges' decision will be final and binding.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\JhalakEventsNew.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":99,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3644,3736],"text":"\r\n              Showcase your talent at Carmel College&apos;s biggest cultural fest\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3644,3736],"text":"\r\n              Showcase your talent at Carmel College&lsquo;s biggest cultural fest\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3644,3736],"text":"\r\n              Showcase your talent at Carmel College&#39;s biggest cultural fest\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3644,3736],"text":"\r\n              Showcase your talent at Carmel College&rsquo;s biggest cultural fest\r\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":327,"column":25,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[13430,13509],"text":"\r\n                * Judges&apos; decision will be final and binding.\r\n              "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[13430,13509],"text":"\r\n                * Judges&lsquo; decision will be final and binding.\r\n              "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[13430,13509],"text":"\r\n                * Judges&#39; decision will be final and binding.\r\n              "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[13430,13509],"text":"\r\n                * Judges&rsquo; decision will be final and binding.\r\n              "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef, useLayoutEffect, useState, useMemo } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\nimport {\r\n  jhalakEvents,\r\n  EventRule,\r\n  EventCategory,\r\n} from \"@/data/jhalakEventsData\";\r\nimport Link from \"next/link\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default function JhalakEventsNew() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [activeTab, setActiveTab] = useState<EventCategory>(\"onstage\");\r\n  const [selectedEvent, setSelectedEvent] = useState<EventRule | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  const filteredEvents = useMemo(() => {\r\n    return jhalakEvents.filter((event) => {\r\n      const matchesCategory = event.category === activeTab;\r\n      const matchesSearch =\r\n        event.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (event.description &&\r\n          event.description\r\n            .toLowerCase()\r\n            .includes(searchQuery.toLowerCase())) ||\r\n        (event.tags &&\r\n          event.tags.some((tag) =>\r\n            tag.toLowerCase().includes(searchQuery.toLowerCase()),\r\n          ));\r\n      return matchesCategory && matchesSearch;\r\n    });\r\n  }, [activeTab, searchQuery]);\r\n\r\n  useLayoutEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      gsap.from(\".events-header-new\", {\r\n        scrollTrigger: {\r\n          trigger: containerRef.current,\r\n          start: \"top 80%\",\r\n        },\r\n        y: 50,\r\n        opacity: 0,\r\n        duration: 1,\r\n        ease: \"power3.out\",\r\n      });\r\n\r\n      gsap.fromTo(\r\n        \".event-card\",\r\n        { y: 30, opacity: 0 },\r\n        {\r\n          y: 0,\r\n          opacity: 1,\r\n          stagger: 0.08,\r\n          duration: 0.6,\r\n          ease: \"power2.out\",\r\n          scrollTrigger: {\r\n            trigger: \".events-grid\",\r\n            start: \"top 85%\",\r\n          },\r\n        },\r\n      );\r\n    }, containerRef);\r\n    return () => ctx.revert();\r\n  }, [activeTab, searchQuery]);\r\n\r\n  return (\r\n    <section\r\n      id=\"jhalak-events\"\r\n      ref={containerRef}\r\n      className=\"relative bg-[#0A0A0A] text-white py-24 px-6 md:px-12 min-h-screen border-t border-white/5 overflow-hidden selection:bg-[#BA170D] selection:text-white\"\r\n    >\r\n      {/* Background Effects */}\r\n      <div className=\"absolute inset-0 pointer-events-none\">\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_bottom_left,rgba(30,30,30,1)_0%,rgba(10,10,10,1)_100%)] opacity-80\"></div>\r\n        <div className=\"absolute top-[20%] right-[-10%] w-[40vw] h-[40vw] bg-[#BA170D]/5 rounded-full blur-[120px] mix-blend-screen\"></div>\r\n        <div className=\"absolute bottom-[10%] left-[-10%] w-[30vw] h-[30vw] bg-blue-900/5 rounded-full blur-[100px] mix-blend-screen\"></div>\r\n      </div>\r\n\r\n      <div className=\"container mx-auto relative z-10 max-w-7xl\">\r\n        {/* Header Section */}\r\n        <div className=\"text-center mb-16 events-header-new\">\r\n          <div className=\"mb-12\">\r\n            <h2 className=\"text-[#BA170D] font-cinzel font-bold text-xs md:text-sm uppercase tracking-[0.3em] mb-4\">\r\n              {activeTab === \"onstage\"\r\n                ? \"ON-STAGE EVENTS\"\r\n                : activeTab === \"offstage\"\r\n                  ? \"OFF-STAGE EVENTS\"\r\n                  : \"ONLINE EVENTS\"}\r\n            </h2>\r\n            <h1 className=\"text-5xl md:text-7xl lg:text-8xl font-light tracking-tight mb-4\">\r\n              JHALAK{\" \"}\r\n              <span className=\"font-serif italic text-white/50\">Events</span>\r\n            </h1>\r\n            <p className=\"text-gray-400 text-sm md:text-base max-w-2xl mx-auto\">\r\n              Showcase your talent at Carmel College's biggest cultural fest\r\n            </p>\r\n          </div>\r\n\r\n          {/* Search Bar */}\r\n          <div className=\"max-w-xl mx-auto mb-8\">\r\n            <div className=\"relative\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search events...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full px-6 py-4 bg-white/5 border border-white/10 rounded-full text-white placeholder-gray-500 focus:outline-none focus:border-[#BA170D]/50 focus:bg-white/10 transition-all\"\r\n              />\r\n              <svg\r\n                className=\"absolute right-6 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth={2}\r\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tab Switcher */}\r\n          <div className=\"flex flex-wrap justify-center gap-3\">\r\n            {([\"onstage\", \"offstage\", \"online\"] as const).map((tab) => (\r\n              <button\r\n                key={tab}\r\n                onClick={() => {\r\n                  setActiveTab(tab);\r\n                  setSearchQuery(\"\");\r\n                }}\r\n                className={`px-6 py-2 rounded-full text-xs uppercase tracking-wider font-bold transition-all duration-300 ${\r\n                  activeTab === tab\r\n                    ? \"bg-[#BA170D] text-white shadow-[0_0_20px_rgba(186,23,13,0.4)]\"\r\n                    : \"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 border border-white/10\"\r\n                }`}\r\n              >\r\n                {tab === \"online\"\r\n                  ? \"Online\"\r\n                  : tab === \"onstage\"\r\n                    ? \"On-Stage\"\r\n                    : \"Off-Stage\"}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Events Grid */}\r\n        <div className=\"events-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12\">\r\n          {filteredEvents.map((event, index) => (\r\n            <div\r\n              key={index}\r\n              onClick={() => setSelectedEvent(event)}\r\n              className=\"event-card group relative bg-gradient-to-br from-white/[0.07] to-white/[0.02] border border-white/10 rounded-2xl p-6 hover:border-[#BA170D]/50 transition-all duration-300 cursor-pointer overflow-hidden\"\r\n            >\r\n              {/* Hover Glow */}\r\n              <div className=\"absolute inset-0 bg-gradient-to-br from-[#BA170D]/0 to-[#BA170D]/0 group-hover:from-[#BA170D]/10 group-hover:to-transparent transition-all duration-500 rounded-2xl\"></div>\r\n\r\n              {/* Content */}\r\n              <div className=\"relative z-10\">\r\n                {/* Tags */}\r\n                {event.tags && (\r\n                  <div className=\"flex flex-wrap gap-2 mb-4\">\r\n                    {event.tags.slice(0, 3).map((tag, i) => (\r\n                      <span\r\n                        key={i}\r\n                        className=\"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-[10px] font-bold uppercase tracking-wider rounded\"\r\n                      >\r\n                        {tag}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Title */}\r\n                <h4 className=\"text-xl font-cinzel font-bold text-white mb-3 group-hover:text-[#BA170D] transition-colors\">\r\n                  {event.title}\r\n                </h4>\r\n\r\n                {/* Description */}\r\n                {event.description && (\r\n                  <p className=\"text-gray-400 text-sm leading-relaxed mb-4 line-clamp-2\">\r\n                    {event.description}\r\n                  </p>\r\n                )}\r\n\r\n                {/* Arrow Icon */}\r\n                <div className=\"flex items-center justify-end\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-white/5 group-hover:bg-[#BA170D] flex items-center justify-center transition-all duration-300 group-hover:translate-x-1\">\r\n                    <svg\r\n                      className=\"w-4 h-4 text-gray-400 group-hover:text-white transition-colors\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      viewBox=\"0 0 24 24\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M9 5l7 7-7 7\"\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* No Results */}\r\n        {filteredEvents.length === 0 && (\r\n          <div className=\"text-center py-20\">\r\n            <p className=\"text-gray-500 text-lg\">\r\n              No events found matching your search.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Register Button */}\r\n        <div className=\"flex justify-center\">\r\n          <Link\r\n            href=\"/register\"\r\n            className=\"group relative px-12 py-4 bg-[#BA170D] hover:bg-[#900000] text-white font-cinzel font-bold tracking-widest uppercase transition-all duration-300 shadow-[0_0_30px_rgba(186,23,13,0.4)] hover:shadow-[0_0_50px_rgba(186,23,13,0.6)] overflow-hidden rounded-lg\"\r\n          >\r\n            <span className=\"relative z-10 flex items-center gap-3\">\r\n              Register for Jhalak\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                className=\"group-hover:translate-x-1 transition-transform\"\r\n              >\r\n                <path\r\n                  d=\"M5 12H19M12 5L19 12L12 19\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n            </span>\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out\"></div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Event Details Modal */}\r\n      {selectedEvent && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md\"\r\n          onClick={() => setSelectedEvent(null)}\r\n        >\r\n          <div\r\n            className=\"bg-[#111] border border-white/10 rounded-2xl max-w-2xl w-full max-h-[85vh] overflow-hidden flex flex-col shadow-2xl relative\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Modal Header */}\r\n            <div className=\"p-6 border-b border-white/10 bg-gradient-to-r from-[#BA170D]/20 to-transparent\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex flex-wrap gap-2 mb-3\">\r\n                    {selectedEvent.tags?.map((tag, i) => (\r\n                      <span\r\n                        key={i}\r\n                        className=\"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-[10px] font-bold uppercase tracking-wider rounded\"\r\n                      >\r\n                        {tag}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                  <h3 className=\"text-2xl md:text-3xl font-cinzel font-bold text-white mb-2\">\r\n                    {selectedEvent.title}\r\n                  </h3>\r\n                  {selectedEvent.description && (\r\n                    <p className=\"text-gray-400 text-sm\">\r\n                      {selectedEvent.description}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <button\r\n                  onClick={() => setSelectedEvent(null)}\r\n                  className=\"ml-4 text-white/50 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full\"\r\n                >\r\n                  <svg\r\n                    width=\"24\"\r\n                    height=\"24\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                  >\r\n                    <path d=\"M18 6L6 18M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Modal Content */}\r\n            <div className=\"p-6 overflow-y-auto custom-scrollbar flex-1\">\r\n              <h4 className=\"text-lg font-bold text-white mb-4 flex items-center gap-2\">\r\n                <span className=\"w-1 h-6 bg-[#BA170D] rounded-full\"></span>\r\n                Rules & Regulations\r\n              </h4>\r\n              <ul className=\"space-y-3\">\r\n                {selectedEvent.rules.map((rule, index) => (\r\n                  <li\r\n                    key={index}\r\n                    className=\"flex gap-3 text-gray-300 font-light leading-relaxed text-sm\"\r\n                  >\r\n                    <span className=\"text-[#BA170D] mt-1.5 text-xs\">ΓùÅ</span>\r\n                    <span>{rule}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n\r\n            {/* Modal Footer */}\r\n            <div className=\"p-6 border-t border-white/10 bg-[#0A0A0A]\">\r\n              <p className=\"text-white/30 text-xs text-center font-mono mb-3\">\r\n                * Judges' decision will be final and binding.\r\n              </p>\r\n              <Link\r\n                href=\"/register\"\r\n                className=\"block w-full text-center py-3 bg-[#BA170D] hover:bg-[#900000] text-white font-bold rounded-lg transition-all\"\r\n              >\r\n                Register for this Event\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\JhalakRules.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2676,2679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2676,2679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useRef, useLayoutEffect, useState } from \"react\";\r\nimport gsap from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\nimport {\r\n  jhalakGeneralRules,\r\n  scoringData,\r\n  negativeMarkingData,\r\n  groupEventCodes,\r\n  screeningInfo,\r\n  groupEventInfo,\r\n} from \"@/data/jhalakRulesData\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default function JhalakRules() {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [activeTab, setActiveTab] = useState<\"general\" | \"scoring\" | \"codes\">(\r\n    \"general\",\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      // Header Animation\r\n      gsap.from(\".jh-rules-header\", {\r\n        scrollTrigger: {\r\n          trigger: containerRef.current,\r\n          start: \"top 80%\",\r\n        },\r\n        y: 30,\r\n        opacity: 0,\r\n        duration: 1,\r\n        ease: \"power3.out\",\r\n      });\r\n\r\n      // Content Animation\r\n      gsap.fromTo(\r\n        \".jh-rules-content\",\r\n        { y: 20, opacity: 0 },\r\n        {\r\n          y: 0,\r\n          opacity: 1,\r\n          duration: 0.5,\r\n          ease: \"power2.out\",\r\n          scrollTrigger: {\r\n            trigger: \".jh-rules-tabs\",\r\n            start: \"top 85%\",\r\n          },\r\n        },\r\n      );\r\n    }, containerRef);\r\n    return () => ctx.revert();\r\n  }, [activeTab]);\r\n\r\n  return (\r\n    <section\r\n      ref={containerRef}\r\n      className=\"relative bg-[#0A0A0A] text-white py-24 px-6 md:px-24 border-t border-white/5 overflow-hidden selection:bg-[#BA170D] selection:text-white\"\r\n    >\r\n      <div className=\"container mx-auto relative z-10 max-w-6xl\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-16 jh-rules-header\">\r\n          <h2 className=\"text-[#BA170D] font-cinzel font-bold text-lg uppercase tracking-[0.3em] mb-4\">\r\n            House Policies\r\n          </h2>\r\n          <h3 className=\"text-4xl md:text-5xl font-light tracking-tighter mb-6\">\r\n            JHALAK{\" \"}\r\n            <span className=\"font-serif italic text-white/50\">Rulebook</span>\r\n          </h3>\r\n          <p className=\"max-w-2xl mx-auto text-gray-400 font-light leading-relaxed\">\r\n            Essential guidelines for a fair and spectacular competition.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Tab Switcher */}\r\n        <div className=\"flex flex-wrap justify-center gap-4 mb-16 jh-rules-tabs\">\r\n          {[\r\n            { id: \"general\", label: \"General Rules\" },\r\n            { id: \"scoring\", label: \"Scoring & Negative Marks\" },\r\n            { id: \"codes\", label: \"Start Codes\" },\r\n          ].map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id as any)}\r\n              className={`px-6 py-2 rounded-full text-sm uppercase tracking-wider font-bold transition-all duration-300 border border-white/10 ${\r\n                activeTab === tab.id\r\n                  ? \"bg-[#BA170D] text-white border-[#BA170D] shadow-[0_0_15px_rgba(186,23,13,0.4)]\"\r\n                  : \"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10\"\r\n              }`}\r\n            >\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Content Area */}\r\n        <div className=\"jh-rules-content bg-white/[0.02] border border-white/5 rounded-2xl p-8 md:p-12 min-h-[400px]\">\r\n          {activeTab === \"general\" && (\r\n            <div className=\"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6\">\r\n                {jhalakGeneralRules.map((rule, i) => (\r\n                  <div key={i} className=\"flex gap-4\">\r\n                    <span className=\"text-[#BA170D] font-mono text-sm mt-1\">\r\n                      {(i + 1).toString().padStart(2, \"0\")}\r\n                    </span>\r\n                    <p className=\"text-gray-300 font-light leading-relaxed text-sm md:text-base\">\r\n                      {rule}\r\n                    </p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"mt-8 p-6 bg-[#BA170D]/5 border border-[#BA170D]/20 rounded-lg\">\r\n                <h4 className=\"text-[#BA170D] font-cinzel font-bold mb-3 flex items-center gap-2\">\r\n                  <span className=\"w-1.5 h-1.5 bg-[#BA170D] rounded-full\"></span>\r\n                  Screening Protocol\r\n                </h4>\r\n                <p className=\"text-gray-300 font-light leading-relaxed text-sm\">\r\n                  {screeningInfo}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === \"scoring\" && (\r\n            <div className=\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n              {/* Scoring Table */}\r\n              <div>\r\n                <h4 className=\"text-white font-cinzel text-xl mb-6 border-l-4 border-[#BA170D] pl-4\">\r\n                  Points Distribution\r\n                </h4>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full text-left border-collapse\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-white/10\">\r\n                        <th className=\"py-4 px-4 text-[#BA170D] font-mono text-sm uppercase\">\r\n                          Place\r\n                        </th>\r\n                        <th className=\"py-4 px-4 text-gray-400 font-mono text-sm uppercase\">\r\n                          Single Event\r\n                        </th>\r\n                        <th className=\"py-4 px-4 text-gray-400 font-mono text-sm uppercase\">\r\n                          Group Event\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-white/5\">\r\n                      {scoringData.map((row, i) => (\r\n                        <tr\r\n                          key={i}\r\n                          className=\"hover:bg-white/[0.02] transition-colors\"\r\n                        >\r\n                          <td className=\"py-4 px-4 font-bold text-white\">\r\n                            {row.place}\r\n                          </td>\r\n                          <td className=\"py-4 px-4 text-gray-300\">\r\n                            {row.single}\r\n                          </td>\r\n                          <td className=\"py-4 px-4 text-gray-300\">\r\n                            {row.group}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Negative Marking Table */}\r\n              <div>\r\n                <h4 className=\"text-white font-cinzel text-xl mb-6 border-l-4 border-red-500 pl-4\">\r\n                  Negative Markings\r\n                </h4>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full text-left border-collapse\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-white/10\">\r\n                        <th className=\"py-4 px-4 text-white font-mono text-sm uppercase\">\r\n                          Offense\r\n                        </th>\r\n                        <th className=\"py-4 px-4 text-red-500 font-mono text-sm uppercase\">\r\n                          Negative Marks\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-white/5\">\r\n                      {negativeMarkingData.map((row, i) => (\r\n                        <tr\r\n                          key={i}\r\n                          className=\"hover:bg-white/[0.02] transition-colors\"\r\n                        >\r\n                          <td className=\"py-4 px-4 text-gray-300\">\r\n                            {row.offense}\r\n                          </td>\r\n                          <td className=\"py-4 px-4 text-red-400 font-bold\">\r\n                            -{row.marks}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === \"codes\" && (\r\n            <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n              <div className=\"mb-8\">\r\n                <p className=\"text-gray-300 font-light leading-relaxed mb-4\">\r\n                  {groupEventInfo}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {groupEventCodes.map((event, i) => (\r\n                  <div\r\n                    key={i}\r\n                    className=\"flex items-center justify-between p-4 bg-white/[0.03] border border-white/5 rounded-lg hover:border-[#BA170D]/30 transition-colors\"\r\n                  >\r\n                    <div>\r\n                      <span className=\"block text-xs text-[#BA170D] font-mono mb-1\">\r\n                        {event.type}\r\n                      </span>\r\n                      <span className=\"text-gray-200 font-medium\">\r\n                        {event.name}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"bg-[#BA170D]/10 text-[#BA170D] font-mono font-bold px-3 py-1 rounded text-sm border border-[#BA170D]/20\">\r\n                      {event.code}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\LoadingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Navbar copy.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'googleProvider' is defined but never used.","line":4,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"googleProvider"},"fix":{"range":[101,117],"text":""},"desc":"Remove unused variable \"googleProvider\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":15,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1383,1386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1383,1386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, LayoutGroup, AnimatePresence } from \"framer-motion\";\r\nimport { auth, googleProvider, db } from \"@/lib/firebase\";\r\nimport { signOut, onAuthStateChanged, User } from \"firebase/auth\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { LogOut, User as UserIcon } from \"lucide-react\";\r\n\r\nexport default function Navbar() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [loading, setLoading] = useState(false);\r\n  const [user, setUser] = useState<User | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!auth) return;\r\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n      setUser(currentUser);\r\n      setLoading(false);\r\n\r\n      // Check profile completeness\r\n      if (currentUser && db) {\r\n        try {\r\n            const userDocRef = doc(db, \"users\", currentUser.uid);\r\n            const userDoc = await getDoc(userDocRef);\r\n            \r\n            if (!userDoc.exists()) {\r\n                router.push(\"/profile\");\r\n            } else {\r\n                const data = userDoc.data();\r\n                if (!data.department || !data.semester) {\r\n                    router.push(\"/profile\");\r\n                }\r\n            }\r\n        } catch (error: any) {\r\n            // Ignore offline errors as they might be due to adblockers or network init\r\n            if (error?.code !== 'unavailable' && error?.message?.indexOf('offline') === -1) {\r\n                console.error(\"Error checking profile:\", error);\r\n            }\r\n        }\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  const handleLogin = () => {\r\n    router.push(`/login?callbackUrl=${pathname}`);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    if (!auth) return;\r\n    try {\r\n      await signOut(auth);\r\n    } catch (error) {\r\n      console.error(\"Logout failed\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <LayoutGroup>\r\n      <motion.nav\r\n        initial={{ y: -100, opacity: 0 }}\r\n        animate={{ y: 0, opacity: 1 }}\r\n        transition={{ delay: 0.5, duration: 0.8, ease: \"easeOut\" }}\r\n        className=\"fixed top-6 right-6 z-50 flex justify-end items-center gap-4\"\r\n      >\r\n        <AnimatePresence mode=\"wait\">\r\n          {user ? (\r\n            <motion.div \r\n              key=\"user-profile\"\r\n              initial={{ opacity: 0, scale: 0.8 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n              className=\"flex items-center gap-4\"\r\n            >\r\n              {/* Profile Pill */}\r\n              <button \r\n                onClick={() => router.push(\"/profile\")}\r\n                className=\"flex items-center bg-black/40 backdrop-blur-xl border border-white/10 rounded-full p-1.5 md:pl-6 md:pr-2 md:py-2 shadow-2xl hover:border-[#FFD700]/50 transition-colors group\"\r\n              >\r\n                <div className=\"hidden md:flex flex-col items-start mr-2\">\r\n                    <span className=\"text-white text-sm font-medium group-hover:text-[#FFD700] transition-colors\">\r\n                        {user.displayName?.split(\" \")[0]}\r\n                    </span>\r\n                    <span className=\"text-[10px] text-gray-400 uppercase tracking-wider\">Profile</span>\r\n                </div>\r\n                \r\n                <div className=\"relative w-8 h-8 md:w-10 md:h-10 rounded-full overflow-hidden border-2 border-[#FFD700]/50 group-hover:border-[#FFD700] transition-colors\">\r\n                  {user.photoURL ? (\r\n                    <Image \r\n                      src={user.photoURL} \r\n                      alt=\"User\" \r\n                      fill \r\n                      // style={{ height: 'auto' }}\r\n                      className=\"object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-full h-full bg-[#FFD700] text-black flex items-center justify-center\">\r\n                      <UserIcon size={20} />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </button>\r\n\r\n              {/* Logout Button */}\r\n              <button \r\n                onClick={handleLogout}\r\n                className=\"w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center hover:bg-red-500/20 hover:border-red-500/50 hover:text-red-500 transition-all active:scale-95\"\r\n                title=\"Logout\"\r\n              >\r\n                <LogOut size={18} />\r\n              </button>\r\n            </motion.div>\r\n          ) : (\r\n            <motion.button \r\n              key=\"login-btn\"\r\n              initial={{ opacity: 0, scale: 0.8 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n              onClick={handleLogin}\r\n              className=\"relative group overflow-hidden rounded-full bg-white text-black px-6 py-2 transition-all duration-300 hover:bg-[#FFD700] hover:shadow-[0_0_25px_rgba(255,215,0,0.4)] active:scale-95\"\r\n            >\r\n              <div className=\"relative flex items-center gap-2\">\r\n                <span className=\"text-xs md:text-sm font-black font-unbounded tracking-wider uppercase\">\r\n                  Login\r\n                </span>\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-black shadow-[0_0_8px_rgba(0,0,0,0.5)] group-hover:scale-125 transition-transform duration-300\"></div>\r\n              </div>\r\n            </motion.button>\r\n          )}\r\n        </AnimatePresence>\r\n      </motion.nav>\r\n    </LayoutGroup>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\NetworkGuard.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\NetworkGuard.tsx:20:5\n  18 |   useEffect(() => {\n  19 |     // Set the true initial value once we're in the browser\n> 20 |     setIsOnline(navigator.onLine);\n     |     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |\n  22 |     window.addEventListener(\"online\", goOnline);\n  23 |     window.addEventListener(\"offline\", goOffline);","line":20,"column":5,"nodeType":null,"endLine":20,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport OfflineScreen from \"@/components/OfflineScreen\";\r\n\r\nexport default function NetworkGuard({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  // Start as null so we don't flash the offline screen on first render\r\n  const [isOnline, setIsOnline] = useState<boolean | null>(null);\r\n\r\n  const goOnline = useCallback(() => setIsOnline(true), []);\r\n  const goOffline = useCallback(() => setIsOnline(false), []);\r\n\r\n  useEffect(() => {\r\n    // Set the true initial value once we're in the browser\r\n    setIsOnline(navigator.onLine);\r\n\r\n    window.addEventListener(\"online\", goOnline);\r\n    window.addEventListener(\"offline\", goOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"online\", goOnline);\r\n      window.removeEventListener(\"offline\", goOffline);\r\n    };\r\n  }, [goOnline, goOffline]);\r\n\r\n  return (\r\n    <>\r\n      {children}\r\n\r\n      <AnimatePresence>\r\n        {isOnline === false && (\r\n          <motion.div\r\n            key=\"offline-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.4, ease: \"easeInOut\" }}\r\n          >\r\n            <OfflineScreen />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\OfflineScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ProfileGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ProfileSkeleton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"motion"},"fix":{"range":[17,58],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function ProfileSkeleton() {\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0A0A0A] text-white font-outfit relative overflow-hidden\">\r\n        {/* Background Elements */}\r\n        <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n            <div className=\"absolute top-[-20%] left-[-10%] w-[80vw] h-[80vw] bg-blue-900/10 blur-[100px] rounded-full\"></div>\r\n            <div className=\"absolute bottom-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[#BA170D]/10 blur-[100px] rounded-full\"></div>\r\n        </div>\r\n\r\n        <div className=\"relative z-10 container mx-auto px-4 py-24\">\r\n            <div className=\"max-w-7xl mx-auto flex flex-col gap-8\">\r\n                {/* Back Button Skeleton */}\r\n                <div className=\"h-10 w-24 bg-white/5 rounded-full animate-pulse border border-white/10 self-start\" />\r\n\r\n                <div className=\"flex flex-col md:flex-row gap-8 items-start w-full\">\r\n                    {/* Profile Form Skeleton */}\r\n                    <div className=\"bg-black/40 backdrop-blur-xl border border-white/10 p-8 rounded-2xl w-full max-w-xl shadow-2xl flex-1\">\r\n                        <div className=\"flex flex-col items-center mb-10\">\r\n                            <div className=\"w-24 h-24 mb-4 rounded-full bg-white/5 animate-pulse border-2 border-[#BA170D]/20\" />\r\n                            <div className=\"h-8 w-48 bg-white/5 rounded-md animate-pulse mb-2\" />\r\n                            <div className=\"h-4 w-64 bg-white/5 rounded-md animate-pulse\" />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-6\">\r\n                            {[1, 2, 3, 4].map((i) => (\r\n                                <div key={i} className=\"space-y-3\">\r\n                                    <div className=\"h-3 w-20 bg-white/5 rounded animate-pulse\" />\r\n                                    <div className={`h-14 bg-white/5 rounded-xl animate-pulse ${i === 2 || i === 3 || i === 4 ? \"grid grid-cols-4 gap-3 invisible\" : \"w-full\"}`} />\r\n                                    {i > 1 && (\r\n                                        <div className={`grid ${i === 2 ? \"grid-cols-2\" : i === 3 ? \"grid-cols-4\" : \"grid-cols-3\"} gap-3 mt-3`}>\r\n                                            {[...Array(i === 2 ? 4 : i === 3 ? 4 : 3)].map((_, j) => (\r\n                                                <div key={j} className=\"h-12 bg-white/5 rounded-xl animate-pulse\" />\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                            <div className=\"h-16 w-full bg-white/5 rounded-xl animate-pulse mt-8\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Registrations Section Skeleton */}\r\n                    <div className=\"bg-black/40 backdrop-blur-xl border border-white/10 p-8 rounded-2xl w-full max-w-xl shadow-2xl flex-1 flex flex-col h-full self-stretch\">\r\n                        <div className=\"h-8 w-48 bg-white/5 rounded-md animate-pulse mx-auto mb-8\" />\r\n                        \r\n                        <div className=\"flex-1 space-y-8\">\r\n                            {[1, 2].map((i) => (\r\n                                <div key={i} className=\"space-y-4\">\r\n                                    <div className=\"h-3 w-24 bg-white/5 rounded animate-pulse\" />\r\n                                    <div className=\"space-y-3\">\r\n                                        {[1, 2, 3].map((j) => (\r\n                                            <div key={j} className=\"h-16 bg-white/5 border border-white/10 rounded-xl animate-pulse\" />\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        \r\n                        <div className=\"mt-8 pt-6 border-t border-white/10\">\r\n                            <div className=\"h-14 w-full bg-white/5 rounded-xl animate-pulse\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\SmoothScroll.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\SplashScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'angle' is defined but never used.","line":79,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useRef } from \"react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport gsap from \"gsap\";\r\n\r\n// --- Particle helper ---\r\ninterface Particle {\r\n  el: HTMLDivElement;\r\n  angle: number;\r\n  radius: number;\r\n  size: number;\r\n}\r\n\r\nexport default function SplashScreen({\r\n  onComplete,\r\n}: {\r\n  onComplete: () => void;\r\n}) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const logoWrapRef = useRef<HTMLDivElement>(null);\r\n  const ring1Ref = useRef<HTMLDivElement>(null);\r\n  const ring2Ref = useRef<HTMLDivElement>(null);\r\n  const ring3Ref = useRef<HTMLDivElement>(null);\r\n  const titleRef = useRef<HTMLHeadingElement>(null);\r\n  const subtitleRef = useRef<HTMLParagraphElement>(null);\r\n  const progressWrapRef = useRef<HTMLDivElement>(null);\r\n  const progressBarRef = useRef<HTMLDivElement>(null);\r\n  const creditsRef = useRef<HTMLDivElement>(null);\r\n  const particlePoolRef = useRef<HTMLDivElement>(null);\r\n  const glowRef = useRef<HTMLDivElement>(null);\r\n  const scanlineRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const ctx = gsap.context(() => {\r\n      /* ΓöÇΓöÇ 0. Reset visibility ΓöÇΓöÇ */\r\n      gsap.set(\r\n        [\r\n          logoWrapRef.current,\r\n          ring1Ref.current,\r\n          ring2Ref.current,\r\n          ring3Ref.current,\r\n          titleRef.current,\r\n          subtitleRef.current,\r\n          progressWrapRef.current,\r\n          creditsRef.current,\r\n        ],\r\n        { autoAlpha: 0 },\r\n      );\r\n\r\n      /* ΓöÇΓöÇ 1. Spawn floating particles ΓöÇΓöÇ */\r\n      const pool = particlePoolRef.current!;\r\n      const particles: Particle[] = Array.from({ length: 28 }, () => {\r\n        const el = document.createElement(\"div\");\r\n        const size = Math.random() * 4 + 2;\r\n        const angle = Math.random() * 360;\r\n        const radius = 90 + Math.random() * 80;\r\n        el.style.cssText = `\r\n          position:absolute;\r\n          width:${size}px;\r\n          height:${size}px;\r\n          border-radius:50%;\r\n          background:${\"#BA170D\"};\r\n          opacity:0;\r\n          top:50%;left:50%;\r\n          transform:translate(-50%,-50%);\r\n          pointer-events:none;\r\n        `;\r\n        pool.appendChild(el);\r\n        gsap.set(el, {\r\n          x: Math.cos((angle * Math.PI) / 180) * radius,\r\n          y: Math.sin((angle * Math.PI) / 180) * radius,\r\n        });\r\n        return { el, angle, radius, size };\r\n      });\r\n\r\n      // Animate all particles in a looped orbit + twinkle\r\n      particles.forEach(({ el, angle, radius }) => {\r\n        gsap.to(el, {\r\n          opacity: 0.7,\r\n          duration: 0.6,\r\n          delay: Math.random() * 1,\r\n        });\r\n        gsap.to(el, {\r\n          motionPath: undefined,\r\n          rotation: 360,\r\n          transformOrigin: `${-radius}px 0px`,\r\n          duration: 6 + Math.random() * 6,\r\n          ease: \"none\",\r\n          repeat: -1,\r\n          delay: Math.random() * 4,\r\n        });\r\n        gsap.to(el, {\r\n          opacity: 0,\r\n          duration: 0.8 + Math.random() * 0.5,\r\n          yoyo: true,\r\n          repeat: -1,\r\n          delay: Math.random() * 3,\r\n        });\r\n      });\r\n\r\n      /* ΓöÇΓöÇ 2. Master timeline ΓöÇΓöÇ */\r\n      const tl = gsap.timeline({ onComplete });\r\n\r\n      // Scanline sweep\r\n      tl.fromTo(\r\n        scanlineRef.current,\r\n        { scaleY: 0, autoAlpha: 1 },\r\n        { scaleY: 1, duration: 0.5, ease: \"expo.out\", transformOrigin: \"top\" },\r\n      ).to(scanlineRef.current, { autoAlpha: 0, duration: 0.3 }, \"+=0.1\");\r\n\r\n      // Glow pulse into existence\r\n      tl.fromTo(\r\n        glowRef.current,\r\n        { scale: 0, autoAlpha: 0 },\r\n        { scale: 1, autoAlpha: 1, duration: 1, ease: \"expo.out\" },\r\n        \"-=0.5\",\r\n      );\r\n\r\n      // Logo entrance ΓÇö scale-drop with spring bounce\r\n      tl.fromTo(\r\n        logoWrapRef.current,\r\n        { scale: 3, autoAlpha: 0, filter: \"blur(30px) brightness(3)\" },\r\n        {\r\n          scale: 1,\r\n          autoAlpha: 1,\r\n          filter: \"blur(0px) brightness(1)\",\r\n          duration: 1.1,\r\n          ease: \"back.out(1.4)\",\r\n        },\r\n        \"-=0.7\",\r\n      );\r\n\r\n      // Rings explode outward\r\n      [ring1Ref, ring2Ref, ring3Ref].forEach((ref, i) => {\r\n        tl.fromTo(\r\n          ref.current,\r\n          { scale: 0, autoAlpha: 0 },\r\n          {\r\n            scale: 1,\r\n            autoAlpha: 0.6 - i * 0.15,\r\n            duration: 0.7,\r\n            ease: \"expo.out\",\r\n          },\r\n          `-=0.${8 - i * 2}`,\r\n        );\r\n        // Continuous slow spin\r\n        gsap.to(ref.current, {\r\n          rotation: i % 2 === 0 ? 360 : -360,\r\n          duration: 8 + i * 4,\r\n          ease: \"none\",\r\n          repeat: -1,\r\n        });\r\n      });\r\n\r\n      // Glitch title reveal\r\n      if (titleRef.current) {\r\n        const originalText = titleRef.current.textContent || \"\";\r\n        const glitchChars = \"!@#$%^&*ABCDEFGHIJKLMNOPQRSTUVWXYZ╨░╤Ç╨╛╤à╨░\";\r\n        let iteration = 0;\r\n        const totalFrames = 18;\r\n\r\n        tl.to(\r\n          {},\r\n          {\r\n            duration: 0.8,\r\n            onStart: () => {\r\n              gsap.set(titleRef.current, { autoAlpha: 1 });\r\n            },\r\n            onUpdate: function () {\r\n              const progress = this.progress();\r\n              iteration = Math.floor(progress * totalFrames);\r\n              if (titleRef.current) {\r\n                titleRef.current.textContent = originalText\r\n                  .split(\"\")\r\n                  .map((char, idx) => {\r\n                    if (char === \" \") return \" \";\r\n                    if (idx < iteration) return char;\r\n                    return glitchChars[\r\n                      Math.floor(Math.random() * glitchChars.length)\r\n                    ];\r\n                  })\r\n                  .join(\"\");\r\n              }\r\n            },\r\n            onComplete: () => {\r\n              if (titleRef.current) titleRef.current.textContent = originalText;\r\n            },\r\n            ease: \"none\",\r\n          },\r\n          \"-=0.2\",\r\n        );\r\n      }\r\n\r\n      // Subtitle letter spacing expand + fade in\r\n      tl.fromTo(\r\n        subtitleRef.current,\r\n        { autoAlpha: 0, letterSpacing: \"3em\", x: -20 },\r\n        {\r\n          autoAlpha: 1,\r\n          letterSpacing: \"0.8em\",\r\n          x: 0,\r\n          duration: 0.9,\r\n          ease: \"power3.out\",\r\n        },\r\n        \"-=0.4\",\r\n      );\r\n\r\n      // Progress bar\r\n      tl.fromTo(\r\n        progressWrapRef.current,\r\n        { autoAlpha: 0, y: 10 },\r\n        { autoAlpha: 1, y: 0, duration: 0.4 },\r\n        \"-=0.4\",\r\n      ).fromTo(\r\n        progressBarRef.current,\r\n        { scaleX: 0 },\r\n        {\r\n          scaleX: 1,\r\n          duration: 1.4,\r\n          ease: \"expo.inOut\",\r\n          transformOrigin: \"left center\",\r\n        },\r\n        \"<\",\r\n      );\r\n\r\n      // Credits fade in\r\n      tl.fromTo(\r\n        creditsRef.current,\r\n        { autoAlpha: 0, y: 12 },\r\n        { autoAlpha: 1, y: 0, duration: 0.6, ease: \"power2.out\" },\r\n        \"-=1\",\r\n      );\r\n\r\n      // ΓöÇΓöÇ Exit: elements scatter upward then container wipes down ΓöÇΓöÇ\r\n      tl.to(\r\n        [\r\n          logoWrapRef.current,\r\n          ring1Ref.current,\r\n          ring2Ref.current,\r\n          ring3Ref.current,\r\n          titleRef.current,\r\n          subtitleRef.current,\r\n          progressWrapRef.current,\r\n          creditsRef.current,\r\n          glowRef.current,\r\n        ],\r\n        {\r\n          y: -40,\r\n          autoAlpha: 0,\r\n          stagger: 0.05,\r\n          duration: 0.5,\r\n          ease: \"power3.in\",\r\n        },\r\n        \"+=0.3\",\r\n      ).to(\r\n        containerRef.current,\r\n        {\r\n          clipPath: \"inset(100% 0% 0% 0%)\",\r\n          duration: 0.9,\r\n          ease: \"expo.inOut\",\r\n        },\r\n        \"-=0.15\",\r\n      );\r\n    }, containerRef);\r\n\r\n    return () => ctx.revert();\r\n  }, [onComplete]);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"fixed inset-0 z-[100] flex flex-col items-center justify-center text-center pointer-events-auto overflow-hidden\"\r\n      style={{ clipPath: \"inset(0% 0% 0% 0%)\" }}\r\n    >\r\n      {/* ΓöÇΓöÇ Deep background ΓöÇΓöÇ */}\r\n      <div className=\"absolute inset-0 bg-[#050505]\" />\r\n      <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_#1a0202_0%,_#000000_70%)]\" />\r\n\r\n      {/* ΓöÇΓöÇ Grid overlay ΓöÇΓöÇ */}\r\n      <div\r\n        className=\"absolute inset-0 opacity-[0.04]\"\r\n        style={{\r\n          backgroundImage:\r\n            \"linear-gradient(#BA170D 1px, transparent 1px), linear-gradient(90deg, #BA170D 1px, transparent 1px)\",\r\n          backgroundSize: \"40px 40px\",\r\n        }}\r\n      />\r\n\r\n      {/* ΓöÇΓöÇ Scanline sweep ΓöÇΓöÇ */}\r\n      <div\r\n        ref={scanlineRef}\r\n        className=\"absolute inset-0 pointer-events-none\"\r\n        style={{\r\n          background:\r\n            \"linear-gradient(to bottom, transparent 0%, rgba(186,23,13,0.08) 50%, transparent 100%)\",\r\n          opacity: 0,\r\n        }}\r\n      />\r\n\r\n      {/* ΓöÇΓöÇ Particle orbit pool ΓöÇΓöÇ */}\r\n      <div\r\n        ref={particlePoolRef}\r\n        className=\"absolute inset-0 pointer-events-none\"\r\n      />\r\n\r\n      {/* ΓöÇΓöÇ Central glow ΓöÇΓöÇ */}\r\n      <div\r\n        ref={glowRef}\r\n        className=\"absolute w-[300px] h-[300px] md:w-[420px] md:h-[420px] rounded-full pointer-events-none\"\r\n        style={{\r\n          background:\r\n            \"radial-gradient(circle, rgba(186,23,13,0.25) 0%, transparent 70%)\",\r\n          filter: \"blur(40px)\",\r\n        }}\r\n      />\r\n\r\n      {/* ΓöÇΓöÇ Rings ΓöÇΓöÇ */}\r\n      <div\r\n        ref={ring1Ref}\r\n        className=\"absolute w-[220px] h-[220px] md:w-[320px] md:h-[320px] rounded-full pointer-events-none\"\r\n        style={{\r\n          border: \"1px solid rgba(186,23,13,0.5)\",\r\n          boxShadow:\r\n            \"0 0 20px rgba(186,23,13,0.3), inset 0 0 20px rgba(186,23,13,0.1)\",\r\n        }}\r\n      />\r\n      <div\r\n        ref={ring2Ref}\r\n        className=\"absolute w-[310px] h-[310px] md:w-[430px] md:h-[430px] rounded-full pointer-events-none\"\r\n        style={{\r\n          border: \"1px dashed rgba(186,23,13,0.3)\",\r\n        }}\r\n      />\r\n      <div\r\n        ref={ring3Ref}\r\n        className=\"absolute w-[400px] h-[400px] md:w-[560px] md:h-[560px] rounded-full pointer-events-none\"\r\n        style={{\r\n          border: \"1px solid rgba(186,23,13,0.1)\",\r\n        }}\r\n      />\r\n\r\n      {/* ΓöÇΓöÇ Main content ΓöÇΓöÇ */}\r\n      <div className=\"relative z-10 flex flex-col items-center gap-0\">\r\n        {/* Logo */}\r\n        <div\r\n          ref={logoWrapRef}\r\n          className=\"relative w-36 h-36 md:w-52 md:h-52 mb-7\"\r\n          style={{ filter: \"drop-shadow(0 0 30px rgba(186,23,13,0.5))\" }}\r\n        >\r\n          <Image\r\n            src=\"/Logo.png\"\r\n            alt=\"Jhalak Aroha\"\r\n            fill\r\n            className=\"object-contain\"\r\n            priority\r\n          />\r\n        </div>\r\n\r\n        {/* Title with glitch effect */}\r\n        <h1\r\n          ref={titleRef}\r\n          className=\"text-5xl md:text-8xl font-cinzel font-black text-white tracking-widest\"\r\n          style={{\r\n            textShadow:\r\n              \"0 0 40px rgba(186,23,13,0.6), 0 0 80px rgba(186,23,13,0.3)\",\r\n          }}\r\n        >\r\n          AROHA\r\n        </h1>\r\n\r\n        {/* Subtitle */}\r\n        <p\r\n          ref={subtitleRef}\r\n          className=\"text-[#BA170D] font-mono text-[10px] md:text-xs tracking-[0.8em] uppercase mt-3 mb-10\"\r\n        >\r\n          JHALAK 2026\r\n        </p>\r\n\r\n        {/* Progress bar */}\r\n        <div\r\n          ref={progressWrapRef}\r\n          className=\"w-56 md:w-72 h-[2px] rounded-full overflow-hidden relative\"\r\n          style={{ background: \"rgba(255,255,255,0.06)\" }}\r\n        >\r\n          {/* Glow shimmer on bar */}\r\n          <div\r\n            ref={progressBarRef}\r\n            className=\"absolute inset-0 w-full h-full origin-left\"\r\n            style={{\r\n              background:\r\n                \"linear-gradient(90deg, #7a0d07, #BA170D, #ff3b2f, #BA170D)\",\r\n              boxShadow: \"0 0 12px rgba(186,23,13,0.8)\",\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* ΓöÇΓöÇ Credits ΓöÇΓöÇ */}\r\n      <div\r\n        ref={creditsRef}\r\n        className=\"absolute bottom-7 left-0 right-0 text-center z-20\"\r\n      >\r\n        <p className=\"text-[10px] md:text-xs text-gray-600 uppercase tracking-widest font-mono\">\r\n          Crafted with <span className=\"text-white mx-1\">ΓÖÑ</span> by{\" \"}\r\n          <Link\r\n            href=\"/tech-team\"\r\n            className=\"text-[#BA170D] font-bold hover:underline relative z-50\"\r\n          >\r\n            Tech Team\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\admin\\EventStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\admin\\ExportOptionsModal.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\admin\\ExportOptionsModal.tsx:21:17\n  19 |   // Initialize with all fields selected when modal opens\n  20 |   useEffect(() => {\n> 21 |     if (isOpen) setSelectedFields(allFields);\n     |                 ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  22 |   }, [isOpen, allFields]);\n  23 |\n  24 |   // Lock scroll when open","line":21,"column":17,"nodeType":null,"endLine":21,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport { X, Check } from \"lucide-react\";\r\n\r\ninterface ExportOptionsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onExport: (selectedFields: string[]) => void;\r\n  allFields: string[];\r\n}\r\n\r\nexport default function ExportOptionsModal({\r\n  isOpen,\r\n  onClose,\r\n  onExport,\r\n  allFields,\r\n}: ExportOptionsModalProps) {\r\n  const [selectedFields, setSelectedFields] = useState<string[]>([]);\r\n\r\n  // Initialize with all fields selected when modal opens\r\n  useEffect(() => {\r\n    if (isOpen) setSelectedFields(allFields);\r\n  }, [isOpen, allFields]);\r\n\r\n  // Lock scroll when open\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = \"hidden\";\r\n      document.documentElement.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"unset\";\r\n      document.documentElement.style.overflow = \"unset\";\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = \"unset\";\r\n      document.documentElement.style.overflow = \"unset\";\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const toggleField = (field: string) => {\r\n    setSelectedFields((prev) =>\r\n      prev.includes(field) ? prev.filter((f) => f !== field) : [...prev, field],\r\n    );\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      data-lenis-prevent\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4\"\r\n    >\r\n      <div className=\"bg-neutral-900 border border-white/10 rounded-xl w-full max-w-xl shadow-2xl animate-in fade-in zoom-in duration-200 flex flex-col max-h-[90vh]\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-white/10 flex-shrink-0\">\r\n          <h2 className=\"text-xl font-bold text-white font-unbounded\">\r\n            Export Options\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <X size={24} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Scrollable body */}\r\n        <div className=\"p-6 overflow-y-auto flex-1\">\r\n          <p className=\"text-gray-400 mb-4 text-sm\">\r\n            Select the fields you want to include in the export file.\r\n          </p>\r\n\r\n          {/* Select / Deselect + count */}\r\n          <div className=\"flex items-center gap-3 mb-5\">\r\n            <button\r\n              onClick={() => setSelectedFields(allFields)}\r\n              className=\"text-xs font-bold text-blue-400 hover:text-blue-300 transition-colors uppercase tracking-wider\"\r\n            >\r\n              Select All\r\n            </button>\r\n            <span className=\"text-gray-600\">|</span>\r\n            <button\r\n              onClick={() => setSelectedFields([])}\r\n              className=\"text-xs font-bold text-gray-500 hover:text-gray-300 transition-colors uppercase tracking-wider\"\r\n            >\r\n              Deselect All\r\n            </button>\r\n            <span className=\"ml-auto text-[11px] text-gray-500 font-mono\">\r\n              {selectedFields.length} / {allFields.length} selected\r\n            </span>\r\n          </div>\r\n\r\n          {/* All fields ΓÇö no height cap so every field is always visible */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {allFields.map((field) => {\r\n              const isSelected = selectedFields.includes(field);\r\n              return (\r\n                <label\r\n                  key={field}\r\n                  className={`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\r\n                    isSelected\r\n                      ? \"bg-[#BA170D]/10 border-[#BA170D] text-white\"\r\n                      : \"bg-white/5 border-white/5 text-gray-400 hover:bg-white/10 hover:border-white/20\"\r\n                  }`}\r\n                >\r\n                  <div\r\n                    className={`w-5 h-5 rounded flex items-center justify-center border transition-colors flex-shrink-0 ${\r\n                      isSelected\r\n                        ? \"bg-[#BA170D] border-[#BA170D]\"\r\n                        : \"border-gray-500 bg-transparent\"\r\n                    }`}\r\n                  >\r\n                    {isSelected && <Check size={14} className=\"text-white\" />}\r\n                  </div>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    className=\"hidden\"\r\n                    checked={isSelected}\r\n                    onChange={() => toggleField(field)}\r\n                  />\r\n                  <span className=\"text-sm font-medium leading-tight\">\r\n                    {field}\r\n                  </span>\r\n                </label>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-end gap-3 p-6 border-t border-white/10 bg-white/5 rounded-b-xl flex-shrink-0\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 rounded-lg text-sm font-bold text-gray-400 hover:text-white hover:bg-white/10 transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={() => onExport(selectedFields)}\r\n            disabled={selectedFields.length === 0}\r\n            className={`px-6 py-2 rounded-lg text-sm font-bold text-white transition-all ${\r\n              selectedFields.length === 0\r\n                ? \"bg-gray-700 cursor-not-allowed opacity-50\"\r\n                : \"bg-[#BA170D] hover:bg-[#a0140b] shadow-lg shadow-red-900/20\"\r\n            }`}\r\n          >\r\n            Export ({selectedFields.length})\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\admin\\UserManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":5,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":34,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Shield"},"fix":{"range":[164,172],"text":""},"desc":"Remove unused variable \"Shield\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserIcon' is defined but never used.","line":5,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"UserIcon"},"fix":{"range":[172,190],"text":""},"desc":"Remove unused variable \"UserIcon\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9645,9648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9645,9648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":364,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12787,12790],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12787,12790],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":446,"column":25,"nodeType":"JSXOpeningElement","endLine":450,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { AdminUserView, fetchAllUsersWithData } from \"@/lib/adminService\";\r\nimport { Search, Download, Shield, User as UserIcon } from \"lucide-react\";\r\nimport * as XLSX from \"xlsx\";\r\nimport toast from \"react-hot-toast\";\r\nimport ConfirmToast from \"@/components/ConfirmToast\";\r\nimport { Trash2, AlertTriangle } from \"lucide-react\";\r\n\r\nimport Toast, { ToastType } from \"@/components/ui/Toast\";\r\n\r\nexport default function UserManagement() {\r\n  const [users, setUsers] = useState<AdminUserView[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [roleFilter, setRoleFilter] = useState<\r\n    \"all\" | \"admin\" | \"user\" | \"organizer\"\r\n  >(\"all\"); // Add organizer type\r\n  const [houseFilter, setHouseFilter] = useState<string>(\"all\");\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: keyof AdminUserView | \"chestNo\";\r\n    direction: \"asc\" | \"desc\";\r\n  }>({ key: \"name\", direction: \"asc\" });\r\n\r\n  // Toast State\r\n  const [uiToast, setUiToast] = useState<{\r\n    message: string;\r\n    type: ToastType;\r\n    isVisible: boolean;\r\n  }>({\r\n    message: \"\",\r\n    type: \"info\",\r\n    isVisible: false,\r\n  });\r\n\r\n  const showToast = (message: string, type: ToastType = \"info\") => {\r\n    setUiToast({ message, type, isVisible: true });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    const data = await fetchAllUsersWithData();\r\n    setUsers(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleExport = () => {\r\n    // Flatten data for export\r\n    const exportData = users.map((u) => ({\r\n      Name: u.name,\r\n      CollegeID: u.collegeId || \"N/A\",\r\n      Email: u.email,\r\n      Role: u.role || \"user\",\r\n      Mobile: u.mobile || \"N/A\",\r\n      Department: u.department || \"N/A\",\r\n      Semester: u.semester || \"N/A\",\r\n      House: u.house || \"N/A\",\r\n      RegistrationCount: u.registrationCount,\r\n      Events: u.events.join(\", \"),\r\n      ChestNumbers: u.chestNumbers.join(\", \"),\r\n    }));\r\n\r\n    const wb = XLSX.utils.book_new();\r\n    const ws = XLSX.utils.json_to_sheet(exportData);\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Users\");\r\n    XLSX.writeFile(wb, \"jhalak_users_export.xlsx\");\r\n    showToast(\"Excel exported successfully!\", \"success\");\r\n  };\r\n\r\n  const filteredUsers = users\r\n    .filter((user) => {\r\n      const matchesSearch =\r\n        (user.name?.toLowerCase() || \"\").includes(searchTerm.toLowerCase()) ||\r\n        (user.email?.toLowerCase() || \"\").includes(searchTerm.toLowerCase()) ||\r\n        (user.mobile && user.mobile.includes(searchTerm));\r\n\r\n      const matchesRole =\r\n        roleFilter === \"all\" || (user.role || \"user\") === roleFilter;\r\n\r\n      const matchesHouse =\r\n        houseFilter === \"all\" || (user.house || \"Unknown\") === houseFilter;\r\n\r\n      return matchesSearch && matchesRole && matchesHouse;\r\n    })\r\n    .sort((a, b) => {\r\n      const aValue = a[sortConfig.key as keyof AdminUserView];\r\n      const bValue = b[sortConfig.key as keyof AdminUserView];\r\n\r\n      if (sortConfig.key === \"chestNo\") {\r\n        // Special handling for chestNo which might be string or number\r\n        // Prioritize primary chestNo, then first in array\r\n        const getChestVal = (u: AdminUserView) => {\r\n          if (u.chestNo) return u.chestNo;\r\n          if (u.chestNumbers && u.chestNumbers.length > 0)\r\n            return u.chestNumbers[0];\r\n          return \"\";\r\n        };\r\n        const valA = getChestVal(a);\r\n        const valB = getChestVal(b);\r\n\r\n        // Numeric sort if possible\r\n        const numA = parseInt(valA);\r\n        const numB = parseInt(valB);\r\n        if (!isNaN(numA) && !isNaN(numB)) {\r\n          return sortConfig.direction === \"asc\" ? numA - numB : numB - numA;\r\n        }\r\n        return sortConfig.direction === \"asc\"\r\n          ? valA.localeCompare(valB)\r\n          : valB.localeCompare(valA);\r\n      }\r\n\r\n      if (typeof aValue === \"string\" && typeof bValue === \"string\") {\r\n        return sortConfig.direction === \"asc\"\r\n          ? aValue.localeCompare(bValue)\r\n          : bValue.localeCompare(aValue);\r\n      }\r\n\r\n      if (typeof aValue === \"number\" && typeof bValue === \"number\") {\r\n        return sortConfig.direction === \"asc\"\r\n          ? aValue - bValue\r\n          : bValue - aValue;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n\r\n  const handleSort = (key: keyof AdminUserView | \"chestNo\") => {\r\n    setSortConfig((current) => ({\r\n      key,\r\n      direction:\r\n        current.key === key && current.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        {/* Scanning progress bar */}\r\n        <div className=\"w-full h-[2px] bg-white/5 rounded-full overflow-hidden relative\">\r\n          <div\r\n            className=\"absolute inset-y-0 w-1/3 rounded-full\"\r\n            style={{\r\n              background:\r\n                \"linear-gradient(90deg, transparent, #BA170D, transparent)\",\r\n              animation: \"userScan 1.4s ease-in-out infinite\",\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Header skeleton ΓÇö mirrors the controls bar */}\r\n        <div className=\"flex flex-col md:flex-row gap-4 justify-between items-center bg-white/5 p-4 rounded-xl border border-white/10\">\r\n          <div className=\"h-9 w-72 rounded-lg bg-white/5 shimmer\" />\r\n          <div className=\"flex gap-3\">\r\n            {[96, 96, 40, 120].map((w, i) => (\r\n              <div\r\n                key={i}\r\n                className=\"h-9 rounded-lg bg-white/5 shimmer\"\r\n                style={{ width: w }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Table skeleton */}\r\n        <div className=\"overflow-x-auto rounded-xl border border-white/10\">\r\n          {/* Table header */}\r\n          <div className=\"bg-white/5 grid grid-cols-8 gap-4 px-4 py-3 border-b border-white/10\">\r\n            {[\r\n              \"User\",\r\n              \"ID\",\r\n              \"Chest No\",\r\n              \"Details\",\r\n              \"Contact\",\r\n              \"Events\",\r\n              \"Role\",\r\n              \"Actions\",\r\n            ].map((col) => (\r\n              <div key={col} className=\"h-3 rounded-full bg-white/10 shimmer\" />\r\n            ))}\r\n          </div>\r\n\r\n          {/* Skeleton rows */}\r\n          {Array.from({ length: 8 }).map((_, i) => (\r\n            <div\r\n              key={i}\r\n              className=\"grid grid-cols-8 gap-4 px-4 py-4 border-b border-white/5 items-center\"\r\n              style={{ animationDelay: `${i * 60}ms` }}\r\n            >\r\n              {/* User cell ΓÇö avatar + name/email */}\r\n              <div className=\"flex items-center gap-3 col-span-1\">\r\n                <div\r\n                  className=\"w-8 h-8 rounded-full bg-white/5 shimmer flex-shrink-0\"\r\n                  style={{ animationDelay: `${i * 60}ms` }}\r\n                />\r\n                <div className=\"space-y-1.5 flex-1 min-w-0\">\r\n                  <div\r\n                    className=\"h-2.5 rounded-full bg-white/8 shimmer\"\r\n                    style={{ width: \"70%\" }}\r\n                  />\r\n                  <div\r\n                    className=\"h-2 rounded-full bg-white/5 shimmer\"\r\n                    style={{ width: \"85%\" }}\r\n                  />\r\n                </div>\r\n              </div>\r\n              {/* ID */}\r\n              <div\r\n                className=\"h-3 rounded-full bg-white/5 shimmer\"\r\n                style={{ width: \"60%\" }}\r\n              />\r\n              {/* Chest no badge */}\r\n              <div className=\"h-6 w-14 rounded-full bg-[#BA170D]/10 shimmer\" />\r\n              {/* Details ΓÇö 3 lines */}\r\n              <div className=\"space-y-1.5\">\r\n                {[70, 55, 45].map((w, j) => (\r\n                  <div\r\n                    key={j}\r\n                    className=\"h-2 rounded-full bg-white/5 shimmer\"\r\n                    style={{ width: `${w}%` }}\r\n                  />\r\n                ))}\r\n              </div>\r\n              {/* Contact */}\r\n              <div\r\n                className=\"h-3 rounded-full bg-white/5 shimmer\"\r\n                style={{ width: \"65%\" }}\r\n              />\r\n              {/* Events badge */}\r\n              <div className=\"h-6 w-8 rounded bg-white/8 shimmer mx-auto\" />\r\n              {/* Role select */}\r\n              <div className=\"h-7 w-20 rounded bg-white/5 shimmer ml-auto\" />\r\n              {/* Actions */}\r\n              <div className=\"h-7 w-7 rounded-lg bg-white/5 shimmer mx-auto\" />\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Bottom count line */}\r\n        <div className=\"flex justify-end\">\r\n          <div className=\"h-3 w-28 rounded-full bg-white/5 shimmer\" />\r\n        </div>\r\n\r\n        <style>{`\r\n          @keyframes userScan {\r\n            0%   { left: -33%; }\r\n            100% { left: 133%; }\r\n          }\r\n          .shimmer {\r\n            position: relative;\r\n            overflow: hidden;\r\n          }\r\n          .shimmer::after {\r\n            content: '';\r\n            position: absolute;\r\n            inset: 0;\r\n            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.04) 50%, transparent 100%);\r\n            animation: shimmerSlide 1.6s ease-in-out infinite;\r\n          }\r\n          @keyframes shimmerSlide {\r\n            0%   { transform: translateX(-100%); }\r\n            100% { transform: translateX(100%); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n\r\n  const handleUpdateRole = async (uid: string, newRole: string) => {\r\n    // Optimistic update\r\n    setUsers((prev) =>\r\n      prev.map((u) => (u.uid === uid ? { ...u, role: newRole as any } : u)),\r\n    );\r\n\r\n    // Call API\r\n    try {\r\n      const { updateUserRole } = await import(\"@/lib/adminService\");\r\n      const result = await updateUserRole(uid, newRole);\r\n      if (!result.success) {\r\n        showToast(result.message || \"Failed to update role\", \"error\");\r\n        loadData(); // Revert on failure\r\n      } else {\r\n        showToast(`Role updated to ${newRole}`, \"success\");\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      showToast(\"Failed to update role\", \"error\");\r\n      loadData();\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = (uid: string, name: string) => {\r\n    toast.custom((t) => (\r\n      <ConfirmToast\r\n        t={t}\r\n        message={`Are you sure you want to delete user \"${name}\"? This action cannot be undone.`}\r\n        onConfirm={async () => {\r\n          setLoading(true);\r\n          const { deleteUser } = await import(\"@/lib/adminService\");\r\n          const result = await deleteUser(uid);\r\n          if (result.success) {\r\n            showToast(\"User deleted successfully\", \"success\");\r\n            loadData();\r\n          } else {\r\n            showToast(result.message || \"Failed to delete user\", \"error\");\r\n            setLoading(false);\r\n          }\r\n        }}\r\n      />\r\n    ));\r\n  };\r\n\r\n  const handleDeleteAllUsers = () => {\r\n    toast.custom((t) => (\r\n      <ConfirmToast\r\n        t={t}\r\n        message=\"DANGER: Are you sure you want to DELETE ALL USERS? This will wipe all registration data and cannot be undone!\"\r\n        onConfirm={async () => {\r\n          setLoading(true);\r\n          const { deleteAllUsers } = await import(\"@/lib/adminService\");\r\n          const result = await deleteAllUsers();\r\n          if (result.success) {\r\n            showToast(\"All users deleted successfully\", \"success\");\r\n            loadData();\r\n          } else {\r\n            showToast(result.message || \"Failed to delete users\", \"error\");\r\n            setLoading(false);\r\n          }\r\n        }}\r\n      />\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Toast\r\n        message={uiToast.message}\r\n        type={uiToast.type}\r\n        isVisible={uiToast.isVisible}\r\n        onClose={() => setUiToast((prev) => ({ ...prev, isVisible: false }))}\r\n      />\r\n      {/* Controls */}\r\n      <div className=\"flex flex-col md:flex-row gap-4 justify-between items-center bg-white/5 p-4 rounded-xl border border-white/10\">\r\n        <div className=\"relative w-full md:w-96\">\r\n          <Search\r\n            className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"\r\n            size={18}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by name, email, or mobile...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full bg-black/50 border border-white/10 rounded-lg pl-10 pr-4 py-2 text-white focus:border-[#BA170D] focus:outline-none transition-colors\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex gap-3 w-full md:w-auto\">\r\n          <select\r\n            value={roleFilter}\r\n            onChange={(e) => setRoleFilter(e.target.value as any)}\r\n            className=\"bg-black/50 border border-white/10 rounded-lg px-4 py-2 text-white focus:border-[#BA170D] focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Roles</option>\r\n            <option value=\"user\">Users</option>\r\n            <option value=\"admin\">Admins</option>\r\n            <option value=\"organizer\">Organizers</option>\r\n          </select>\r\n\r\n          <select\r\n            value={houseFilter}\r\n            onChange={(e) => setHouseFilter(e.target.value)}\r\n            className=\"bg-black/50 border border-white/10 rounded-lg px-4 py-2 text-white focus:border-[#BA170D] focus:outline-none\"\r\n          >\r\n            <option value=\"all\">All Houses</option>\r\n            <option value=\"Red\">Red House</option>\r\n            <option value=\"Blue\">Blue House</option>\r\n            <option value=\"Yellow\">Yellow House</option>\r\n            <option value=\"Green\">Green House</option>\r\n          </select>\r\n\r\n          <button\r\n            onClick={handleDeleteAllUsers}\r\n            className=\"flex items-center gap-2 bg-red-900/50 hover:bg-red-900 text-red-200 px-4 py-2 rounded-lg transition-colors border border-red-800\"\r\n            title=\"Delete All Users\"\r\n          >\r\n            <AlertTriangle size={18} />\r\n            <span className=\"hidden md:inline text-xs font-bold uppercase\">\r\n              Delete All\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleExport}\r\n            className=\"flex items-center gap-2 bg-[#BA170D] text-white font-bold px-4 py-2 rounded-lg hover:bg-neutral-800 transition-colors\"\r\n          >\r\n            <Download size={18} />\r\n            <span className=\"hidden md:inline\">Export Excel</span>\r\n            <span className=\"md:hidden\">Export</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto rounded-xl border border-white/10\">\r\n        <table className=\"w-full text-left border-collapse\">\r\n          <thead className=\"bg-white/5 text-gray-400 text-xs uppercase tracking-wider font-bold\">\r\n            <tr>\r\n              <th\r\n                className=\"p-4 cursor-pointer hover:text-white transition-colors\"\r\n                onClick={() => handleSort(\"name\")}\r\n              >\r\n                User{\" \"}\r\n                {sortConfig.key === \"name\" &&\r\n                  (sortConfig.direction === \"asc\" ? \"Γåæ\" : \"Γåô\")}\r\n              </th>\r\n              <th className=\"p-4\">ID</th>\r\n              <th\r\n                className=\"p-4 cursor-pointer hover:text-white transition-colors\"\r\n                onClick={() => handleSort(\"chestNo\")}\r\n              >\r\n                Chest No{\" \"}\r\n                {sortConfig.key === \"chestNo\" &&\r\n                  (sortConfig.direction === \"asc\" ? \"Γåæ\" : \"Γåô\")}\r\n              </th>\r\n              <th className=\"p-4\">Details</th>\r\n              <th className=\"p-4\">Contact</th>\r\n              <th className=\"p-4 text-center\">Events</th>\r\n              <th className=\"p-4 text-right\">Role</th>\r\n              <th className=\"p-4 text-center\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-white/10 text-sm\">\r\n            {filteredUsers.map((user) => (\r\n              <tr\r\n                key={user.uid}\r\n                className=\"hover:bg-white/5 transition-colors group\"\r\n              >\r\n                <td className=\"p-4\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-[#BA170D] font-bold overflow-hidden\">\r\n                      {user.photoURL ? (\r\n                        <img\r\n                          src={user.photoURL}\r\n                          alt={user.name}\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        (user.name || \"?\").charAt(0).toUpperCase()\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"font-bold text-white group-hover:text-[#BA170D] transition-colors\">\r\n                        {user.name}\r\n                      </p>\r\n                      <p className=\"text-gray-500 text-xs\">{user.email}</p>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"p-4 font-mono text-xs text-[#BA170D] font-bold\">\r\n                  {user.collegeId || \"-\"}\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  {user.chestNo ? (\r\n                    <span className=\"bg-[#BA170D]/20 text-[#BA170D] px-3 py-1 rounded-full text-xs font-bold font-mono border border-[#BA170D]/30\">\r\n                      {user.chestNo}\r\n                    </span>\r\n                  ) : user.chestNumbers && user.chestNumbers.length > 0 ? (\r\n                    <div className=\"flex flex-col gap-1\">\r\n                      {user.chestNumbers.slice(0, 2).map((cn, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className=\"bg-gray-800 text-gray-300 px-2 py-0.5 rounded text-[10px] font-mono border border-gray-700 w-fit\"\r\n                        >\r\n                          {cn}\r\n                        </span>\r\n                      ))}\r\n                      {user.chestNumbers.length > 2 && (\r\n                        <span className=\"text-[10px] text-gray-500\">\r\n                          +{user.chestNumbers.length - 2} more\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <span className=\"text-gray-600\">-</span>\r\n                  )}\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  <div className=\"flex flex-col gap-1 text-xs text-gray-400\">\r\n                    <span className=\"flex items-center gap-1\">\r\n                      <span className=\"w-1 h-1 bg-[#BA170D] rounded-full\"></span>{\" \"}\r\n                      {user.department || \"No Dept\"}\r\n                    </span>\r\n                    <span className=\"flex items-center gap-1\">\r\n                      <span className=\"w-1 h-1 bg-blue-500 rounded-full\"></span>{\" \"}\r\n                      {user.semester || \"No Sem\"}\r\n                    </span>\r\n                    <span className=\"flex items-center gap-1\">\r\n                      <span className=\"w-1 h-1 bg-red-500 rounded-full\"></span>{\" \"}\r\n                      {user.house || \"No House\"}\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td className=\"p-4 text-gray-300 font-mono text-xs\">\r\n                  {user.mobile || \"-\"}\r\n                </td>\r\n                <td className=\"p-4 text-center\">\r\n                  <span className=\"bg-white/10 px-2 py-1 rounded text-xs font-bold text-white\">\r\n                    {user.registrationCount}\r\n                  </span>\r\n                </td>\r\n                <td className=\"p-4 text-right\">\r\n                  <select\r\n                    value={user.role || \"user\"}\r\n                    onChange={(e) => handleUpdateRole(user.uid, e.target.value)}\r\n                    className={`bg-transparent border rounded px-2 py-1 text-xs font-bold focus:outline-none focus:border-white/50 cursor-pointer ${\r\n                      user.role === \"admin\"\r\n                        ? \"text-[#BA170D] border-[#BA170D]/30\"\r\n                        : \"text-gray-400 border-white/10\"\r\n                    }`}\r\n                  >\r\n                    <option value=\"user\" className=\"text-black\">\r\n                      USER\r\n                    </option>\r\n                    <option value=\"admin\" className=\"text-black\">\r\n                      ADMIN\r\n                    </option>\r\n                    <option value=\"organizer\" className=\"text-black\">\r\n                      ORGANIZER\r\n                    </option>\r\n                  </select>\r\n                </td>\r\n                <td className=\"p-4 text-center\">\r\n                  <button\r\n                    onClick={() => handleDeleteUser(user.uid, user.name)}\r\n                    className=\"p-2 text-gray-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors\"\r\n                    title=\"Delete User\"\r\n                  >\r\n                    <Trash2 size={16} />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {filteredUsers.length === 0 && (\r\n          <div className=\"p-10 text-center text-gray-500\">\r\n            No users found matching your search.\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"text-right text-xs text-gray-600\">\r\n        Total Users: {users.length}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ui\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\components\\ui\\Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\data\\constant.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1005,1008],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1005,1008],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface EventItem {\r\n    title: string;\r\n    description: string;\r\n    image?: string;\r\n    tags: string[];\r\n    cols?: string;\r\n    gradient: string;\r\n    minParticipants: number | null;\r\n    maxParticipants: number | null;\r\n    timeLimit: string | null;\r\n    rules: string[];\r\n    eventType: 'individual' | 'group';\r\n    categoryType: 'on_stage' | 'off_stage' | 'flagship';\r\n    shortCode?: string;\r\n    date?: string;\r\n}\r\n\r\n\r\nexport interface Category {\r\n    title: string;\r\n    items: EventItem[];\r\n}\r\n\r\n// --- Firebase Data Structures ---\r\n\r\nexport interface UserProfile {\r\n    uid: string;\r\n    name: string;\r\n    email: string;\r\n    photoURL?: string;\r\n    department?: string;\r\n    semester?: string;\r\n    mobile?: string;\r\n    collegeId?: string; // e.g., CMA/22/CS/033\r\n    house?: string;\r\n    chestNo?: string; // User's unique chest number\r\n    createdAt?: string;\r\n    updatedAt?: string;\r\n    role?: 'user' | 'organizer' | 'admin';\r\n}\r\n\r\nexport const isProfileComplete = (profile: any): boolean => {\r\n    if (!profile) return false;\r\n    const { name, department, semester, house, mobile, collegeId } = profile;\r\n\r\n    // Check for presence and non-empty strings\r\n    const hasValue = (val: string | undefined) => val && val.trim().length > 0;\r\n\r\n    if (!hasValue(name)) return false;\r\n    if (!hasValue(department)) return false;\r\n    if (!hasValue(semester)) return false;\r\n    if (!hasValue(house)) return false;\r\n    if (!hasValue(collegeId)) return false;\r\n\r\n    // Mobile strict check (must be more than just \"+91\")\r\n    if (!mobile || !mobile.trim() || mobile.trim() === \"+91\" || mobile.length < 10) return false;\r\n\r\n    return true;\r\n};\r\n\r\n\r\n\r\nexport interface TeamMember {\r\n    uid: string; // Firebase Auth UID\r\n    name: string; // Display Name\r\n    email: string;\r\n    role: \"leader\" | \"member\"; // Leader created the team\r\n    status: \"pending\" | \"confirmed\" | \"rejected\"; // For invite flow (optional future use)\r\n}\r\n\r\nexport interface TeamRegistration {\r\n    id?: string; // Firestore Document ID (optional for creation)\r\n    eventId: string; // Event Title (e.g., \"MIME\")\r\n    eventTitle: string;\r\n    leaderId: string; // UID of the creator\r\n    members: TeamMember[];\r\n    memberIds?: string[]; // Array of member UIDs\r\n    teamName?: string; // Optional team name\r\n    status: \"confirmed\" | \"cancelled\";\r\n    teamChestNo?: string; // Team's chest number with event code (e.g., MIME101)\r\n    createdAt: string;\r\n}\r\n\r\nexport interface SoloRegistration {\r\n    userId: string; // User UID\r\n    events: string[]; // Array of Event Titles user has registered for individually\r\n    teamEvents?: string[]; // Array of Event Titles user has registered for as part of a team (for transactional counts)\r\n    lastUpdated: string;\r\n}\r\n\r\n// --- End Data Structures ---\r\n\r\nexport const categories: Category[] = [\r\n    {\r\n        title: \"Flagship Event\",\r\n        items: [\r\n            {\r\n                title: \"AROHA\",\r\n                description: \"The heartbeat of Jhalak. A fusion of rhythm, grace, and energy.\",\r\n                image: \"/dance.png\",\r\n                tags: [\"Main Stage\"],\r\n                cols: \"md:col-span-2 md:row-span-2\",\r\n                gradient: \"from-[#BA170D] to-black\",\r\n                minParticipants: null,\r\n                maxParticipants: null,\r\n                timeLimit: null,\r\n                rules: [],\r\n                eventType: 'group',\r\n                categoryType: 'flagship',\r\n                shortCode: 'ARH'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        title: \"On-Stage Events\",\r\n        items: [\r\n            {\r\n                title: \"MIME\",\r\n                description: \"Convey a theme through facial expressions, body movements, and gestures without words.\",\r\n                tags: [\"Group\", \"Drama\", \"NonΓÇæverbal\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 8,\r\n                timeLimit: \"7 minutes\",\r\n                rules: [\r\n                    \"Screening required\",\r\n                    \"Only one team per house\",\r\n                    \"Black and white clothing, white face makeup\",\r\n                    \"No props, no lyrics or narration, no vocal sounds\",\r\n                    \"Background instrumental music allowed\",\r\n                    \"No vulgar, offensive, political or religious content\"\r\n                ],\r\n                gradient: \"from-gray-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'MI'\r\n            },\r\n\r\n            {\r\n                title: \"Karaoke Song (Individual)\",\r\n                description: \"Solo singing performance with karaoke track.\",\r\n                tags: [\"Solo\", \"Music\", \"Karaoke\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"6 minutes\",\r\n                rules: [\r\n                    \"Any language\",\r\n                    \"Track on pen drive (participantΓÇÖs responsibility)\",\r\n                    \"Maximum 3 participants per house\",\r\n                    \"No offensive lyrics\"\r\n                ],\r\n                gradient: \"from-blue-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'KARA'\r\n            },\r\n\r\n            {\r\n                title: \"Group Song\",\r\n                description: \"Group singing performance in any language.\",\r\n                tags: [\"Group\", \"Music\", \"Choir\"],\r\n                minParticipants: 5,\r\n                maxParticipants: 10,\r\n                timeLimit: \"6 minutes\",\r\n                rules: [\r\n                    \"Any language\",\r\n                    \"Maximum 2 teams per house\",\r\n                    \"Be backstage 2 slots before turn\"\r\n                ],\r\n                gradient: \"from-purple-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'GS'\r\n            },\r\n\r\n            {\r\n                title: \"Thiruvathira\",\r\n                description: \"Traditional Kerala dance form performed in a group.\",\r\n                tags: [\"Group\", \"Traditional\", \"Dance\"],\r\n                minParticipants: 8,\r\n                maxParticipants: 10,\r\n                timeLimit: \"10 minutes\",\r\n                rules: [\r\n                    \"Track on pen drive (participantΓÇÖs responsibility)\",\r\n                    \"Only one team per house\",\r\n                    \"Screening required\",\r\n                    \"Be backstage 2 slots before turn\"\r\n                ],\r\n                gradient: \"from-orange-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'TH'\r\n            },\r\n\r\n            {\r\n                title: \"Monoact\",\r\n                description: \"Solo acting performance with a message.\",\r\n                tags: [\"Solo\", \"Acting\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"No bad language or offensive topics\",\r\n                    \"Vulgarity leads to disqualification\"\r\n                ],\r\n                gradient: \"from-yellow-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'MONO'\r\n            },\r\n\r\n            {\r\n                title: \"Group Dance\",\r\n                description: \"Group dance performance with choreography.\",\r\n                tags: [\"Group\", \"Dance\"],\r\n                minParticipants: 2,\r\n                maxParticipants: 15,\r\n                timeLimit: \"6ΓÇô10 minutes\",\r\n                rules: [\r\n                    \"Track on pen drive (participantΓÇÖs responsibility)\",\r\n                    \"Only two teams per house\",\r\n                    \"Screening required\",\r\n                    \"Costumes must be decent\",\r\n                    \"Be backstage 15 minutes before turn\"\r\n                ],\r\n                gradient: \"from-green-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'GD'\r\n            },\r\n\r\n            {\r\n                title: \"Step N Synchro\",\r\n                description: \"Synchronized dance routine for pairs emphasizing uniformity and timing.\",\r\n                tags: [\"Duo\", \"Dance\", \"Synchronized\"],\r\n                minParticipants: 2,\r\n                maxParticipants: 2,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"Maximum two pairs per house\",\r\n                    \"Track on pen drive (participantΓÇÖs responsibility)\",\r\n                    \"Screening required\",\r\n                    \"No vulgar/offensive gestures\",\r\n                    \"No dangerous stunts, fire, water, powder, sharp props\",\r\n                    \"Be backstage 15 minutes before turn\"\r\n                ],\r\n                gradient: \"from-teal-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'SNS'\r\n            },\r\n\r\n            {\r\n                title: \"Nostalgia (Dance)\",\r\n                description: \"Dance performance representing a specific past era (80s, 90s, early 2000s, folk tradition, vintage cinema).\",\r\n                tags: [\"Group\", \"Dance\", \"Nostalgic\"],\r\n                minParticipants: 2,\r\n                maxParticipants: 8,\r\n                timeLimit: \"6 minutes\",\r\n                rules: [\r\n                    \"Songs must be from before 2005\",\r\n                    \"Costumes must match the nostalgic theme\",\r\n                    \"Track on pen drive (participantΓÇÖs responsibility)\",\r\n                    \"Only two teams per house\",\r\n                    \"Screening required\"\r\n                ],\r\n                gradient: \"from-pink-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'NO'\r\n            },\r\n\r\n            {\r\n                title: \"Instrumental Music Solo\",\r\n                description: \"Solo performance on any instrument (string, wind, keyboard).\",\r\n                tags: [\"Solo\", \"Music\", \"Instrumental\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"10 minutes\",\r\n                rules: [\r\n                    \"Maximum 3 participants per house\",\r\n                    \"Bring own instrument\",\r\n                    \"Only live instrumental\",\r\n                    \"Tune before entering stage\",\r\n                    \"Metronome/click track permitted\"\r\n                ],\r\n                gradient: \"from-indigo-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'INST'\r\n            },\r\n\r\n            {\r\n                title: \"Oppana\",\r\n                description: \"Traditional Muslim wedding dance performed by girls.\",\r\n                tags: [\"Group\", \"Traditional\", \"Dance\", \"Girls only\"],\r\n                minParticipants: 7,\r\n                maxParticipants: 10,\r\n                timeLimit: \"8 minutes\",\r\n                rules: [\r\n                    \"Only girls\",\r\n                    \"Traditional attire: Kachi, Kuppayam, Thattam; bride in silk and jewelry\",\r\n                    \"Traditional Oppana songs in Malayalam/Mappila style\",\r\n                    \"No cinematic steps, western moves, acrobatics\",\r\n                    \"Screening required\",\r\n                    \"Only one team per house\"\r\n                ],\r\n                gradient: \"from-rose-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'OP'\r\n            },\r\n\r\n            {\r\n                title: \"Fancy Dress\",\r\n                description: \"Portray a famous personality, mythological figure, or creative concept.\",\r\n                tags: [\"Solo\", \"Creative\", \"Costume\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"2 minutes\",\r\n                rules: [\r\n                    \"Background music allowed\",\r\n                    \"No religious deity enactment\",\r\n                    \"No negative acts (smokers, drunkards)\",\r\n                    \"No dangerous materials\"\r\n                ],\r\n                gradient: \"from-cyan-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'FANC'\r\n            },\r\n\r\n            {\r\n                title: \"Fashion Show\",\r\n                description: \"Team fashion walk based on a specific theme.\",\r\n                tags: [\"Group\", \"Fashion\", \"Walk\"],\r\n                minParticipants: 2,\r\n                maxParticipants: 10,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"Each team must have a theme\",\r\n                    \"Costumes reflect creativity and theme\",\r\n                    \"Background music allowed\",\r\n                    \"No vulgarity or offensive gestures\",\r\n                    \"Only one team per house\"\r\n                ],\r\n                gradient: \"from-amber-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'FS'\r\n            },\r\n\r\n            {\r\n                title: \"Recitation\",\r\n                description: \"Recite a poem by a famous poet or an original piece.\",\r\n                tags: [\"Solo\", \"Literary\", \"Poetry\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"Any language, but humor should be understood by general audience\",\r\n                    \"Content must be appropriate and respectful\"\r\n                ],\r\n                gradient: \"from-emerald-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'RECI'\r\n            },\r\n\r\n            {\r\n                title: \"Light Music\",\r\n                description: \"Solo singing with live accompaniment (one instrument or shruti box).\",\r\n                tags: [\"Solo\", \"Music\", \"Light Music\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"One instrument (harmonium/keyboard/guitar) or shruti box allowed\",\r\n                    \"Songs can be original or popular\",\r\n                    \"Live event - no backing tracks or karaoke\"\r\n                ],\r\n                gradient: \"from-sky-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'LIGH'\r\n            },\r\n\r\n            {\r\n                title: \"Margam Kali\",\r\n                description: \"Traditional dance form of the Syrian Christians in Kerala.\",\r\n                tags: [\"Group\", \"Traditional\", \"Dance\"],\r\n                minParticipants: 7,\r\n                maxParticipants: 12,\r\n                timeLimit: \"10 minutes\",\r\n                rules: [\r\n                    \"Only one team per house\",\r\n                    \"Screening required\",\r\n                    \"Traditional attire: Chattayum Mundum and jewelry\"\r\n                ],\r\n                gradient: \"from-violet-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'MK'\r\n            },\r\n\r\n            {\r\n                title: \"Solo Dance\",\r\n                description: \"Individual dance performance in any style.\",\r\n                tags: [\"Solo\", \"Dance\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"3-5 minutes\",\r\n                rules: [\r\n                    \"Track on pen drive (participantΓÇÖs responsibility)\",\r\n                    \"Screening required\",\r\n                    \"No vulgar moves, decent outfits\",\r\n                    \"Maximum 3 participants per house\"\r\n                ],\r\n                gradient: \"from-fuchsia-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'SOLO'\r\n            },\r\n\r\n            {\r\n                title: \"RJ Hunt\",\r\n                description: \"On-the-spot hosting challenge with a given theme.\",\r\n                tags: [\"Solo\", \"Anchoring\", \"Speaking\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"Topics given on the spot\",\r\n                    \"Content must be appropriate, creative, and encouraging\",\r\n                    \"No offensive language\"\r\n                ],\r\n                gradient: \"from-lime-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'RJHT'\r\n            },\r\n\r\n            {\r\n                title: \"Vattapattu\",\r\n                description: \"Traditional folk song performance with percussion.\",\r\n                tags: [\"Group\", \"Music\", \"Folk\"],\r\n                minParticipants: 6,\r\n                maxParticipants: 10,\r\n                timeLimit: \"8 minutes\",\r\n                rules: [\r\n                    \"Includes lead singer and chorus\",\r\n                    \"Traditional folk or Mappila heritage songs only\",\r\n                    \"Traditional percussion (duff or clapping) mandatory, no electronic tracks\",\r\n                    \"Only one team per house\"\r\n                ],\r\n                gradient: \"from-stone-900 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'VA'\r\n            },\r\n\r\n            {\r\n                title: \"Kadhaprasangam (Story Telling)\",\r\n                description: \"Solo storytelling with a social or moral message.\",\r\n                tags: [\"Solo\", \"Storytelling\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"10 minutes\",\r\n                rules: [\r\n                    \"Adaptation of literary work or original script\",\r\n                    \"No reading from book/phone\",\r\n                    \"Must be appropriate for college audience\"\r\n                ],\r\n                gradient: \"from-red-900 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'KADH'\r\n            },\r\n\r\n            {\r\n                title: \"Mimicry\",\r\n                description: \"Solo vocal imitation of sounds, voices, or characters.\",\r\n                tags: [\"Solo\", \"Mimicry\", \"Comedy\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"3-5 minutes\",\r\n                rules: [\r\n                    \"Any language, humor must be understandable\",\r\n                    \"No vulgarity or offensive gestures\",\r\n                    \"No pre-recorded background music ΓÇô everything by voice\"\r\n                ],\r\n                gradient: \"from-orange-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'MIMI'\r\n            },\r\n\r\n            {\r\n                title: \"Group Folks' Song (Nadanpattu)\",\r\n                description: \"Group performance of authentic folk songs.\",\r\n                tags: [\"Group\", \"Music\", \"Folk\"],\r\n                minParticipants: 5,\r\n                maxParticipants: 10,\r\n                timeLimit: \"5-7 minutes\",\r\n                rules: [\r\n                    \"Includes singers and instrumentalists\",\r\n                    \"Traditional instruments encouraged\",\r\n                    \"Only authentic folk songs, no film songs or remixes\",\r\n                    \"Traditional ethnic wear recommended\"\r\n                ],\r\n                gradient: \"from-amber-800 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'GFS'\r\n            },\r\n\r\n            {\r\n                title: \"Spot Choreography\",\r\n                description: \"Impromptu dance choreography on a given theme or music.\",\r\n                tags: [\"Group\", \"Dance\", \"On-the-spot\"],\r\n                minParticipants: 2, // assumed\r\n                maxParticipants: null,\r\n                timeLimit: \"3 minutes\",\r\n                rules: [\r\n                    \"Theme/music provided on the spot\",\r\n                    \"No external objects\",\r\n                    \"No vulgarity or offensive gestures\",\r\n                    \"No dangerous props\"\r\n                ],\r\n                gradient: \"from-lime-800 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'SPOT'\r\n            },\r\n\r\n            {\r\n                title: \"Classical Dance\",\r\n                description: \"Solo performance in a recognised classical dance form.\",\r\n                tags: [\"Solo\", \"Dance\", \"Classical\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"8 minutes\",\r\n                rules: [\r\n                    \"Forms: Bharatanatyam, Mohiniyattam, Kuchipudi, Kathak, Kathakali (solo), Odissi, Manipuri, Sattriya\",\r\n                    \"Traditional costumes, ornaments, makeup\",\r\n                    \"No dangerous accessories, fire, water, glass\",\r\n                    \"No vulgarity or offensive content\"\r\n                ],\r\n                gradient: \"from-purple-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'CLAS'\r\n            },\r\n\r\n            {\r\n                title: \"Karnatic Music\",\r\n                description: \"Solo classical Carnatic vocal performance.\",\r\n                tags: [\"Solo\", \"Music\", \"Classical\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes\",\r\n                rules: [\r\n                    \"Classical Karnatic compositions only\",\r\n                    \"No film songs, fusion, light music, cinematic bhajans\",\r\n                    \"Electronic shruti box/tambura apps allowed\"\r\n                ],\r\n                gradient: \"from-indigo-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'on_stage',\r\n                shortCode: 'KARN'\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        title: \"Off-Stage Events\",\r\n        items: [\r\n            {\r\n                title: \"Essay Writing (English)\",\r\n                description: \"Write an essay in English on a given topic.\",\r\n                tags: [\"Writing\", \"Essay\", \"Solo\", \"English\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Topic announced 10 minutes before start\",\r\n                    \"800-1000 words\",\r\n                    \"No mobile phones, books, or electronic devices\",\r\n                    \"Plagiarism leads to disqualification\",\r\n                    \"Cannot leave hall during first 30 minutes\",\r\n                    \"Bring A4 sheet, use blue/black ink only\"\r\n                ],\r\n                gradient: \"from-blue-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'ESS_EN',\r\n                date: '18 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Essay Writing (Malayalam)\",\r\n                description: \"Write an essay in Malayalam on a given topic.\",\r\n                tags: [\"Writing\", \"Essay\", \"Solo\", \"Malayalam\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Topic announced 10 minutes before start\",\r\n                    \"800-1000 words\",\r\n                    \"No mobile phones, books, or electronic devices\",\r\n                    \"Plagiarism leads to disqualification\",\r\n                    \"Cannot leave hall during first 30 minutes\",\r\n                    \"Bring A4 sheet, use blue/black ink only\"\r\n                ],\r\n                gradient: \"from-blue-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'ESS_ML',\r\n                date: '20 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Essay Writing (Hindi)\",\r\n                description: \"Write an essay in Hindi on a given topic.\",\r\n                tags: [\"Writing\", \"Essay\", \"Solo\", \"Hindi\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Topic announced 10 minutes before start\",\r\n                    \"800-1000 words\",\r\n                    \"No mobile phones, books, or electronic devices\",\r\n                    \"Plagiarism leads to disqualification\",\r\n                    \"Cannot leave hall during first 30 minutes\",\r\n                    \"Bring A4 sheet, use blue/black ink only\"\r\n                ],\r\n                gradient: \"from-blue-600 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'ESS_HI',\r\n                date: '25 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Story Writing (English)\",\r\n                description: \"Write a creative story in English on a given topic.\",\r\n                tags: [\"Writing\", \"Story\", \"Solo\", \"English\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Topic announced 10 minutes before start\",\r\n                    \"800-1000 words\",\r\n                    \"No mobile phones, books, or electronic devices\",\r\n                    \"Plagiarism leads to disqualification\",\r\n                    \"Cannot leave hall during first 30 minutes\",\r\n                    \"Bring A4 sheet, use blue/black ink only\"\r\n                ],\r\n                gradient: \"from-purple-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'STRY_EN',\r\n                date: '20 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Story Writing (Malayalam)\",\r\n                description: \"Write a creative story in Malayalam on a given topic.\",\r\n                tags: [\"Writing\", \"Story\", \"Solo\", \"Malayalam\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Topic announced 10 minutes before start\",\r\n                    \"800-1000 words\",\r\n                    \"No mobile phones, books, or electronic devices\",\r\n                    \"Plagiarism leads to disqualification\",\r\n                    \"Cannot leave hall during first 30 minutes\",\r\n                    \"Bring A4 sheet, use blue/black ink only\"\r\n                ],\r\n                gradient: \"from-purple-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'STRY_ML',\r\n                date: '18 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Story Writing (Hindi)\",\r\n                description: \"Write a creative story in Hindi on a given topic.\",\r\n                tags: [\"Writing\", \"Story\", \"Solo\", \"Hindi\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Topic announced 10 minutes before start\",\r\n                    \"800-1000 words\",\r\n                    \"No mobile phones, books, or electronic devices\",\r\n                    \"Plagiarism leads to disqualification\",\r\n                    \"Cannot leave hall during first 30 minutes\",\r\n                    \"Bring A4 sheet, use blue/black ink only\"\r\n                ],\r\n                gradient: \"from-purple-600 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'STRY_HI',\r\n                date: '21 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Poem Writing (English)\",\r\n                description: \"Compose a poem in English on a given theme or starting line.\",\r\n                tags: [\"Writing\", \"Poetry\", \"Solo\", \"English\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Theme/starting line given 10 minutes before\",\r\n                    \"1-2 pages\",\r\n                    \"Bring A4 sheet\",\r\n                    \"No plagiarism, no phones\",\r\n                    \"No vulgarity or hate speech\"\r\n                ],\r\n                gradient: \"from-green-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'POEM_EN',\r\n                date: '19 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Poem Writing (Malayalam)\",\r\n                description: \"Compose a poem in Malayalam on a given theme or starting line.\",\r\n                tags: [\"Writing\", \"Poetry\", \"Solo\", \"Malayalam\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Theme/starting line given 10 minutes before\",\r\n                    \"1-2 pages\",\r\n                    \"Bring A4 sheet\",\r\n                    \"No plagiarism, no phones\",\r\n                    \"No vulgarity or hate speech\"\r\n                ],\r\n                gradient: \"from-green-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'POEM_ML',\r\n                date: '21 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Poem Writing (Hindi)\",\r\n                description: \"Compose a poem in Hindi on a given theme or starting line.\",\r\n                tags: [\"Writing\", \"Poetry\", \"Solo\", \"Hindi\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Theme/starting line given 10 minutes before\",\r\n                    \"1-2 pages\",\r\n                    \"Bring A4 sheet\",\r\n                    \"No plagiarism, no phones\",\r\n                    \"No vulgarity or hate speech\"\r\n                ],\r\n                gradient: \"from-green-600 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'POEM_HI',\r\n                date: '25 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Pencil Sketching\",\r\n                description: \"Create a pencil sketch based on a given theme.\",\r\n                tags: [\"Art\", \"Sketching\", \"Solo\", \"Pencil\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"2 hours\",\r\n                rules: [\r\n                    \"Theme given 10 minutes before\",\r\n                    \"Bring own pencils (HB, 2B, 4B, etc.); drawing sheet provided\",\r\n                    \"No reference photos\",\r\n                    \"Maintain silence\",\r\n                    \"Only pencil medium allowed\"\r\n                ],\r\n                gradient: \"from-gray-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'PENC',\r\n                date: '18 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Water Colour Painting\",\r\n                description: \"Create a water colour painting based on a given theme.\",\r\n                tags: [\"Art\", \"Painting\", \"Solo\", \"Water Colour\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"2 hours\",\r\n                rules: [\r\n                    \"Theme given 10 minutes before\",\r\n                    \"Bring own water colours, brushes, and palette; drawing sheet provided\",\r\n                    \"No reference photos\",\r\n                    \"Maintain silence\",\r\n                    \"Only water colour medium allowed\"\r\n                ],\r\n                gradient: \"from-cyan-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'WATC',\r\n                date: '19 Feb 2026'\r\n            },\r\n            {\r\n                title: \"Glass Painting\",\r\n                description: \"Paint on glass sheet with a given theme.\",\r\n                tags: [\"Art\", \"Painting\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"2 hours\",\r\n                rules: [\r\n                    \"Theme given 10 minutes before\",\r\n                    \"Bring own glass sheet (30x30 cm), colours, brushes\",\r\n                    \"Keep workspace tidy\"\r\n                ],\r\n                gradient: \"from-pink-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'GLAS',\r\n                date: '20 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Poster Designing\",\r\n                description: \"Design a hand-drawn poster on a given theme.\",\r\n                tags: [\"Art\", \"Design\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1.5 hours\",\r\n                rules: [\r\n                    \"Theme on the spot\",\r\n                    \"Drawing sheet provided\",\r\n                    \"Bring colours and materials\",\r\n                    \"Hand-drawn only, no digital prints or stencils\"\r\n                ],\r\n                gradient: \"from-purple-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'POST',\r\n                date: '20 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Collage\",\r\n                description: \"Create a collage using provided materials on a given theme.\",\r\n                tags: [\"Art\", \"Collage\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1.5 hours\",\r\n                rules: [\r\n                    \"Theme on the spot\",\r\n                    \"Chart paper provided\",\r\n                    \"Bring magazines, glue, scissors, etc.\",\r\n                    \"No phones or internet\"\r\n                ],\r\n                gradient: \"from-red-800 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'COLL',\r\n                date: '21 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Calligraphy\",\r\n                description: \"Write a given quote or poem in an artistic style.\",\r\n                tags: [\"Art\", \"Calligraphy\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Bring A4 sheet and materials (pen, pencils, watercolour, etc.)\",\r\n                    \"No stencils\",\r\n                    \"Subtle borders allowed, but must not overshadow legibility\"\r\n                ],\r\n                gradient: \"from-indigo-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'CALL',\r\n                date: '25 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Cartoon\",\r\n                description: \"Draw a cartoon on a given theme.\",\r\n                tags: [\"Art\", \"Cartoon\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Theme on the spot\",\r\n                    \"Chart paper provided\",\r\n                    \"Bring materials\",\r\n                    \"All drawing done during event, no preΓÇæsketched outlines\",\r\n                    \"Use black ink, markers, coloured pencils; no charcoal\"\r\n                ],\r\n                gradient: \"from-orange-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'CART',\r\n                date: '25 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Extempore (English)\",\r\n                description: \"Speak in English on a topic drawn by lot with minimal preparation.\",\r\n                tags: [\"Speaking\", \"Solo\", \"Impromptu\", \"English\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes speaking, 5 minutes thinking\",\r\n                rules: [\r\n                    \"Topic picked by lot\",\r\n                    \"No paper or materials during speech\"\r\n                ],\r\n                gradient: \"from-teal-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'EXTM_EN',\r\n                date: '18 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Extempore (Malayalam)\",\r\n                description: \"Speak in Malayalam on a topic drawn by lot with minimal preparation.\",\r\n                tags: [\"Speaking\", \"Solo\", \"Impromptu\", \"Malayalam\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes speaking, 5 minutes thinking\",\r\n                rules: [\r\n                    \"Topic picked by lot\",\r\n                    \"No paper or materials during speech\"\r\n                ],\r\n                gradient: \"from-teal-600 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'EXTM_ML',\r\n                date: '19 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Extempore (Hindi)\",\r\n                description: \"Speak in Hindi on a topic drawn by lot with minimal preparation.\",\r\n                tags: [\"Speaking\", \"Solo\", \"Impromptu\", \"Hindi\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"5 minutes speaking, 5 minutes thinking\",\r\n                rules: [\r\n                    \"Topic picked by lot\",\r\n                    \"No paper or materials during speech\"\r\n                ],\r\n                gradient: \"from-teal-500 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'EXTM_HI',\r\n                date: '20 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Quiz\",\r\n                description: \"General knowledge and current affairs quiz for teams of two.\",\r\n                tags: [\"Team\", \"Quiz\", \"Knowledge\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 2,\r\n                timeLimit: null, // not specified\r\n                rules: [\r\n                    \"Maximum 2 participants per team\",\r\n                    \"Quiz Master's decision is final\"\r\n                ],\r\n                gradient: \"from-cyan-700 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'QU'\r\n            },\r\n\r\n            {\r\n                title: \"Debate\",\r\n                description: \"Structured debate on a given topic (team of two).\",\r\n                tags: [\"Team\", \"Debate\", \"Speaking\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 2,\r\n                timeLimit: \"3 min main speech + 1-2 min rebuttal\",\r\n                rules: [\r\n                    \"Topic given day before\",\r\n                    \"English or Malayalam\",\r\n                    \"Opening statement, rebuttal, concluding remarks\",\r\n                    \"Warning bell 30 seconds before end\",\r\n                    \"Cue cards allowed, no phones/laptops on stage\",\r\n                    \"No personal insults\"\r\n                ],\r\n                gradient: \"from-rose-700 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'DE'\r\n            },\r\n\r\n            {\r\n                title: \"Art from Waste\",\r\n                description: \"Create artwork using waste materials.\",\r\n                tags: [\"Art\", \"Recycling\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"2 hours\",\r\n                rules: [\r\n                    \"Use waste materials like paper scraps, plastic bottles, cardboard\",\r\n                    \"No ready-made decorative items\",\r\n                    \"Adhesives and basic colouring allowed\"\r\n                ],\r\n                gradient: \"from-lime-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'ARTW',\r\n                date: '21 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Logo Making\",\r\n                description: \"Design a hand-drawn logo on a given theme.\",\r\n                tags: [\"Art\", \"Design\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Theme on the spot\",\r\n                    \"Chart paper provided\",\r\n                    \"Bring materials\",\r\n                    \"Clean and recognisable design\"\r\n                ],\r\n                gradient: \"from-amber-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'LOGO',\r\n                date: '25 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Caption Writing\",\r\n                description: \"Write a caption for a displayed image.\",\r\n                tags: [\"Writing\", \"Creative\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"30 minutes\",\r\n                rules: [\r\n                    \"Image displayed on the spot\",\r\n                    \"Caption in English or Malayalam\",\r\n                    \"Max 20 words\",\r\n                    \"No offensive language\",\r\n                    \"No phones or internet\"\r\n                ],\r\n                gradient: \"from-emerald-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'CAPT',\r\n                date: '25 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Face Painting\",\r\n                description: \"Create a face painting design on a provided model.\",\r\n                tags: [\"Art\", \"Face Painting\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"2 hours\",\r\n                rules: [\r\n                    \"Choose own theme\",\r\n                    \"Use skin-safe, non-toxic paints\",\r\n                    \"Bring own materials (brushes, sponges, etc.)\",\r\n                    \"Model will be provided by organizers\",\r\n                    \"Design covers significant part of face\",\r\n                    \"No vulgar/offensive content\"\r\n                ],\r\n                gradient: \"from-fuchsia-700 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'FACE',\r\n                date: '19 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Mehendi Designing\",\r\n                description: \"Apply freehand mehendi on hand.\",\r\n                tags: [\"Art\", \"Mehendi\", \"Solo\"],\r\n                minParticipants: 1,\r\n                maxParticipants: 1,\r\n                timeLimit: \"1 hour\",\r\n                rules: [\r\n                    \"Choose own theme\",\r\n                    \"Applied only on hand\",\r\n                    \"No pre-drawn sketches or stencils - all freehand\"\r\n                ],\r\n                gradient: \"from-rose-600 to-black\",\r\n                eventType: 'individual',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'MEHN',\r\n                date: '21 Feb 2026'\r\n            },\r\n\r\n            {\r\n                title: \"Movie Scene Recreation\",\r\n                description: \"Recreate a scene from a film in a pre-recorded video.\",\r\n                tags: [\"Video\", \"Acting\", \"Team\"],\r\n                minParticipants: 2,\r\n                maxParticipants: 5,\r\n                timeLimit: \"10 minutes (video length)\",\r\n                rules: [\r\n                    \"Recreate a scene from a recognised film (Indian or International)\",\r\n                    \"Video must be pre-recorded, not live\",\r\n                    \"Landscape orientation (16:9), min 720p\",\r\n                    \"Original source played at beginning\",\r\n                    \"Upload by 26-02-2026\",\r\n                    \"Submission Link: https://drive.google.com/drive/folders/1bGGA52Y9Q0XA3FJVp0ouWS39PPSKggUK\",\r\n                    \"No vulgar/offensive content\"\r\n                ],\r\n                gradient: \"from-sky-700 to-black\",\r\n                eventType: 'group',\r\n                categoryType: 'off_stage',\r\n                shortCode: 'MSR'\r\n            }\r\n\r\n        ]\r\n    }\r\n];\r\n\r\nexport const DEPARTMENTS = [\"CIVIL\", \"MECH\", \"EEE\", \"CSE\"];\r\nexport const SEMESTERS = [\"S2\", \"S4\", \"S6\", \"S8\"];\r\nexport const CSE_SEMESTERS = [\"S2 A\", \"S2 B\", \"S4 A\", \"S4 B\", \"S6\", \"S8\"];\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\data\\jhalakEventsData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\data\\jhalakRulesData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\lib\\adminService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'QuerySnapshot' is defined but never used.","line":2,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"QuerySnapshot"},"fix":{"range":[66,81],"text":""},"desc":"Remove unused variable \"QuerySnapshot\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used.","line":2,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":58,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"DocumentData"},"fix":{"range":[81,95],"text":""},"desc":"Remove unused variable \"DocumentData\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used.","line":2,"column":153,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":162,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"deleteDoc"},"fix":{"range":[188,199],"text":""},"desc":"Remove unused variable \"deleteDoc\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3788,3791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3788,3791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'opCount' is assigned a value but never used.","line":209,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":209,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8459,8462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8459,8462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":227,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9153,9156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9153,9156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9787,9790],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9787,9790],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":298,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12111,12114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12111,12114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":322,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":322,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12912,12915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12912,12915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":356,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":356,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14194,14197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14194,14197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":394,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":394,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15181,15184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15181,15184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":398,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":398,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15283,15286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15283,15286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":448,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":448,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17389,17392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17389,17392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":526,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20935,20938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20935,20938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":569,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":569,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22539,22542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22539,22542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":570,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":570,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22607,22610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22607,22610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":580,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":580,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22995,22998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22995,22998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":675,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":675,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27190,27193],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27190,27193],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":769,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":769,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30828,30831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30828,30831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":792,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":792,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31730,31733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31730,31733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":817,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":817,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32852,32855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32852,32855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from \"@/lib/firebase\";\r\nimport { collection, getDocs, QuerySnapshot, DocumentData, doc, setDoc, query, where, writeBatch, arrayRemove, runTransaction, serverTimestamp, getDoc, deleteDoc, arrayUnion } from \"firebase/firestore\";\r\nimport { UserProfile } from \"@/data/constant\";\r\n\r\n\r\nexport interface AdminUserView extends UserProfile {\r\n    registrationCount: number;\r\n    chestNo?: string; // User's personal chest number\r\n    chestNumbers: string[]; // List of chest numbers (if any)\r\n    events: string[]; // List of registered event titles\r\n}\r\n\r\nexport const fetchAllUsersWithData = async (): Promise<AdminUserView[]> => {\r\n    if (!db) return [];\r\n\r\n    try {\r\n        const firestore = db; // Capture for closure safety if needed, though db is external\r\n\r\n        // 1. Fetch All Users\r\n        const usersRef = collection(firestore, \"users\");\r\n        const usersSnap = await getDocs(usersRef);\r\n        const users: UserProfile[] = [];\r\n        usersSnap.forEach(doc => {\r\n            const userData = doc.data() as UserProfile;\r\n            // Ensure uid is set from doc.id if missing in data\r\n            users.push({ ...userData, uid: doc.id });\r\n        });\r\n\r\n\r\n        // 2. Fetch All Event Registrations\r\n        const regsRef = collection(firestore, \"event_registrations\");\r\n        const regsSnap = await getDocs(regsRef);\r\n\r\n        // Map: UserId -> { count, chestNos, eventTitles }\r\n        const regMap = new Map<string, { count: number, chests: Set<string>, events: Set<string> }>();\r\n\r\n        regsSnap.forEach(doc => {\r\n            const data = doc.data();\r\n            // Handle Individual and Team\r\n            if (data.type === 'individual' && data.userId) {\r\n                if (!regMap.has(data.userId)) regMap.set(data.userId, { count: 0, chests: new Set(), events: new Set() });\r\n                const entry = regMap.get(data.userId)!;\r\n                entry.count++;\r\n                if (data.chestNo) entry.chests.add(data.chestNo);\r\n                if (data.eventTitle) entry.events.add(data.eventTitle);\r\n\r\n            } else if (data.type === 'team' && data.memberIds && Array.isArray(data.memberIds)) {\r\n                // Determine if we count this for every member or just the team?\r\n                // Usually for \"User Management\", we want to see what they are participating in.\r\n                data.memberIds.forEach((uid: string) => {\r\n                    if (!regMap.has(uid)) regMap.set(uid, { count: 0, chests: new Set(), events: new Set() });\r\n                    const entry = regMap.get(uid)!;\r\n                    entry.count++;\r\n                    if (data.chestNo) entry.chests.add(data.chestNo);\r\n                    if (data.eventTitle) entry.events.add(data.eventTitle);\r\n                });\r\n            }\r\n        });\r\n\r\n        // 3. Merge\r\n        const result: AdminUserView[] = users.map(user => {\r\n            const regData = regMap.get(user.uid) || { count: 0, chests: new Set<string>(), events: new Set<string>() };\r\n            return {\r\n                ...user,\r\n                registrationCount: regData.count,\r\n                chestNumbers: Array.from(regData.chests),\r\n                events: Array.from(regData.events)\r\n            };\r\n        });\r\n\r\n        return result;\r\n\r\n    } catch (error) {\r\n        console.error(\"Error fetching admin data:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\nexport interface EventStat {\r\n    title: string;\r\n    shortCode: string;\r\n    type: 'individual' | 'group';\r\n    category: string;\r\n    totalRegistrations: number; // Count of registration docs (Teams count as 1 here usually, or should we count teams?)\r\n    // Let's count \"Entries\" (Teams or Individuals) and \"Participants\" (People)\r\n    entryCount: number;\r\n    participantCount: number;\r\n    registrations: any[]; // Full data for export\r\n    isRegistrationClosed: boolean;\r\n}\r\n\r\nimport { categories } from \"@/data/constant\";\r\n\r\nexport const fetchEventStats = async (): Promise<EventStat[]> => {\r\n    if (!db) return [];\r\n\r\n    try {\r\n        const firestore = db;\r\n        const regsRef = collection(firestore, \"event_registrations\");\r\n        const regsSnap = await getDocs(regsRef);\r\n\r\n        // Initialize Map with all available events from constants\r\n        const statsMap = new Map<string, EventStat>();\r\n\r\n        categories.forEach(cat => {\r\n            cat.items.forEach(item => {\r\n                statsMap.set(item.title, {\r\n                    title: item.title,\r\n                    shortCode: item.shortCode || \"N/A\",\r\n                    type: item.eventType,\r\n                    category: cat.title,\r\n                    totalRegistrations: 0,\r\n                    entryCount: 0,\r\n                    participantCount: 0,\r\n                    registrations: [],\r\n                    isRegistrationClosed: false\r\n                });\r\n            });\r\n        });\r\n\r\n        // Fetch Event Settings (Closed Status)\r\n        const settingsRef = collection(firestore, \"event_settings\");\r\n        const settingsSnap = await getDocs(settingsRef);\r\n        settingsSnap.forEach(doc => {\r\n            const data = doc.data();\r\n            if (statsMap.has(doc.id)) {\r\n                statsMap.get(doc.id)!.isRegistrationClosed = data.isClosed || false;\r\n            }\r\n        });\r\n\r\n        regsSnap.forEach(doc => {\r\n            const data = doc.data();\r\n            const eventTitle = data.eventTitle;\r\n\r\n            if (statsMap.has(eventTitle)) {\r\n                const stat = statsMap.get(eventTitle)!;\r\n                stat.registrations.push(data);\r\n                stat.entryCount++;\r\n\r\n                if (data.type === 'individual') {\r\n                    stat.participantCount++;\r\n                } else if (data.type === 'team' && Array.isArray(data.memberIds)) {\r\n                    stat.participantCount += data.memberIds.length;\r\n                }\r\n            }\r\n        });\r\n\r\n        return Array.from(statsMap.values());\r\n\r\n    } catch (error) {\r\n        console.error(\"Error fetching event stats:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\n\r\n\r\nexport const resetEventCounter = async (eventTitle: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n\r\n    try {\r\n        const firestore = db;\r\n\r\n        // 1. Fetch all registrations for this event\r\n        const regQuery = query(collection(firestore, \"event_registrations\"), where(\"eventTitle\", \"==\", eventTitle));\r\n        const regDocs = await getDocs(regQuery);\r\n\r\n        if (regDocs.empty) {\r\n            // Just reset counter if no registrations\r\n            const counterRef = doc(firestore, \"counters\", eventTitle);\r\n            await setDoc(counterRef, { count: 0 }, { merge: true });\r\n            return { success: true, message: \"Counter reset (No registrations found).\" };\r\n        }\r\n\r\n        // 2. Perform Batch Deletion (Batches of 500)\r\n        // Since we might have > 500 ops, we'll process in chunks or just one big batch if small.\r\n        // For simplicity in this context, assuming < 500 participants per event to delete at once or we loop.\r\n\r\n        const batch = writeBatch(firestore);\r\n        let opCount = 0;\r\n\r\n        for (const regDoc of regDocs.docs) {\r\n            const data = regDoc.data();\r\n\r\n            // Delete Event Registration Doc\r\n            batch.delete(regDoc.ref);\r\n            opCount++;\r\n\r\n            // Handle Individual: Remove from User Profile\r\n            if (data.type === 'individual' && data.userId) {\r\n                const userRef = doc(firestore, \"registrations\", data.userId);\r\n                // We use arrayRemove to take this event out of their list\r\n                batch.update(userRef, {\r\n                    events: arrayRemove(eventTitle)\r\n                });\r\n                opCount++;\r\n            }\r\n            // Handle Team: Delete Team Doc\r\n            else if (data.type === 'team' && data.teamId) {\r\n                const teamRef = doc(firestore, \"teams\", data.teamId);\r\n                batch.delete(teamRef);\r\n                opCount++;\r\n            }\r\n        }\r\n\r\n        // 3. Reset Counter\r\n        const counterRef = doc(firestore, \"counters\", eventTitle);\r\n        batch.set(counterRef, { count: 0 }, { merge: true });\r\n        opCount++;\r\n\r\n        await batch.commit();\r\n\r\n        return { success: true, message: `Reset complete. Deleted ${regDocs.size} registrations and reset counter.` };\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error resetting counter and data:\", error);\r\n        return { success: false, message: error.message || \"Failed to reset.\" };\r\n    }\r\n};\r\n\r\nexport const toggleEventRegistration = async (eventTitle: string, currentStatus: boolean): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    try {\r\n        const settingsRef = doc(db, \"event_settings\", eventTitle);\r\n        await setDoc(settingsRef, { isClosed: !currentStatus }, { merge: true });\r\n        return { success: true, message: `Registration ${!currentStatus ? \"Closed\" : \"Opened\"} for ${eventTitle}` };\r\n    } catch (error: any) {\r\n        console.error(\"Error toggling registration:\", error);\r\n        return { success: false, message: error.message || \"Failed to toggle registration.\" };\r\n    }\r\n};\r\n\r\n\r\n\r\n// 4. Update User Role\r\nexport const updateUserRole = async (uid: string, newRole: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    try {\r\n        const userRef = doc(db, \"users\", uid);\r\n        await setDoc(userRef, { role: newRole }, { merge: true });\r\n        return { success: true, message: \"User role updated successfully.\" };\r\n    } catch (error: any) {\r\n        console.error(\"Error updating user role:\", error);\r\n        return { success: false, message: error.message || \"Failed to update role.\" };\r\n    }\r\n};\r\n\r\n// 5. Delete User Data\r\nexport const deleteUser = async (uid: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n\r\n    try {\r\n        const firestore = db;\r\n        const batch = writeBatch(firestore);\r\n\r\n        // 1. Delete User Profile\r\n        const userRef = doc(firestore, \"users\", uid);\r\n        batch.delete(userRef);\r\n\r\n        // 2. Delete Solo Registrations Tracker\r\n        const regTrackerRef = doc(firestore, \"registrations\", uid);\r\n        batch.delete(regTrackerRef);\r\n\r\n        // 3. Delete Individual Event Registrations\r\n        const indRegQuery = query(collection(firestore, \"event_registrations\"), where(\"userId\", \"==\", uid));\r\n        const indRegSnap = await getDocs(indRegQuery);\r\n        indRegSnap.forEach(doc => {\r\n            batch.delete(doc.ref);\r\n        });\r\n\r\n        // 4. Handle Team Memberships\r\n        // A. As Leader -> Delete Team & Team Registration\r\n        const ledTeamQuery = query(collection(firestore, \"teams\"), where(\"leaderId\", \"==\", uid));\r\n        const ledTeamSnap = await getDocs(ledTeamQuery);\r\n        ledTeamSnap.forEach(doc => {\r\n            batch.delete(doc.ref);\r\n        });\r\n\r\n        const ledTeamRegQuery = query(collection(firestore, \"event_registrations\"), where(\"leaderId\", \"==\", uid));\r\n        const ledTeamRegSnap = await getDocs(ledTeamRegQuery);\r\n        ledTeamRegSnap.forEach(doc => {\r\n            batch.delete(doc.ref);\r\n        });\r\n\r\n        await batch.commit();\r\n\r\n        // 5. Cleanup as Member (Separate batch due to complexity)\r\n        const memberCleanupBatch = writeBatch(firestore);\r\n        let hasMemberCleanup = false;\r\n\r\n        const memTeamQuery = query(collection(firestore, \"teams\"), where(\"memberIds\", \"array-contains\", uid));\r\n        const memTeamSnap = await getDocs(memTeamQuery);\r\n        memTeamSnap.forEach(doc => {\r\n            const data = doc.data();\r\n            if (data.leaderId !== uid) {\r\n                memberCleanupBatch.update(doc.ref, {\r\n                    memberIds: arrayRemove(uid),\r\n                    members: (data.members || []).filter((m: any) => m.uid !== uid)\r\n                });\r\n                hasMemberCleanup = true;\r\n            }\r\n        });\r\n\r\n        const memRegQuery = query(collection(firestore, \"event_registrations\"), where(\"memberIds\", \"array-contains\", uid));\r\n        const memRegSnap = await getDocs(memRegQuery);\r\n        memRegSnap.forEach(doc => {\r\n            const data = doc.data();\r\n            if (data.leaderId !== uid) {\r\n                memberCleanupBatch.update(doc.ref, {\r\n                    memberIds: arrayRemove(uid)\r\n                });\r\n                hasMemberCleanup = true;\r\n            }\r\n        });\r\n\r\n        if (hasMemberCleanup) {\r\n            await memberCleanupBatch.commit();\r\n        }\r\n\r\n        return { success: true, message: \"User deleted successfully.\" };\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error deleting user:\", error);\r\n        return { success: false, message: error.message || \"Failed to delete user.\" };\r\n    }\r\n};\r\n\r\n// 6. Bulk Delete All Users (Hazardous!)\r\nexport const deleteAllUsers = async (): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    try {\r\n        const firestore = db;\r\n\r\n        const deleteCollection = async (colName: string) => {\r\n            const colRef = collection(firestore, colName);\r\n            const snap = await getDocs(colRef);\r\n            const batch = writeBatch(firestore);\r\n            let count = 0;\r\n            snap.forEach(doc => {\r\n                batch.delete(doc.ref);\r\n                count++;\r\n            });\r\n            if (count > 0) await batch.commit();\r\n            return count;\r\n        };\r\n\r\n        await deleteCollection(\"users\");\r\n        await deleteCollection(\"registrations\");\r\n        await deleteCollection(\"event_registrations\");\r\n        await deleteCollection(\"teams\");\r\n\r\n        await setDoc(doc(firestore, \"counters\", \"user_chest_numbers\"), { count: 0 }, { merge: true });\r\n\r\n        return { success: true, message: \"All users and related data wiped.\" };\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error deleting all:\", error);\r\n        return { success: false, message: error.message || \"Failed to wipe data.\" };\r\n    }\r\n};\r\n\r\n// 7. Data Structure for Detailed Event View\r\nexport interface DetailedRegistration {\r\n    id: string; // Document ID (registration id)\r\n    type: 'individual' | 'team';\r\n    chestNo: string; // The primary chest number\r\n    teamChestNo?: string;\r\n\r\n    // Core Participant Info (Leader for teams)\r\n    name: string;\r\n    email: string;\r\n    mobile: string;\r\n    collegeId: string;\r\n    department: string;\r\n    semester: string;\r\n    house: string;\r\n    uid: string;\r\n\r\n    // Team Specific\r\n    teamName?: string;\r\n    leaderChestNo?: string;\r\n    members?: {\r\n        name: string;\r\n        chestNo: string;\r\n        uid: string;\r\n        email: string;\r\n        collegeId?: string;\r\n        mobile?: string;\r\n        department?: string;\r\n        semester?: string;\r\n        house?: string;\r\n    }[];\r\n\r\n    registeredAt: any; // Timestamp\r\n\r\n    // Participation tracking\r\n    participated?: boolean;\r\n    participatedAt?: any;\r\n}\r\n\r\n// 8. Fetch Detailed Registrations for a Single Event\r\nexport const fetchDetailedEventRegistrations = async (eventTitle: string): Promise<DetailedRegistration[]> => {\r\n    if (!db) return [];\r\n\r\n    try {\r\n        const firestore = db;\r\n\r\n        // Fetch all registrations for this event\r\n        const q = query(collection(firestore, \"event_registrations\"), where(\"eventTitle\", \"==\", eventTitle));\r\n        const regSnap = await getDocs(q);\r\n\r\n        // Fetch all users to map details\r\n        const usersRef = collection(firestore, \"users\");\r\n        const usersSnap = await getDocs(usersRef);\r\n        const userMap = new Map<string, UserProfile>();\r\n\r\n        usersSnap.forEach(doc => {\r\n            userMap.set(doc.id, { ...doc.data(), uid: doc.id } as UserProfile);\r\n        });\r\n\r\n        const results: DetailedRegistration[] = [];\r\n\r\n        regSnap.forEach((docSnap) => {\r\n            const data = docSnap.data();\r\n\r\n            if (data.type === 'individual' && data.userId) {\r\n                const user = userMap.get(data.userId);\r\n                if (user) {\r\n                    results.push({\r\n                        id: docSnap.id,\r\n                        type: 'individual',\r\n                        chestNo: data.userChestNo || data.chestNo || \"-\",\r\n                        uid: user.uid,\r\n                        name: user.name || \"Unknown\",\r\n                        email: user.email || \"-\",\r\n                        mobile: user.mobile || \"-\",\r\n                        collegeId: user.collegeId || \"-\",\r\n                        department: user.department || \"-\",\r\n                        semester: user.semester || \"-\",\r\n                        house: user.house || \"-\",\r\n                        registeredAt: data.registeredAt,\r\n                        participated: data.participated || false,\r\n                        participatedAt: data.participatedAt || null,\r\n                    });\r\n                }\r\n            } else if (data.type === 'team' && data.leaderId) {\r\n                const leader = userMap.get(data.leaderId);\r\n                const members: any[] = [];\r\n\r\n                if (data.memberIds && Array.isArray(data.memberIds)) {\r\n                    data.memberIds.forEach((mid: string) => {\r\n                        if (mid === data.leaderId) return; // Skip leader\r\n                        const mUser = userMap.get(mid);\r\n                        if (mUser) {\r\n                            members.push({\r\n                                uid: mUser.uid,\r\n                                name: mUser.name || \"Unknown\",\r\n                                email: mUser.email || \"-\",\r\n                                chestNo: (data.memberChestNos && data.memberChestNos[mid]) || \"-\",\r\n                                collegeId: mUser.collegeId || \"-\",\r\n                                mobile: mUser.mobile || \"-\",\r\n                                house: mUser.house || \"-\",\r\n                                department: mUser.department || \"-\",\r\n                                semester: mUser.semester || \"-\"\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n\r\n                if (leader) {\r\n                    results.push({\r\n                        id: docSnap.id,\r\n                        type: 'team',\r\n                        chestNo: data.teamChestNo || data.chestNo || \"-\", // Team Chest No\r\n                        teamChestNo: data.teamChestNo,\r\n                        leaderChestNo: data.leaderChestNo,\r\n                        uid: leader.uid,\r\n                        name: leader.name || \"Unknown (Leader)\",\r\n                        teamName: data.teamName,\r\n                        email: leader.email || \"-\",\r\n                        mobile: leader.mobile || \"-\",\r\n                        collegeId: leader.collegeId || \"-\",\r\n                        department: leader.department || \"-\",\r\n                        semester: leader.semester || \"-\",\r\n                        house: leader.house || \"-\",\r\n                        members: members,\r\n                        registeredAt: data.registeredAt,\r\n                        participated: data.participated || false,\r\n                        participatedAt: data.participatedAt || null,\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        return results;\r\n\r\n    } catch (error) {\r\n        console.error(\"Error fetching detailed registrations:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\n// 9. Fix User Registration Data (Remove event from arrays)\r\nexport const cleanUserRegistration = async (uid: string, eventTitle: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    try {\r\n        const regRef = doc(db, \"registrations\", uid);\r\n        await setDoc(regRef, {\r\n            events: arrayRemove(eventTitle),\r\n            teamEvents: arrayRemove(eventTitle)\r\n        }, { merge: true });\r\n\r\n        // Also clean up any stale event_registration docs for this user/event combo if they exist individually\r\n        // (Team cleanup is complex, but this helps the main blocker)\r\n        const q = query(\r\n            collection(db, \"event_registrations\"),\r\n            where(\"userId\", \"==\", uid),\r\n            where(\"eventTitle\", \"==\", eventTitle)\r\n        );\r\n        const snaps = await getDocs(q);\r\n        const batch = writeBatch(db);\r\n        snaps.forEach(doc => batch.delete(doc.ref));\r\n        if (!snaps.empty) await batch.commit();\r\n\r\n        return { success: true, message: `Removed ${eventTitle} from user ${uid}` };\r\n    } catch (error: any) {\r\n        console.error(\"Error cleaning user reg:\", error);\r\n        return { success: false, message: error.message };\r\n    }\r\n};\r\n\r\n// 10. Admin Add User to Event\r\nexport const adminAddUserToEvent = async (eventTitle: string, userEmail: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    const firestore = db;\r\n\r\n    try {\r\n        // 1. Find User by Email\r\n        const usersRef = collection(firestore, \"users\");\r\n        const q = query(usersRef, where(\"email\", \"==\", userEmail));\r\n        const userSnap = await getDocs(q);\r\n\r\n        if (userSnap.empty) {\r\n            return { success: false, message: \"User not found with this email.\" };\r\n        }\r\n\r\n        const userDoc = userSnap.docs[0];\r\n        const uid = userDoc.id;\r\n        const userData = userDoc.data();\r\n\r\n\r\n        // 2. Check if already registered\r\n        const regRef = doc(firestore, \"registrations\", uid);\r\n        const regDoc = await getDoc(regRef);\r\n        let currentEvents: string[] = [];\r\n        let currentTeamEvents: string[] = [];\r\n\r\n        if (regDoc.exists()) {\r\n            const data = regDoc.data();\r\n            currentEvents = data.events || [];\r\n            currentTeamEvents = data.teamEvents || [];\r\n        }\r\n\r\n        if (currentEvents.includes(eventTitle) || currentTeamEvents.includes(eventTitle)) {\r\n            return { success: false, message: \"User is already registered for this event.\" };\r\n        }\r\n\r\n        // --- Validation Logic ---\r\n        const allItems = categories.flatMap((cat: any) => cat.items);\r\n        const eventItem = allItems.find((item: any) => item.title === eventTitle);\r\n\r\n        if (!eventItem) return { success: false, message: \"Event definition not found.\" };\r\n\r\n        let offStageCount = 0;\r\n        let onStageIndCount = 0;\r\n        let onStageGroupCount = 0;\r\n        const datesMap: Record<string, string[]> = {};\r\n\r\n        const processEvent = (title: string) => {\r\n            const ev = allItems.find((item: any) => item.title === title);\r\n            if (!ev) return;\r\n\r\n            if (ev.categoryType === 'off_stage') {\r\n                offStageCount++;\r\n            } else if (ev.categoryType === 'on_stage' || ev.categoryType === 'flagship') {\r\n                if (ev.eventType === 'individual') {\r\n                    onStageIndCount++;\r\n                } else {\r\n                    onStageGroupCount++;\r\n                }\r\n            }\r\n\r\n            if (ev.date) {\r\n                if (!datesMap[ev.date]) datesMap[ev.date] = [];\r\n                datesMap[ev.date].push(ev.title);\r\n            }\r\n        };\r\n\r\n        // Check existing + new\r\n        currentEvents.forEach(processEvent);\r\n        currentTeamEvents.forEach(processEvent);\r\n        processEvent(eventTitle);\r\n\r\n        if (offStageCount > 4) return { success: false, message: `Limit Reached: Max 4 Off-Stage events.` };\r\n        if (onStageIndCount > 3) return { success: false, message: `Limit Reached: Max 3 Individual On-Stage events.` };\r\n        if (onStageGroupCount > 2) return { success: false, message: `Limit Reached: Max 2 Group events.` };\r\n\r\n        for (const [date, events] of Object.entries(datesMap)) {\r\n            if (events.length > 1) {\r\n                return { success: false, message: `Schedule Conflict: User has ${events[0]} on ${date}.` };\r\n            }\r\n        }\r\n\r\n        // 3. Register User (Transaction to handle chest no & counters)\r\n        return await runTransaction(firestore, async (transaction) => {\r\n            // Check Chest Number\r\n            let userChestNo = userData.chestNo || null;\r\n            const globalCounterRef = doc(firestore, \"counters\", \"user_chest_numbers\");\r\n            let currentGlobalCount = 0;\r\n\r\n            if (!userChestNo) {\r\n                const globalCounterDoc = await transaction.get(globalCounterRef);\r\n                currentGlobalCount = globalCounterDoc.exists() ? (globalCounterDoc.data().count || 0) : 0;\r\n\r\n                // Find next available chest no\r\n                let isUnique = false;\r\n                while (!isUnique) {\r\n                    currentGlobalCount++;\r\n                    const candidate = (100 + currentGlobalCount).toString().padStart(3, '0');\r\n                    // Check if taken in users\r\n                    const userQuery = query(collection(firestore, \"users\"), where(\"chestNo\", \"==\", candidate));\r\n                    const querySnap = await getDocs(userQuery);\r\n\r\n                    // Check lock table\r\n                    const chestNoLockRef = doc(firestore, \"taken_chest_numbers\", candidate);\r\n                    const chestNoLockDoc = await transaction.get(chestNoLockRef);\r\n\r\n                    if (querySnap.empty && !chestNoLockDoc.exists()) {\r\n                        userChestNo = candidate;\r\n                        isUnique = true;\r\n                    }\r\n                }\r\n\r\n                // Reserve it\r\n                transaction.set(globalCounterRef, { count: currentGlobalCount }, { merge: true });\r\n                transaction.update(userDoc.ref, { chestNo: userChestNo });\r\n\r\n                const chestNoLockRef = doc(firestore, \"taken_chest_numbers\", userChestNo);\r\n                transaction.set(chestNoLockRef, { uid, createdAt: serverTimestamp() });\r\n            }\r\n\r\n            // Create Event Registration ID\r\n            const regId = `${eventTitle.replace(/\\s+/g, '_')}_${uid}`;\r\n            const eventRegRef = doc(firestore, \"event_registrations\", regId);\r\n\r\n            transaction.set(eventRegRef, {\r\n                type: 'individual',\r\n                userId: uid,\r\n                userChestNo: userChestNo,\r\n                eventTitle: eventTitle,\r\n                registeredAt: serverTimestamp(),\r\n                chestNo: userChestNo // Redundancy for easy access\r\n            });\r\n\r\n            // Update User Registrations\r\n            transaction.set(regRef, {\r\n                userId: uid,\r\n                events: arrayUnion(eventTitle),\r\n                lastUpdated: serverTimestamp()\r\n            }, { merge: true });\r\n\r\n            return { success: true, message: `User added successfully. Chest No: ${userChestNo}` };\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Admin add user error:\", error);\r\n        return { success: false, message: error.message || \"Failed to add user.\" };\r\n    }\r\n};\r\n\r\n// 11. Admin Remove User From Event\r\nexport const adminRemoveUserFromEvent = async (eventTitle: string, registrationId: string, uid: string, type: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    const firestore = db;\r\n\r\n    try {\r\n        if (type === 'individual') {\r\n            const batch = writeBatch(firestore);\r\n\r\n            // Delete event registration\r\n            const regRef = doc(firestore, \"event_registrations\", registrationId);\r\n            batch.delete(regRef);\r\n\r\n            // Remove from user profile\r\n            const userRegRef = doc(firestore, \"registrations\", uid);\r\n            batch.update(userRegRef, {\r\n                events: arrayRemove(eventTitle)\r\n            });\r\n\r\n            await batch.commit();\r\n            return { success: true, message: \"User removed from event.\" };\r\n        } else {\r\n            // Team Logic - Handling Removal of Team Members or Disbanding Team\r\n            const teamRegRef = doc(firestore, \"event_registrations\", registrationId);\r\n            const teamRegSnap = await getDoc(teamRegRef);\r\n\r\n            if (!teamRegSnap.exists()) return { success: false, message: \"Registration not found\" };\r\n            const data = teamRegSnap.data();\r\n\r\n            if (data.leaderId === uid) {\r\n                // Leader -> Disband Team\r\n                const batch = writeBatch(firestore);\r\n\r\n                // Delete Reg Doc\r\n                batch.delete(teamRegRef);\r\n\r\n                // Delete Team Doc\r\n                if (data.teamId) {\r\n                    batch.delete(doc(firestore, \"teams\", data.teamId));\r\n                }\r\n\r\n                // Remove event from Leader\r\n                batch.update(doc(firestore, \"registrations\", uid), {\r\n                    teamEvents: arrayRemove(eventTitle)\r\n                });\r\n\r\n                // Update all members\r\n                if (data.memberIds && Array.isArray(data.memberIds)) {\r\n                    data.memberIds.forEach((mid: string) => {\r\n                        if (mid === uid) return;\r\n                        const mRegRef = doc(firestore, \"registrations\", mid);\r\n                        batch.update(mRegRef, {\r\n                            teamEvents: arrayRemove(eventTitle)\r\n                        });\r\n                    });\r\n                }\r\n\r\n                await batch.commit();\r\n                return { success: true, message: \"Team disbanded and removed.\" };\r\n\r\n            } else {\r\n                // Member -> Remove from team\r\n                const batch = writeBatch(firestore);\r\n\r\n                // Update Event Reg\r\n                batch.update(teamRegRef, {\r\n                    memberIds: arrayRemove(uid)\r\n                });\r\n\r\n                // Update Team Doc\r\n                if (data.teamId) {\r\n                    const teamRef = doc(firestore, \"teams\", data.teamId);\r\n                    batch.update(teamRef, {\r\n                        memberIds: arrayRemove(uid)\r\n                    });\r\n                }\r\n\r\n                // Update User Reg\r\n                const userRegRef = doc(firestore, \"registrations\", uid);\r\n                batch.update(userRegRef, {\r\n                    teamEvents: arrayRemove(eventTitle)\r\n                });\r\n\r\n                await batch.commit();\r\n                return { success: true, message: \"Member removed from team.\" };\r\n            }\r\n        }\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Remove user error:\", error);\r\n        return { success: false, message: error.message || \"Failed to remove user.\" };\r\n    }\r\n};\r\n\r\n// 12. Mark / Unmark Participation for a single registration\r\nexport const adminMarkParticipation = async (\r\n    registrationId: string,\r\n    participated: boolean\r\n): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    try {\r\n        const regRef = doc(db, \"event_registrations\", registrationId);\r\n        await setDoc(\r\n            regRef,\r\n            {\r\n                participated,\r\n                participatedAt: participated ? serverTimestamp() : null,\r\n            },\r\n            { merge: true }\r\n        );\r\n        return { success: true, message: participated ? \"Marked as participated\" : \"Marked as not participated\" };\r\n    } catch (error: any) {\r\n        console.error(\"Error marking participation:\", error);\r\n        return { success: false, message: error.message || \"Failed to update participation.\" };\r\n    }\r\n};\r\n\r\n// 13. Bulk Mark Participation for multiple registrations\r\nexport const adminBulkMarkParticipation = async (\r\n    registrationIds: string[],\r\n    participated: boolean\r\n): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    if (registrationIds.length === 0) return { success: true, message: \"Nothing to update.\" };\r\n    try {\r\n        const firestore = db;\r\n        const batch = writeBatch(firestore);\r\n        registrationIds.forEach((id) => {\r\n            const ref = doc(firestore, \"event_registrations\", id);\r\n            batch.set(ref, { participated, participatedAt: participated ? serverTimestamp() : null }, { merge: true });\r\n        });\r\n        await batch.commit();\r\n        return {\r\n            success: true,\r\n            message: `${participated ? \"Marked\" : \"Cleared\"} ${registrationIds.length} entries.`,\r\n        };\r\n    } catch (error: any) {\r\n        console.error(\"Error bulk marking participation:\", error);\r\n        return { success: false, message: error.message || \"Failed to bulk update.\" };\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\lib\\firebase.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1577,1580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1577,1580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":64,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":64,"endColumn":16,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2229,2242],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Auth, GoogleAuthProvider, getAuth } from \"firebase/auth\";\r\nimport { FirebaseApp, initializeApp, getApps, getApp } from \"firebase/app\";\r\nimport { getFirestore, Firestore, initializeFirestore, persistentLocalCache, persistentMultipleTabManager, setLogLevel } from \"firebase/firestore\";\r\nimport { getAnalytics, Analytics } from \"firebase/analytics\";\r\n\r\n// Explicit configuration provided by user\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nlet app: FirebaseApp;\r\nlet auth: Auth;\r\nlet googleProvider: GoogleAuthProvider;\r\nlet db: Firestore;\r\nlet analytics: Analytics | null = null;\r\n\r\ntry {\r\n  // Initialize App\r\n  app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\r\n\r\n  // Initialize Auth\r\n  auth = getAuth(app);\r\n  googleProvider = new GoogleAuthProvider();\r\n\r\n  // Initialize Firestore\r\n  if (typeof window !== \"undefined\") {\r\n    // Client-side: Enable offline persistence & long polling\r\n    setLogLevel('error');\r\n    try {\r\n      db = initializeFirestore(app, {\r\n        experimentalForceLongPolling: true,\r\n        localCache: persistentLocalCache({ tabManager: persistentMultipleTabManager() })\r\n      });\r\n    } catch (e: any) {\r\n      // If already initialized, fallback\r\n      if (e.code === 'failed-precondition' || e.message?.includes('already been called')) {\r\n        db = getFirestore(app);\r\n      } else {\r\n        console.error(\"Error initializing Firestore settings:\", e);\r\n        db = getFirestore(app);\r\n      }\r\n    }\r\n\r\n    // Initialize Analytics (Client-side only)\r\n    try {\r\n      analytics = getAnalytics(app);\r\n    } catch (e) {\r\n      console.warn(\"Firebase Analytics failed to initialize:\", e);\r\n    }\r\n\r\n  } else {\r\n    // Server-side\r\n    db = getFirestore(app);\r\n  }\r\n\r\n} catch (error) {\r\n  console.error(\"Error initializing Firebase:\", error);\r\n  // @ts-ignore\r\n  app = null; auth = null; db = null; googleProvider = null;\r\n}\r\n\r\nexport { auth, googleProvider, db, app, analytics };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\lib\\registrationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteDoc' is defined but never used.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"deleteDoc"},"fix":{"range":[136,152],"text":""},"desc":"Remove unused variable \"deleteDoc\"."}]},{"ruleId":"prefer-const","severity":2,"message":"'globalCounterDoc' is never reassigned. Use 'const' instead.","line":205,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":205,"endColumn":33,"fix":{"range":[7734,7797],"text":"const globalCounterDoc = await transaction.get(globalCounterRef);"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":211,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8175,8178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8175,8178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":353,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15065,15068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15065,15068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'globalCounterRef' is never reassigned. Use 'const' instead.","line":401,"column":17,"nodeType":"Identifier","messageId":"useConst","endLine":401,"endColumn":33,"fix":{"range":[17336,17408],"text":"const globalCounterRef = doc(firestore, \"counters\", \"user_chest_numbers\");"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":458,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19926,19929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19926,19929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":495,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":495,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21774,21777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21774,21777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uid' is defined but never used.","line":501,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":501,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'eventTitle' is defined but never used.","line":501,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":501,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isSelected' is defined but never used.","line":501,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":501,"endColumn":82}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":2,"fixableWarningCount":0,"source":"import { db } from \"@/lib/firebase\";\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    collection,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    deleteDoc,\r\n    runTransaction,\r\n    serverTimestamp\r\n} from \"firebase/firestore\";\r\nimport { TeamRegistration, SoloRegistration, TeamMember, categories, EventItem } from \"@/data/constant\";\r\n\r\nexport interface UserRegistrations {\r\n    soloEvents: string[]; // Event Titles\r\n    teamEvents: TeamRegistration[];\r\n    totalCount: number;\r\n}\r\n\r\n// --- Helper Functions ---\r\n\r\nconst getEventDetails = (eventTitle: string): EventItem | undefined => {\r\n    const allItems = categories.flatMap((cat) => cat.items);\r\n    return allItems.find((item) => item.title === eventTitle);\r\n};\r\n\r\nexport const checkRegistrationStatus = async (eventTitle: string): Promise<{ isClosed: boolean }> => {\r\n    if (!db) return { isClosed: false };\r\n    try {\r\n        const settingsRef = doc(db, \"event_settings\", eventTitle);\r\n        const settingsSnap = await getDoc(settingsRef);\r\n        if (settingsSnap.exists()) {\r\n            return { isClosed: settingsSnap.data().isClosed || false };\r\n        }\r\n        return { isClosed: false };\r\n    } catch (error) {\r\n        console.error(\"Error checking registration status:\", error);\r\n        return { isClosed: false };\r\n    }\r\n};\r\n\r\nexport const fetchAllEventSettings = async (): Promise<Record<string, boolean>> => {\r\n    if (!db) return {};\r\n    try {\r\n        const settingsRef = collection(db, \"event_settings\");\r\n        const settingsSnap = await getDocs(settingsRef);\r\n        const settings: Record<string, boolean> = {};\r\n        settingsSnap.forEach(doc => {\r\n            settings[doc.id] = doc.data().isClosed || false;\r\n        });\r\n        return settings;\r\n    } catch (error) {\r\n        console.error(\"Error fetching all event settings:\", error);\r\n        return {};\r\n    }\r\n};\r\n\r\n// Validate rules\r\nexport const validateRegistrationRules = (\r\n    existingSoloEvents: string[],\r\n    existingTeamEvents: TeamRegistration[],\r\n    targetSoloEvents: string[] | null,\r\n    newTeamEventTitle?: string\r\n): { valid: boolean; message?: string } => {\r\n    const finalSoloEvents = targetSoloEvents !== null ? targetSoloEvents : existingSoloEvents;\r\n    const finalTeamEvents = existingTeamEvents.map(t => t.eventTitle);\r\n    if (newTeamEventTitle) finalTeamEvents.push(newTeamEventTitle);\r\n\r\n    // Filter out duplicates (user should not be able to double-register anyway)\r\n    const allEventTitles = Array.from(new Set([...finalSoloEvents, ...finalTeamEvents]));\r\n\r\n    let offStageCount = 0;\r\n    let onStageIndCount = 0;\r\n    let onStageGroupCount = 0;\r\n    const datesMap: Record<string, string[]> = {};\r\n\r\n    allEventTitles.forEach((title) => {\r\n        const event = getEventDetails(title);\r\n        if (!event) return;\r\n\r\n        if (event.categoryType === 'off_stage') {\r\n            offStageCount++;\r\n        } else if (event.categoryType === 'on_stage' || event.categoryType === 'flagship') {\r\n            if (event.eventType === 'individual') {\r\n                onStageIndCount++;\r\n            } else {\r\n                onStageGroupCount++;\r\n            }\r\n        }\r\n\r\n        if (event.date) {\r\n            if (!datesMap[event.date]) datesMap[event.date] = [];\r\n            datesMap[event.date].push(event.title);\r\n        }\r\n    });\r\n\r\n    // Validate 1 event per day rule\r\n    for (const [date, events] of Object.entries(datesMap)) {\r\n        if (events.length > 1) {\r\n            return {\r\n                valid: false,\r\n                message: `Schedule Conflict: You are already registered for \"${events[0]}\" on ${date}. Participation is limited to one event per day.`\r\n            };\r\n        }\r\n    }\r\n\r\n    if (offStageCount > 4) return { valid: false, message: `Limit Reached: Maximum of 4 Off-Stage events allowed. Current selection: ${offStageCount}.` };\r\n    if (onStageIndCount > 3) return { valid: false, message: `Limit Reached: Maximum of 3 Individual On-Stage events allowed. Current selection: ${onStageIndCount}.` };\r\n    if (onStageGroupCount > 2) return { valid: false, message: `Limit Reached: Maximum of 2 Group events allowed. Current selection: ${onStageGroupCount}.` };\r\n\r\n    return { valid: true };\r\n};\r\n\r\n// --- Main Service Functions ---\r\n\r\nexport const fetchUserRegistrations = async (uid: string): Promise<UserRegistrations> => {\r\n    if (!db || !uid) return { soloEvents: [], teamEvents: [], totalCount: 0 };\r\n    const firestore = db;\r\n\r\n    try {\r\n        const soloDocRef = doc(firestore, \"registrations\", uid);\r\n        const soloDoc = await getDoc(soloDocRef);\r\n        let soloEvents: string[] = [];\r\n        let cachedTeamEvents: string[] = [];\r\n\r\n        if (soloDoc.exists()) {\r\n            const data = soloDoc.data() as SoloRegistration;\r\n            soloEvents = data.events || [];\r\n            cachedTeamEvents = data.teamEvents || [];\r\n        }\r\n\r\n        const teamsRef = collection(firestore, \"teams\");\r\n        const q = query(teamsRef, where(\"memberIds\", \"array-contains\", uid));\r\n        const querySnapshot = await getDocs(q);\r\n        const teamEvents: TeamRegistration[] = [];\r\n        const actualTeamEventTitles: string[] = [];\r\n\r\n        querySnapshot.forEach((doc) => {\r\n            const teamData = doc.data() as TeamRegistration;\r\n            teamEvents.push({ id: doc.id, ...teamData });\r\n            if (teamData.eventTitle) {\r\n                actualTeamEventTitles.push(teamData.eventTitle);\r\n            }\r\n        });\r\n\r\n        const cachedSet = new Set(cachedTeamEvents);\r\n        const actualSet = new Set(actualTeamEventTitles);\r\n\r\n        let needsUpdate = false;\r\n        if (cachedSet.size !== actualSet.size) needsUpdate = true;\r\n        else {\r\n            for (const t of actualSet) {\r\n                if (!cachedSet.has(t)) {\r\n                    needsUpdate = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (needsUpdate) {\r\n            try {\r\n                await setDoc(soloDocRef, {\r\n                    userId: uid,\r\n                    teamEvents: actualTeamEventTitles,\r\n                    lastUpdated: new Date().toISOString()\r\n                }, { merge: true });\r\n            } catch (err) {\r\n                console.error(\"Failed to auto-heal registrations:\", err);\r\n            }\r\n        }\r\n\r\n        return { soloEvents, teamEvents, totalCount: soloEvents.length + teamEvents.length };\r\n    } catch (error) {\r\n        console.error(\"Error fetching registrations:\", error);\r\n        return { soloEvents: [], teamEvents: [], totalCount: 0 };\r\n    }\r\n};\r\n\r\nconst getRegId = (eventTitle: string, userId: string) => `${eventTitle.replace(/\\s+/g, '_')}_${userId}`;\r\n\r\nexport const createTeam = async (\r\n    leaderUid: string,\r\n    leaderName: string,\r\n    leaderEmail: string,\r\n    eventTitle: string,\r\n    members: TeamMember[]\r\n): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db || !leaderUid) return { success: false, message: \"System Error or Not Logged In\" };\r\n    const firestore = db;\r\n\r\n    try {\r\n        const status = await checkRegistrationStatus(eventTitle);\r\n        if (status.isClosed) return { success: false, message: \"Registration is closed for this event.\" };\r\n\r\n        const allMemberIds = [leaderUid, ...members.map(m => m.uid).filter(uid => uid !== leaderUid)];\r\n        const uniqueMemberIds = Array.from(new Set(allMemberIds));\r\n\r\n        return await runTransaction(firestore, async (transaction) => {\r\n            const teamCounterRef = doc(firestore, \"counters\", `team_${eventTitle}`);\r\n            const teamCounterDoc = await transaction.get(teamCounterRef);\r\n\r\n            const globalCounterRef = doc(firestore, \"counters\", \"user_chest_numbers\");\r\n            let globalCounterDoc = await transaction.get(globalCounterRef);\r\n            let currentGlobalCount = globalCounterDoc.exists() ? (globalCounterDoc.data().count || 0) : 0;\r\n\r\n            const userChestNoMap: { [uid: string]: string | null } = {};\r\n            const memberChestNoUpdates: { [uid: string]: string } = {};\r\n            const finalMemberChestNos: { [uid: string]: string } = {};\r\n            const regDocsMap: { [uid: string]: any } = {};\r\n            let leaderHouse: string | null = null;\r\n\r\n            for (const uid of uniqueMemberIds) {\r\n                const userDocRef = doc(firestore, \"users\", uid);\r\n                const userDoc = await transaction.get(userDocRef);\r\n\r\n                if (!userDoc.exists()) {\r\n                    throw new Error(`Profile not found for ${uid}. Complete profile first.`);\r\n                }\r\n\r\n                const userData = userDoc.data();\r\n                if (!userData.name || !userData.department || !userData.collegeId || !userData.mobile || !userData.house) {\r\n                    throw new Error(`Profile incomplete for ${userData.name || uid}. Please ensure house and mobile are updated.`);\r\n                }\r\n\r\n                // Capture leader's house or validate member's house matches leader's\r\n                if (uid === leaderUid) {\r\n                    leaderHouse = userData.house;\r\n                } else if (leaderHouse && userData.house !== leaderHouse) {\r\n                    throw new Error(`House Mismatch: All team members must belong to the same house. ${userData.name} belongs to ${userData.house} while you belong to ${leaderHouse}.`);\r\n                }\r\n\r\n                if (userData.chestNo) {\r\n                    userChestNoMap[uid] = userData.chestNo;\r\n                } else {\r\n                    userChestNoMap[uid] = null;\r\n                }\r\n\r\n                const regDocRef = doc(firestore, \"registrations\", uid);\r\n                const regDoc = await transaction.get(regDocRef);\r\n                regDocsMap[uid] = regDoc;\r\n\r\n                let currentSoloEvents: string[] = [];\r\n                let currentTeamEvents: string[] = [];\r\n\r\n                if (regDoc.exists()) {\r\n                    const data = regDoc.data() as SoloRegistration;\r\n                    currentSoloEvents = data.events || [];\r\n                    currentTeamEvents = data.teamEvents || [];\r\n                }\r\n\r\n                if (currentSoloEvents.includes(eventTitle) || currentTeamEvents.includes(eventTitle)) {\r\n                    const memberName = members.find(m => m.uid === uid)?.name || (uid === leaderUid ? \"You\" : \"A member\");\r\n                    throw new Error(`${memberName} is already registered.`);\r\n                }\r\n\r\n                const mockTeamRegs = currentTeamEvents.map(t => ({ eventTitle: t } as TeamRegistration));\r\n                const validation = validateRegistrationRules(currentSoloEvents, mockTeamRegs, null, eventTitle);\r\n\r\n                if (!validation.valid) {\r\n                    const memberName = members.find(m => m.uid === uid)?.name || (uid === leaderUid ? \"You\" : \"A member\");\r\n                    throw new Error(`${memberName}: ${validation.message}`);\r\n                }\r\n            }\r\n\r\n            const eventInfo = getEventDetails(eventTitle);\r\n            if (!eventInfo) throw new Error(\"Event not found\");\r\n\r\n            if (members.length < (eventInfo.minParticipants || 1)) throw new Error(\"Too few members\");\r\n\r\n            for (const uid of uniqueMemberIds) {\r\n                if (userChestNoMap[uid]) {\r\n                    finalMemberChestNos[uid] = userChestNoMap[uid] as string;\r\n                } else {\r\n                    let isUnique = false;\r\n                    while (!isUnique) {\r\n                        currentGlobalCount++;\r\n                        const candidate = (100 + currentGlobalCount).toString().padStart(3, '0');\r\n                        const userQuery = query(collection(firestore, \"users\"), where(\"chestNo\", \"==\", candidate));\r\n                        const querySnap = await getDocs(userQuery);\r\n                        const chestNoLockRef = doc(firestore, \"taken_chest_numbers\", candidate);\r\n                        const chestNoLockDoc = await transaction.get(chestNoLockRef);\r\n\r\n                        if (querySnap.empty && !chestNoLockDoc.exists()) {\r\n                            finalMemberChestNos[uid] = candidate;\r\n                            memberChestNoUpdates[uid] = candidate;\r\n                            isUnique = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            const teamCount = teamCounterDoc.exists() ? (teamCounterDoc.data().count || 0) : 0;\r\n            const newTeamCount = teamCount + 1;\r\n            const shortCode = eventInfo.shortCode || \"GRP\";\r\n            const teamChestNo = `${shortCode}${(100 + newTeamCount).toString().padStart(3, '0')}`;\r\n\r\n            if (Object.keys(memberChestNoUpdates).length > 0) {\r\n                transaction.set(globalCounterRef, { count: currentGlobalCount }, { merge: true });\r\n            }\r\n\r\n            for (const [uid, newNo] of Object.entries(memberChestNoUpdates)) {\r\n                const userDocRef = doc(firestore, \"users\", uid);\r\n                transaction.set(userDocRef, { chestNo: newNo }, { merge: true });\r\n                const chestNoLockRef = doc(firestore, \"taken_chest_numbers\", newNo);\r\n                transaction.set(chestNoLockRef, { uid, createdAt: serverTimestamp() });\r\n            }\r\n\r\n            for (const uid of uniqueMemberIds) {\r\n                const regDocRef = doc(firestore, \"registrations\", uid);\r\n                const regDoc = regDocsMap[uid];\r\n                transaction.set(regDocRef, {\r\n                    userId: uid,\r\n                    teamEvents: [...(regDoc.exists() ? ((regDoc.data() as SoloRegistration).teamEvents || []) : []), eventTitle],\r\n                    lastUpdated: new Date().toISOString()\r\n                }, { merge: true });\r\n            }\r\n\r\n            transaction.set(teamCounterRef, { count: newTeamCount }, { merge: true });\r\n\r\n            const newTeamRef = doc(collection(firestore, \"teams\"));\r\n            const teamData = {\r\n                id: newTeamRef.id,\r\n                eventId: eventTitle,\r\n                eventTitle: eventTitle,\r\n                leaderId: leaderUid,\r\n                members: members,\r\n                memberIds: members.map(m => m.uid),\r\n                status: \"confirmed\",\r\n                teamChestNo: teamChestNo,\r\n                createdAt: new Date().toISOString()\r\n            };\r\n            transaction.set(newTeamRef, teamData);\r\n\r\n            const regId = getRegId(eventTitle, newTeamRef.id);\r\n            const regRef = doc(firestore, \"event_registrations\", regId);\r\n            transaction.set(regRef, {\r\n                type: 'team',\r\n                teamId: newTeamRef.id,\r\n                eventTitle: eventTitle,\r\n                leaderId: leaderUid,\r\n                teamChestNo: teamChestNo,\r\n                leaderChestNo: finalMemberChestNos[leaderUid],\r\n                memberChestNos: finalMemberChestNos,\r\n                memberIds: members.map(m => m.uid),\r\n                registeredAt: serverTimestamp()\r\n            });\r\n\r\n            return { success: true };\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error creating team:\", error);\r\n        return { success: false, message: error.message || \"Failed to join team.\" };\r\n    }\r\n};\r\n\r\nexport const updateUserSoloRegistrations = async (uid: string, newEvents: string[]): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db || !uid) return { success: false, message: \"System Error\" };\r\n    const firestore = db;\r\n\r\n    try {\r\n        return await runTransaction(firestore, async (transaction) => {\r\n            const soloDocRef = doc(firestore, \"registrations\", uid);\r\n            const soloDoc = await transaction.get(soloDocRef);\r\n\r\n            const currentData = soloDoc.exists() ? (soloDoc.data() as SoloRegistration) : null;\r\n            const currentEvents = currentData?.events || [];\r\n            const currentTeamEvents = currentData?.teamEvents || [];\r\n\r\n            const added = newEvents.filter(e => !currentEvents.includes(e));\r\n            const removed = currentEvents.filter(e => !newEvents.includes(e));\r\n\r\n            for (const eventTitle of added) {\r\n                const status = await checkRegistrationStatus(eventTitle);\r\n                if (status.isClosed) throw new Error(`Registration closed for ${eventTitle}.`);\r\n\r\n                // Extra check: Is it already a team event?\r\n                if (currentTeamEvents.includes(eventTitle)) {\r\n                    throw new Error(`Already registered for ${eventTitle} in a team.`);\r\n                }\r\n            }\r\n\r\n            const mockTeamRegs = currentTeamEvents.map(t => ({ eventTitle: t } as TeamRegistration));\r\n            const validation = validateRegistrationRules(currentEvents, mockTeamRegs, newEvents, undefined);\r\n\r\n            if (!validation.valid) throw new Error(validation.message);\r\n\r\n            const userDocRef = doc(firestore, \"users\", uid);\r\n            const userDoc = await transaction.get(userDocRef);\r\n\r\n            if (!userDoc.exists()) throw new Error(\"Profile not found.\");\r\n\r\n            const userData = userDoc.data();\r\n            if (!userData.name || !userData.department || !userData.collegeId || !userData.mobile) {\r\n                throw new Error(\"Profile incomplete.\");\r\n            }\r\n\r\n            let userChestNo = userData.chestNo || null;\r\n            let globalCounterRef = doc(firestore, \"counters\", \"user_chest_numbers\");\r\n            let currentGlobalCount = 0;\r\n\r\n            if (!userChestNo && added.length > 0) {\r\n                const globalCounterDoc = await transaction.get(globalCounterRef);\r\n                currentGlobalCount = globalCounterDoc.exists() ? (globalCounterDoc.data().count || 0) : 0;\r\n\r\n                let isUnique = false;\r\n                while (!isUnique) {\r\n                    currentGlobalCount++;\r\n                    const candidate = (100 + currentGlobalCount).toString().padStart(3, '0');\r\n                    const userQuery = query(collection(firestore, \"users\"), where(\"chestNo\", \"==\", candidate));\r\n                    const querySnap = await getDocs(userQuery);\r\n                    const chestNoLockRef = doc(firestore, \"taken_chest_numbers\", candidate);\r\n                    const chestNoLockDoc = await transaction.get(chestNoLockRef);\r\n\r\n                    if (querySnap.empty && !chestNoLockDoc.exists()) {\r\n                        userChestNo = candidate;\r\n                        isUnique = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (!userData.chestNo && added.length > 0) {\r\n                transaction.set(globalCounterRef, { count: currentGlobalCount }, { merge: true });\r\n                transaction.set(userDocRef, { chestNo: userChestNo }, { merge: true });\r\n                if (userChestNo) {\r\n                    const chestNoLockRef = doc(firestore, \"taken_chest_numbers\", userChestNo);\r\n                    transaction.set(chestNoLockRef, { uid, createdAt: serverTimestamp() });\r\n                }\r\n            }\r\n\r\n            for (const eventTitle of removed) {\r\n                const regId = getRegId(eventTitle, uid);\r\n                transaction.delete(doc(firestore, \"event_registrations\", regId));\r\n            }\r\n\r\n            for (const eventTitle of added) {\r\n                const regId = getRegId(eventTitle, uid);\r\n                transaction.set(doc(firestore, \"event_registrations\", regId), {\r\n                    type: 'individual',\r\n                    userId: uid,\r\n                    userChestNo: userChestNo,\r\n                    eventTitle: eventTitle,\r\n                    registeredAt: serverTimestamp()\r\n                });\r\n            }\r\n\r\n            transaction.set(soloDocRef, {\r\n                userId: uid,\r\n                events: newEvents,\r\n                lastUpdated: new Date().toISOString()\r\n            }, { merge: true });\r\n\r\n            return { success: true };\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Error updating registrations:\", error);\r\n        return { success: false, message: error.message || \"Update failed.\" };\r\n    }\r\n};\r\n\r\nexport const leaveTeam = async (uid: string, teamId: string): Promise<{ success: boolean; message?: string }> => {\r\n    if (!db) return { success: false, message: \"Database not initialized\" };\r\n    const firestore = db;\r\n    try {\r\n        await runTransaction(firestore, async (transaction) => {\r\n            const teamDocRef = doc(firestore, \"teams\", teamId);\r\n            const teamDoc = await transaction.get(teamDocRef);\r\n            if (!teamDoc.exists()) throw new Error(\"Team not found\");\r\n\r\n            const teamData = teamDoc.data() as TeamRegistration;\r\n            if (teamData.leaderId !== uid) throw new Error(\"Only the leader can delete.\");\r\n\r\n            const memberIds = teamData.memberIds || [];\r\n            for (const memberId of memberIds) {\r\n                const regDocRef = doc(firestore, \"registrations\", memberId);\r\n                const regDoc = await transaction.get(regDocRef);\r\n                if (regDoc.exists()) {\r\n                    const data = regDoc.data() as SoloRegistration;\r\n                    const updatedTeamEvents = (data.teamEvents || []).filter(t => t !== teamData.eventTitle);\r\n                    if (updatedTeamEvents.length !== (data.teamEvents || []).length) {\r\n                        transaction.set(regDocRef, { teamEvents: updatedTeamEvents }, { merge: true });\r\n                    }\r\n                }\r\n            }\r\n\r\n            transaction.delete(teamDocRef);\r\n            const regId = getRegId(teamData.eventTitle, teamId);\r\n            transaction.delete(doc(firestore, \"event_registrations\", regId));\r\n        });\r\n\r\n        return { success: true, message: \"Team disbanded successfully.\" };\r\n    } catch (error: any) {\r\n        console.error(\"Error leaving team:\", error);\r\n        return { success: false, message: error.message || \"Failed to leave team.\" };\r\n    }\r\n};\r\n\r\nexport const toggleSoloEvent = async (uid: string, eventTitle: string, isSelected: boolean): Promise<{ success: boolean; message?: string }> => {\r\n    return { success: false, message: \"Use batch update\" };\r\n};\r\nexport const getMyRegistrations = async (userId: string) => {\r\n    const registrations = await fetchUserRegistrations(userId);\r\n    return registrations;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ABHISHEK\\Documents\\Projects\\jhalak_aroha\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
